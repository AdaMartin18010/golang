# Goè¯­è¨€æ¸…æ´æ¶æ„ (Clean Architecture) é€‚é…ç‰ˆ

## ğŸ¯ **æ ¸å¿ƒæ€æƒ³**

Clean Architecture ç”± Robert C. Martin (Uncle Bob) æå‡ºï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ä¾èµ–å€’ç½®åŸåˆ™ï¼Œè®©ä¸šåŠ¡é€»è¾‘ç‹¬ç«‹äºå¤–éƒ¨æ¡†æ¶ã€æ•°æ®åº“ã€UIç­‰å…·ä½“å®ç°ã€‚åœ¨Goè¯­è¨€ä¸­å®ç°Clean Architectureæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿æŒGoçš„ç®€æ´æ€§å’Œå®ç”¨æ€§ï¼Œé¿å…è¿‡åº¦æŠ½è±¡ã€‚

## ğŸ—ï¸ **Goè¯­è¨€é€‚é…çš„æ¶æ„å±‚æ¬¡**

### **1. å®ä½“å±‚ (Entities)**

- æ ¸å¿ƒä¸šåŠ¡å¯¹è±¡å’Œè§„åˆ™
- ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨æ¡†æ¶
- åŒ…å«ä¸šåŠ¡é€»è¾‘å’ŒéªŒè¯è§„åˆ™

### **2. ç”¨ä¾‹å±‚ (Use Cases)**

- åº”ç”¨ç‰¹å®šçš„ä¸šåŠ¡è§„åˆ™
- åè°ƒå®ä½“å’Œå¤–éƒ¨ä¾èµ–
- å®ç°å…·ä½“çš„ä¸šåŠ¡åœºæ™¯

### **3. æ¥å£é€‚é…å™¨å±‚ (Interface Adapters)**

- å°†å¤–éƒ¨æ•°æ®è½¬æ¢ä¸ºå†…éƒ¨æ ¼å¼
- å®ç°æ•°æ®è®¿é—®æ¥å£
- å¤„ç†HTTPè¯·æ±‚å’Œå“åº”

### **4. æ¡†æ¶å’Œé©±åŠ¨å±‚ (Frameworks & Drivers)**

- æ•°æ®åº“ã€Webæ¡†æ¶ã€å¤–éƒ¨æœåŠ¡
- å…·ä½“çš„å®ç°ç»†èŠ‚
- åŸºç¡€è®¾æ–½ä»£ç 

## âœ¨ **Goè¯­è¨€å®ç°ç‰¹ç‚¹**

### **1. ä¾èµ–æ³¨å…¥**

```go
// ä½¿ç”¨æ¥å£å®šä¹‰ä¾èµ–
type UserRepository interface {
    FindByID(id string) (*User, error)
    Save(user *User) error
}

// é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
type UserService struct {
    repo UserRepository
}

func NewUserService(repo UserRepository) *UserService {
    return &UserService{repo: repo}
}
```

### **2. æ¥å£éš”ç¦»**

```go
// å®šä¹‰æœ€å°åŒ–çš„æ¥å£
type UserReader interface {
    FindByID(id string) (*User, error)
}

type UserWriter interface {
    Save(user *User) error
}

// ç»„åˆæ¥å£
type UserRepository interface {
    UserReader
    UserWriter
}
```

### **3. é”™è¯¯å¤„ç†**

```go
// å®šä¹‰ä¸šåŠ¡é”™è¯¯ç±»å‹
type BusinessError struct {
    Code    string
    Message string
}

func (e *BusinessError) Error() string {
    return fmt.Sprintf("[%s] %s", e.Code, e.Message)
}
```

## ğŸ“ **é¡¹ç›®ç»“æ„**

```text
clean-architecture/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ main.go                 # åº”ç”¨å…¥å£
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ domain/                 # å®ä½“å±‚
â”‚   â”‚   â”œâ”€â”€ user.go
â”‚   â”‚   â””â”€â”€ errors.go
â”‚   â”œâ”€â”€ usecase/                # ç”¨ä¾‹å±‚
â”‚   â”‚   â””â”€â”€ user_service.go
â”‚   â”œâ”€â”€ repository/             # æ¥å£é€‚é…å™¨å±‚
â”‚   â”‚   â”œâ”€â”€ interfaces.go
â”‚   â”‚   â””â”€â”€ implementations/
â”‚   â”‚       â”œâ”€â”€ memory.go
â”‚   â”‚       â””â”€â”€ postgres.go
â”‚   â””â”€â”€ delivery/               # æ¡†æ¶å’Œé©±åŠ¨å±‚
â”‚       â””â”€â”€ http/
â”‚           â”œâ”€â”€ handlers.go
â”‚           â””â”€â”€ router.go
â”œâ”€â”€ pkg/                        # å…±äº«åŒ…
â”‚   â””â”€â”€ logger/
â””â”€â”€ go.mod
```

## ğŸš€ **æ ¸å¿ƒä¼˜åŠ¿**

1. **å¯æµ‹è¯•æ€§**: ä¸šåŠ¡é€»è¾‘ä¸å¤–éƒ¨ä¾èµ–åˆ†ç¦»ï¼Œä¾¿äºå•å…ƒæµ‹è¯•
2. **å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„å±‚æ¬¡ç»“æ„ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹
3. **å¯æ‰©å±•æ€§**: æ–°åŠŸèƒ½å¯ä»¥é€šè¿‡å®ç°æ¥å£è½»æ¾æ·»åŠ 
4. **æŠ€æœ¯æ— å…³æ€§**: ä¸šåŠ¡é€»è¾‘ä¸ä¾èµ–ç‰¹å®šçš„æŠ€æœ¯æ ˆ

## ğŸ’¡ **æœ€ä½³å®è·µ**

1. **ä¿æŒç®€æ´**: é¿å…è¿‡åº¦è®¾è®¡ï¼Œç¬¦åˆGoè¯­è¨€å“²å­¦
2. **æ¥å£è®¾è®¡**: å®šä¹‰å°è€Œç²¾ç¡®çš„æ¥å£
3. **ä¾èµ–æ³¨å…¥**: ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
4. **é”™è¯¯å¤„ç†**: å®šä¹‰æ¸…æ™°çš„é”™è¯¯ç±»å‹å’Œå¤„ç†ç­–ç•¥
5. **æµ‹è¯•é©±åŠ¨**: ç¼–å†™å…¨é¢çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

## ğŸ”„ **ä¸Goè¯­è¨€ç”Ÿæ€çš„é›†æˆ**

- **ä¾èµ–ç®¡ç†**: ä½¿ç”¨Go modules
- **æµ‹è¯•æ¡†æ¶**: æ ‡å‡†åº“testingåŒ…
- **HTTPæ¡†æ¶**: æ ‡å‡†åº“net/httpæˆ–è½»é‡çº§æ¡†æ¶
- **æ•°æ®åº“**: ä½¿ç”¨database/sqlæ¥å£
- **é…ç½®ç®¡ç†**: ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶

---

è¿™ä¸ªå®ç°ä¿æŒäº†Clean Architectureçš„æ ¸å¿ƒåŸåˆ™ï¼ŒåŒæ—¶å……åˆ†åˆ©ç”¨äº†Goè¯­è¨€çš„ç‰¹æ€§ï¼Œé¿å…äº†è¿‡åº¦æŠ½è±¡ï¼Œç¡®ä¿äº†ä»£ç çš„ç®€æ´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
