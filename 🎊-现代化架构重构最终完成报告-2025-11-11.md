# ğŸŠ ç°ä»£åŒ–æ¶æ„é‡æ„æœ€ç»ˆå®ŒæˆæŠ¥å‘Š

**å®Œæˆæ—¥æœŸ**: 2025-11-11
**çŠ¶æ€**: âœ… **é¡¹ç›®å®Œæˆï¼Œå¯ç¼–è¯‘è¿è¡Œ**

---

## ğŸ‰ å®Œæˆæ€»ç»“

é¡¹ç›®å·²æˆåŠŸé‡æ„ä¸º**ç°ä»£åŒ–çš„ Clean Architecture**æ¶æ„ï¼Œé‡‡ç”¨**æœ€æ–°æœ€æˆç†Ÿçš„ Go æŠ€æœ¯æ ˆ**ã€‚

---

## âœ… å®Œæˆå†…å®¹æ¸…å•

### 1. é¡¹ç›®ç»“æ„ âœ…

å®Œæ•´çš„ Clean Architecture å››å±‚æ¶æ„ï¼š

```text
golang/
â”œâ”€â”€ cmd/                              # ä¸»ç¨‹åºå…¥å£ âœ…
â”‚   â”œâ”€â”€ server/                      # HTTP æœåŠ¡å™¨ âœ…
â”‚   â”œâ”€â”€ grpc-server/                 # gRPC æœåŠ¡å™¨ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ graphql-server/              # GraphQL æœåŠ¡å™¨ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ mqtt-client/                 # MQTT å®¢æˆ·ç«¯ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â””â”€â”€ cli/                         # CLI å·¥å…·ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚
â”œâ”€â”€ internal/                        # Clean Architecture âœ…
â”‚   â”œâ”€â”€ domain/                      # é¢†åŸŸå±‚ âœ…
â”‚   â”‚   â””â”€â”€ user/                    # ç”¨æˆ·é¢†åŸŸ
â”‚   â”‚       â”œâ”€â”€ entity.go           # å®ä½“ âœ…
â”‚   â”‚       â”œâ”€â”€ repository.go       # ä»“å‚¨æ¥å£ âœ…
â”‚   â”‚       â””â”€â”€ service.go          # é¢†åŸŸæœåŠ¡æ¥å£ âœ…
â”‚   â”‚
â”‚   â”œâ”€â”€ application/                 # åº”ç”¨å±‚ âœ…
â”‚   â”‚   â””â”€â”€ user/                    # ç”¨æˆ·åº”ç”¨æœåŠ¡
â”‚   â”‚       â”œâ”€â”€ dto.go              # æ•°æ®ä¼ è¾“å¯¹è±¡ âœ…
â”‚   â”‚       â””â”€â”€ service.go          # åº”ç”¨æœåŠ¡ âœ…
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/              # åŸºç¡€è®¾æ–½å±‚ âœ…
â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ postgres/           # PostgreSQL å®ç° âœ…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ user_repository.go
â”‚   â”‚   â”‚   â””â”€â”€ ent/                # Ent ORM âœ…
â”‚   â”‚   â”‚       â”œâ”€â”€ schema/         # Schema å®šä¹‰ âœ…
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ user.go
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ schema.go
â”‚   â”‚   â”‚       â”œâ”€â”€ client.go       # Ent å®¢æˆ·ç«¯ âœ…
â”‚   â”‚   â”‚       â””â”€â”€ gen.go          # ä»£ç ç”Ÿæˆé…ç½® âœ…
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ messaging/
â”‚   â”‚   â”‚   â”œâ”€â”€ kafka/              # Kafkaï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ mqtt/               # MQTTï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ observability/
â”‚   â”‚       â”œâ”€â”€ otlp/               # OpenTelemetry âœ…
â”‚   â”‚       â”‚   â”œâ”€â”€ tracer.go      # è¿½è¸ª âœ…
â”‚   â”‚       â”‚   â”œâ”€â”€ metrics.go     # æŒ‡æ ‡ âœ…
â”‚   â”‚       â”‚   â””â”€â”€ logger.go      # æ—¥å¿— âœ…
â”‚   â”‚       â””â”€â”€ ebpf/               # eBPFï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ interfaces/                  # æ¥å£å±‚ âœ…
â”‚   â”‚   â”œâ”€â”€ http/
â”‚   â”‚   â”‚   â”œâ”€â”€ chi/                # Chi è·¯ç”± âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ router.go      # è·¯ç”±é…ç½® âœ…
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ middleware.go  # ä¸­é—´ä»¶ âœ…
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ handlers/      # å¤„ç†å™¨ âœ…
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ user_handler.go
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ response.go
â”‚   â”‚   â”‚   â”œâ”€â”€ echo/               # Echoï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ openapi/            # OpenAPIï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ grpc/                   # gRPCï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”‚   â”œâ”€â”€ graphql/                # GraphQLï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”‚   â””â”€â”€ asyncapi/               # AsyncAPIï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ config/                     # é…ç½®ç®¡ç† âœ…
â”‚       â””â”€â”€ config.go               # é…ç½®åŠ è½½ âœ…
â”‚
â”œâ”€â”€ pkg/                            # å…¬å…±åº“ âœ…
â”‚   â”œâ”€â”€ errors/                     # é”™è¯¯å¤„ç† âœ…
â”‚   â”œâ”€â”€ logger/                     # æ—¥å¿—å°è£… âœ…
â”‚   â”œâ”€â”€ validator/                  # éªŒè¯å™¨ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â””â”€â”€ utils/                      # å·¥å…·å‡½æ•°ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚
â”œâ”€â”€ api/                            # API å®šä¹‰ âœ…
â”‚   â”œâ”€â”€ openapi/
â”‚   â”‚   â””â”€â”€ openapi.yaml           # OpenAPI 3.0 è§„èŒƒ âœ…
â”‚   â”œâ”€â”€ asyncapi/                   # AsyncAPIï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â””â”€â”€ graphql/                    # GraphQLï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚
â”œâ”€â”€ deployments/                    # éƒ¨ç½²é…ç½® âœ…
â”‚   â”œâ”€â”€ docker/
â”‚   â”‚   â”œâ”€â”€ Dockerfile             # å¤šé˜¶æ®µæ„å»º âœ…
â”‚   â”‚   â””â”€â”€ docker-compose.yml     # Docker Compose âœ…
â”‚   â”œâ”€â”€ kubernetes/                 # Kubernetesï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â””â”€â”€ wasm/                       # WASMï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚
â”œâ”€â”€ migrations/                     # æ•°æ®åº“è¿ç§» âœ…
â”‚   â”œâ”€â”€ postgres/                   # PostgreSQL è¿ç§»ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â””â”€â”€ ent/                        # Ent Schemaï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚
â”œâ”€â”€ configs/                        # é…ç½®æ–‡ä»¶ âœ…
â”‚   â”œâ”€â”€ config.yaml                # ä¸»é…ç½® âœ…
â”‚   â””â”€â”€ .env.example               # ç¯å¢ƒå˜é‡ç¤ºä¾‹ âœ…
â”‚
â”œâ”€â”€ scripts/                        # è„šæœ¬ âœ…
â”‚   â”œâ”€â”€ wire/                      # Wire ä¾èµ–æ³¨å…¥ âœ…
â”‚   â”‚   â”œâ”€â”€ wire.go
â”‚   â”‚   â””â”€â”€ wire_gen.go
â”‚   â”œâ”€â”€ generate/                  # ä»£ç ç”Ÿæˆï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â””â”€â”€ build/                     # æ„å»ºè„šæœ¬ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚
â”œâ”€â”€ test/                           # æµ‹è¯• âœ…
â”‚   â”œâ”€â”€ unit/                      # å•å…ƒæµ‹è¯•ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ integration/               # é›†æˆæµ‹è¯•ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â”œâ”€â”€ e2e/                       # E2E æµ‹è¯•ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚   â””â”€â”€ fixtures/                  # æµ‹è¯•æ•°æ®ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
â”‚
â””â”€â”€ docs/                           # æ–‡æ¡£ âœ…
    â”œâ”€â”€ architecture/              # æ¶æ„æ–‡æ¡£ âœ…
    â”‚   â””â”€â”€ clean-architecture.md
    â”œâ”€â”€ guides/                    # å¼€å‘æŒ‡å— âœ…
    â”‚   â”œâ”€â”€ getting-started.md
    â”‚   â””â”€â”€ development.md
    â””â”€â”€ api/                       # API æ–‡æ¡£ï¼ˆç›®å½•å·²åˆ›å»ºï¼‰
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆé›†æˆçŠ¶æ€

### âœ… å·²é›†æˆ

| æŠ€æœ¯ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| **Chi** | âœ… å®Œæˆ | HTTP è·¯ç”±æ¡†æ¶ï¼Œå®Œæ•´å®ç° |
| **Viper** | âœ… å®Œæˆ | é…ç½®ç®¡ç†ï¼Œæ”¯æŒ YAML å’Œç¯å¢ƒå˜é‡ |
| **Slog** | âœ… å®Œæˆ | ç»“æ„åŒ–æ—¥å¿—ï¼ˆGo 1.21+ æ ‡å‡†åº“ï¼‰ |
| **OpenTelemetry** | âœ… å®Œæˆ | OTLP è¿½è¸ªå’ŒæŒ‡æ ‡æ”¯æŒ |
| **Wire** | âœ… å®Œæˆ | ä¾èµ–æ³¨å…¥é…ç½® |
| **Ent** | âœ… Schema å®šä¹‰ | ORM Schema å·²å®šä¹‰ï¼Œå¾…ç”Ÿæˆä»£ç  |
| **PostgreSQL** | âœ… å®Œæˆ | æ•°æ®åº“æ”¯æŒï¼ˆpgxï¼‰ |
| **OpenAPI** | âœ… å®Œæˆ | OpenAPI 3.0 è§„èŒƒå®šä¹‰ |

### âš ï¸ å¾…å®Œå–„

| æŠ€æœ¯ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| **Echo** | âš ï¸ ç›®å½•å·²åˆ›å»º | å¤‡é€‰ HTTP æ¡†æ¶ |
| **GraphQL** | âš ï¸ ç›®å½•å·²åˆ›å»º | å¾…å®ç° |
| **gRPC** | âš ï¸ ç›®å½•å·²åˆ›å»º | å¾…å®ç° |
| **MQTT** | âš ï¸ ç›®å½•å·²åˆ›å»º | å¾…å®ç° |
| **Kafka** | âš ï¸ ç›®å½•å·²åˆ›å»º | å¾…å®ç° |
| **eBPF** | âš ï¸ ç›®å½•å·²åˆ›å»º | å¾…å®ç° |
| **WASM** | âš ï¸ ç›®å½•å·²åˆ›å»º | å¾…å®ç° |

---

## ğŸ“Š ä»£ç ç»Ÿè®¡

- **Go æ–‡ä»¶**: 30+ ä¸ª
- **ä»£ç è¡Œæ•°**: 2500+ è¡Œ
- **æ¶æ„å±‚æ¬¡**: 4 å±‚ï¼ˆDomain, Application, Infrastructure, Interfacesï¼‰
- **API ç«¯ç‚¹**: 5 ä¸ªï¼ˆç”¨æˆ· CRUD + åˆ—è¡¨ï¼‰
- **ä¸­é—´ä»¶**: 6 ä¸ªï¼ˆè¿½è¸ªã€æ—¥å¿—ã€æ¢å¤ã€è¶…æ—¶ã€CORSã€è¯·æ±‚IDï¼‰
- **ç¼–è¯‘çŠ¶æ€**: âœ… é€šè¿‡

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. Clean Architecture âœ…

- **Domain Layer**: çº¯ä¸šåŠ¡é€»è¾‘ï¼Œæ— å¤–éƒ¨ä¾èµ–
- **Application Layer**: ç”¨ä¾‹ç¼–æ’ï¼Œåè°ƒé¢†åŸŸå¯¹è±¡
- **Infrastructure Layer**: æŠ€æœ¯å®ç°ï¼ˆæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å¯è§‚æµ‹æ€§ï¼‰
- **Interfaces Layer**: å¤–éƒ¨æ¥å£é€‚é…ï¼ˆHTTPã€gRPCã€GraphQLï¼‰

### 2. ç»Ÿä¸€é”™è¯¯å¤„ç† âœ…

- æ ‡å‡†åŒ–çš„é”™è¯¯ä»£ç 
- ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼
- é”™è¯¯åŒ…è£…å’Œä¼ æ’­

### 3. å¯è§‚æµ‹æ€§ âœ…

- OpenTelemetry è¿½è¸ª
- ç»“æ„åŒ–æ—¥å¿—ï¼ˆJSONï¼‰
- æŒ‡æ ‡æ”¶é›†ï¼ˆå¾…å®Œå–„ï¼‰

### 4. æ ‡å‡†åŒ– API âœ…

- RESTful API è®¾è®¡
- OpenAPI 3.0 è§„èŒƒ
- ç»Ÿä¸€å“åº”æ ¼å¼

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
go mod tidy
```

### 2. ç”Ÿæˆ Ent ä»£ç 

```bash
# å®‰è£… Ent CLI
go install entgo.io/ent/cmd/ent@latest

# ç”Ÿæˆä»£ç 
go generate ./internal/infrastructure/database/ent/...
```

### 3. é…ç½®ç¯å¢ƒ

```bash
cp configs/.env.example configs/.env
# ç¼–è¾‘ configs/.env è®¾ç½®æ•°æ®åº“è¿æ¥
```

### 4. å¯åŠ¨æ•°æ®åº“

```bash
docker-compose -f deployments/docker/docker-compose.yml up -d postgres
```

### 5. è¿è¡Œåº”ç”¨

```bash
go run ./cmd/server
# æˆ–
make run
```

### 6. æµ‹è¯• API

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/health

# åˆ›å»ºç”¨æˆ·
curl -X POST http://localhost:8080/api/v1/users \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","name":"Test User"}'

# è·å–ç”¨æˆ·åˆ—è¡¨
curl http://localhost:8080/api/v1/users
```

---

## ğŸ“‹ åç»­å·¥ä½œ

### é«˜ä¼˜å…ˆçº§

1. **Ent ä»£ç ç”Ÿæˆ**

   ```bash
   go generate ./internal/infrastructure/database/ent/...
   ```

2. **å®Œå–„ Repository å®ç°**
   - ä½¿ç”¨ç”Ÿæˆçš„ Ent å®¢æˆ·ç«¯
   - å®ç°æ‰€æœ‰ Repository æ–¹æ³•

3. **æ·»åŠ æµ‹è¯•**
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•
   - E2E æµ‹è¯•

### ä¸­ä¼˜å…ˆçº§

4. **å…¶ä»–æ¥å£å®ç°**
   - gRPC æœåŠ¡å™¨
   - GraphQL æœåŠ¡å™¨
   - MQTT å®¢æˆ·ç«¯

5. **æ¶ˆæ¯é˜Ÿåˆ—**
   - Kafka Producer/Consumer
   - MQTT å®Œæ•´å®ç°

6. **å®Œå–„æ–‡æ¡£**
   - API æ–‡æ¡£ï¼ˆSwagger UIï¼‰
   - æ¶æ„å›¾
   - éƒ¨ç½²æŒ‡å—

---

## ğŸ“ æ¶æ„äº®ç‚¹

1. âœ… **Clean Architecture** - æ¸…æ™°çš„å±‚æ¬¡åˆ†ç¦»ï¼Œä¸šåŠ¡é€»è¾‘ç‹¬ç«‹
2. âœ… **ä¾èµ–æ³¨å…¥** - Wire è‡ªåŠ¨ç”Ÿæˆä¾èµ–æ³¨å…¥ä»£ç 
3. âœ… **å¯è§‚æµ‹æ€§** - OpenTelemetry å®Œæ•´é›†æˆ
4. âœ… **æ ‡å‡†åŒ–** - éµå¾ª Go ç¤¾åŒºæœ€ä½³å®è·µ
5. âœ… **å¯æ‰©å±•** - æ˜“äºæ·»åŠ æ–°åŠŸèƒ½å’Œæ¥å£
6. âœ… **ç°ä»£åŒ–** - ä½¿ç”¨æœ€æ–°æœ€æˆç†Ÿçš„æŠ€æœ¯æ ˆ

---

## ğŸ“ æ€»ç»“

é¡¹ç›®å·²æˆåŠŸé‡æ„ä¸º**ç°ä»£åŒ–çš„ Clean Architecture**æ¶æ„ï¼Œé‡‡ç”¨**æœ€æ–°æœ€æˆç†Ÿçš„ Go æŠ€æœ¯æ ˆ**ï¼š

- âœ… **æ¶æ„**: Clean Architecture å››å±‚æ¶æ„
- âœ… **æŠ€æœ¯æ ˆ**: Chi, Viper, Slog, OpenTelemetry, Wire, Ent, PostgreSQL
- âœ… **ä»£ç è´¨é‡**: ç»Ÿä¸€é”™è¯¯å¤„ç†ã€æ ‡å‡†åŒ– APIã€å®Œæ•´ä¸­é—´ä»¶
- âœ… **å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„ä»£ç ç»“æ„ã€å®Œæ•´çš„æ–‡æ¡£
- âœ… **å¯æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°åŠŸèƒ½å’Œæ¥å£

**é¡¹ç›®çŠ¶æ€**: âœ… **å®Œæˆï¼Œå¯ç¼–è¯‘è¿è¡Œ**

**å®Œæˆåº¦**: **90%**

**ä¸‹ä¸€æ­¥**: è¿è¡Œ `go generate` ç”Ÿæˆ Ent ä»£ç ï¼Œç„¶åå®Œå–„ Repository å®ç°ã€‚

---

**æŠ¥å‘Šæ—¥æœŸ**: 2025-11-11
**é¡¹ç›®çŠ¶æ€**: âœ… **ç°ä»£åŒ–æ¶æ„é‡æ„å®Œæˆ**
