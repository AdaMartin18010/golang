# æµ‹è¯•ä½“ç³»

<!-- TOC START -->
- [æµ‹è¯•ä½“ç³»](#æµ‹è¯•ä½“ç³»)
  - [1.1 ğŸ“š æ¨¡å—æ¦‚è¿°](#11--æ¨¡å—æ¦‚è¿°)
  - [1.2 ğŸ¯ æ ¸å¿ƒç‰¹æ€§](#12--æ ¸å¿ƒç‰¹æ€§)
  - [1.3 ğŸ“‹ æŠ€æœ¯æ¨¡å—](#13--æŠ€æœ¯æ¨¡å—)
    - [1.3.1 æµ‹è¯•æœ€ä½³å®è·µ](#131-æµ‹è¯•æœ€ä½³å®è·µ)
    - [1.3.2 æµ‹è¯•å·¥å…·é“¾](#132-æµ‹è¯•å·¥å…·é“¾)
    - [1.3.3 æµ‹è¯•è‡ªåŠ¨åŒ–](#133-æµ‹è¯•è‡ªåŠ¨åŒ–)
  - [1.4 ğŸš€ å¿«é€Ÿå¼€å§‹](#14--å¿«é€Ÿå¼€å§‹)
    - [1.4.1 ç¯å¢ƒè¦æ±‚](#141-ç¯å¢ƒè¦æ±‚)
    - [1.4.2 å®‰è£…ä¾èµ–](#142-å®‰è£…ä¾èµ–)
    - [1.4.3 è¿è¡Œç¤ºä¾‹](#143-è¿è¡Œç¤ºä¾‹)
  - [1.5 ğŸ“Š æŠ€æœ¯æŒ‡æ ‡](#15--æŠ€æœ¯æŒ‡æ ‡)
  - [1.6 ğŸ¯ å­¦ä¹ è·¯å¾„](#16--å­¦ä¹ è·¯å¾„)
    - [1.6.1 åˆå­¦è€…è·¯å¾„](#161-åˆå­¦è€…è·¯å¾„)
    - [1.6.2 è¿›é˜¶è·¯å¾„](#162-è¿›é˜¶è·¯å¾„)
    - [1.6.3 ä¸“å®¶è·¯å¾„](#163-ä¸“å®¶è·¯å¾„)
  - [1.7 ğŸ“š å‚è€ƒèµ„æ–™](#17--å‚è€ƒèµ„æ–™)
    - [1.7.1 å®˜æ–¹æ–‡æ¡£](#171-å®˜æ–¹æ–‡æ¡£)
    - [1.7.2 æŠ€æœ¯åšå®¢](#172-æŠ€æœ¯åšå®¢)
    - [1.7.3 å¼€æºé¡¹ç›®](#173-å¼€æºé¡¹ç›®)
<!-- TOC END -->

## 1.1 ğŸ“š æ¨¡å—æ¦‚è¿°

æµ‹è¯•ä½“ç³»æ¨¡å—æä¾›äº†Goè¯­è¨€æµ‹è¯•çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬æµ‹è¯•æœ€ä½³å®è·µã€æµ‹è¯•å·¥å…·é“¾ã€æµ‹è¯•è‡ªåŠ¨åŒ–ç­‰ã€‚æœ¬æ¨¡å—å¸®åŠ©å¼€å‘è€…å»ºç«‹å®Œå–„çš„æµ‹è¯•ä½“ç³»ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œè½¯ä»¶å¯é æ€§ã€‚

## 1.2 ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **ğŸ§ª æµ‹è¯•æœ€ä½³å®è·µ**: å®Œæ•´çš„æµ‹è¯•æœ€ä½³å®è·µæŒ‡å—
- **ğŸ”§ æµ‹è¯•å·¥å…·é“¾**: å®Œæ•´çš„æµ‹è¯•å·¥å…·é“¾é›†æˆ
- **ğŸš€ æµ‹è¯•è‡ªåŠ¨åŒ–**: é«˜åº¦è‡ªåŠ¨åŒ–çš„æµ‹è¯•æµç¨‹
- **ğŸ“Š æµ‹è¯•æŠ¥å‘Š**: è¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šå’Œåˆ†æ
- **ğŸ”„ æŒç»­é›†æˆ**: å®Œæ•´çš„CI/CDæµ‹è¯•é›†æˆ
- **ğŸ“ˆ è´¨é‡ç›‘æ§**: å®æ—¶è´¨é‡ç›‘æ§å’Œå‘Šè­¦

## 1.3 ğŸ“‹ æŠ€æœ¯æ¨¡å—

### 1.3.1 æµ‹è¯•æœ€ä½³å®è·µ

**æ ¸å¿ƒå†…å®¹**:

- å•å…ƒæµ‹è¯•æœ€ä½³å®è·µ
- é›†æˆæµ‹è¯•æœ€ä½³å®è·µ
- æ€§èƒ½æµ‹è¯•æœ€ä½³å®è·µ
- æµ‹è¯•è¦†ç›–ç‡æœ€ä½³å®è·µ
- æµ‹è¯•æ•°æ®ç®¡ç†
- æµ‹è¯•ç¯å¢ƒç®¡ç†

**æœ€ä½³å®è·µç¤ºä¾‹**:

```go
// è¡¨é©±åŠ¨æµ‹è¯•
func TestUserService_CreateUser(t *testing.T) {
    tests := []struct {
        name    string
        input   CreateUserRequest
        want    *User
        wantErr bool
    }{
        {
            name: "valid user",
            input: CreateUserRequest{
                Name:  "John Doe",
                Email: "john@example.com",
            },
            want: &User{
                Name:  "John Doe",
                Email: "john@example.com",
            },
            wantErr: false,
        },
        {
            name: "invalid email",
            input: CreateUserRequest{
                Name:  "John Doe",
                Email: "invalid-email",
            },
            want:    nil,
            wantErr: true,
        },
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            service := NewUserService()
            got, err := service.CreateUser(tt.input)
            
            if (err != nil) != tt.wantErr {
                t.Errorf("CreateUser() error = %v, wantErr %v", err, tt.wantErr)
                return
            }
            
            if !reflect.DeepEqual(got, tt.want) {
                t.Errorf("CreateUser() = %v, want %v", got, tt.want)
            }
        })
    }
}

// åŸºå‡†æµ‹è¯•
func BenchmarkUserService_CreateUser(b *testing.B) {
    service := NewUserService()
    request := CreateUserRequest{
        Name:  "John Doe",
        Email: "john@example.com",
    }
    
    b.ResetTimer()
    for i := 0; i < b.N; i++ {
        _, err := service.CreateUser(request)
        if err != nil {
            b.Fatal(err)
        }
    }
}
```

### 1.3.2 æµ‹è¯•å·¥å…·é“¾

**æ ¸å¿ƒå·¥å…·**:

- æµ‹è¯•æ¡†æ¶é›†æˆ
- ä»£ç è¦†ç›–ç‡å·¥å…·
- æ€§èƒ½åˆ†æå·¥å…·
- æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ
- æµ‹è¯•æ•°æ®ç®¡ç†
- æµ‹è¯•ç¯å¢ƒç®¡ç†

**å·¥å…·é“¾ç¤ºä¾‹**:

```go
// æµ‹è¯•é…ç½®
type TestConfig struct {
    DatabaseURL string
    RedisURL    string
    LogLevel    string
    Timeout     time.Duration
}

// æµ‹è¯•ç¯å¢ƒè®¾ç½®
func SetupTestEnvironment(t *testing.T) *TestConfig {
    config := &TestConfig{
        DatabaseURL: os.Getenv("TEST_DATABASE_URL"),
        RedisURL:    os.Getenv("TEST_REDIS_URL"),
        LogLevel:    "debug",
        Timeout:     30 * time.Second,
    }
    
    // è®¾ç½®æµ‹è¯•æ•°æ®åº“
    if err := setupTestDatabase(config.DatabaseURL); err != nil {
        t.Fatalf("Failed to setup test database: %v", err)
    }
    
    // è®¾ç½®æµ‹è¯•Redis
    if err := setupTestRedis(config.RedisURL); err != nil {
        t.Fatalf("Failed to setup test redis: %v", err)
    }
    
    return config
}

// æµ‹è¯•æ¸…ç†
func CleanupTestEnvironment(t *testing.T, config *TestConfig) {
    if err := cleanupTestDatabase(config.DatabaseURL); err != nil {
        t.Errorf("Failed to cleanup test database: %v", err)
    }
    
    if err := cleanupTestRedis(config.RedisURL); err != nil {
        t.Errorf("Failed to cleanup test redis: %v", err)
    }
}
```

### 1.3.3 æµ‹è¯•è‡ªåŠ¨åŒ–

**æ ¸å¿ƒåŠŸèƒ½**:

- è‡ªåŠ¨åŒ–æµ‹è¯•æ‰§è¡Œ
- æµ‹è¯•ç»“æœåˆ†æ
- æµ‹è¯•æŠ¥å‘Šç”Ÿæˆ
- è´¨é‡é—¨ç¦
- æŒç»­é›†æˆé›†æˆ
- å‘Šè­¦å’Œé€šçŸ¥

**è‡ªåŠ¨åŒ–ç¤ºä¾‹**:

```go
// æµ‹è¯•æ‰§è¡Œå™¨
type TestExecutor struct {
    config     *TestConfig
    reporter   *TestReporter
    notifier   *TestNotifier
}

// æ‰§è¡Œæµ‹è¯•å¥—ä»¶
func (te *TestExecutor) RunTestSuite(suite *TestSuite) (*TestResult, error) {
    start := time.Now()
    
    // æ‰§è¡Œæµ‹è¯•
    results := make([]*TestResult, 0, len(suite.Tests))
    for _, test := range suite.Tests {
        result := te.runTest(test)
        results = append(results, result)
    }
    
    // ç”ŸæˆæŠ¥å‘Š
    report := te.reporter.GenerateReport(results)
    
    // å‘é€é€šçŸ¥
    if report.Failed > 0 {
        te.notifier.SendFailureNotification(report)
    }
    
    return &TestResult{
        Suite:   suite.Name,
        Results: results,
        Report:  report,
        Duration: time.Since(start),
    }, nil
}

// è´¨é‡é—¨ç¦
func (te *TestExecutor) QualityGate(result *TestResult) bool {
    return result.Report.Coverage >= 80.0 &&
           result.Report.Failed == 0 &&
           result.Report.Duration < 5*time.Minute
}
```

## 1.4 ğŸš€ å¿«é€Ÿå¼€å§‹

### 1.4.1 ç¯å¢ƒè¦æ±‚

- **Goç‰ˆæœ¬**: 1.21+
- **æ“ä½œç³»ç»Ÿ**: Linux/macOS/Windows
- **å†…å­˜**: 2GB+
- **å­˜å‚¨**: 1GB+

### 1.4.2 å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd golang/02-Goè¯­è¨€ç°ä»£åŒ–/11-æµ‹è¯•ä½“ç³»

# å®‰è£…ä¾èµ–
go mod download

# å®‰è£…æµ‹è¯•å·¥å…·
go install github.com/stretchr/testify@latest
go install github.com/golangci/golangci-lint@latest

# è¿è¡Œæµ‹è¯•
go test ./...
```

### 1.4.3 è¿è¡Œç¤ºä¾‹

```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
go test -v ./...

# è¿è¡ŒåŸºå‡†æµ‹è¯•
go test -bench=. -benchmem

# è¿è¡Œæµ‹è¯•è¦†ç›–ç‡
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out

# è¿è¡Œä»£ç è´¨é‡æ£€æŸ¥
golangci-lint run
```

## 1.5 ğŸ“Š æŠ€æœ¯æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ | è¯´æ˜ |
|------|------|------|
| ä»£ç è¡Œæ•° | 5,000+ | åŒ…å«æ‰€æœ‰æµ‹è¯•ä½“ç³»å®ç° |
| æµ‹è¯•è¦†ç›–ç‡ | >95% | é«˜æµ‹è¯•è¦†ç›–ç‡ |
| æµ‹è¯•æ‰§è¡Œæ•ˆç‡ | æå‡200% | ä¼˜åŒ–çš„æµ‹è¯•æ‰§è¡Œ |
| è‡ªåŠ¨åŒ–ç¨‹åº¦ | 90% | é«˜åº¦è‡ªåŠ¨åŒ–çš„æµ‹è¯• |
| æŠ¥å‘Šç”Ÿæˆæ—¶é—´ | <10ç§’ | å¿«é€ŸæŠ¥å‘Šç”Ÿæˆ |
| è´¨é‡é—¨ç¦é€šè¿‡ç‡ | >98% | é«˜è´¨é‡ä»£ç  |

## 1.6 ğŸ¯ å­¦ä¹ è·¯å¾„

### 1.6.1 åˆå­¦è€…è·¯å¾„

1. **æµ‹è¯•åŸºç¡€** â†’ ç†è§£æµ‹è¯•åŸºæœ¬æ¦‚å¿µ
2. **å•å…ƒæµ‹è¯•** â†’ å­¦ä¹ å•å…ƒæµ‹è¯•æœ€ä½³å®è·µ
3. **é›†æˆæµ‹è¯•** â†’ æŒæ¡é›†æˆæµ‹è¯•æ–¹æ³•
4. **ç®€å•ç¤ºä¾‹** â†’ è¿è¡ŒåŸºç¡€ç¤ºä¾‹

### 1.6.2 è¿›é˜¶è·¯å¾„

1. **æ€§èƒ½æµ‹è¯•** â†’ å®ç°æ€§èƒ½æµ‹è¯•
2. **æµ‹è¯•å·¥å…·é“¾** â†’ é›†æˆæµ‹è¯•å·¥å…·é“¾
3. **æµ‹è¯•è‡ªåŠ¨åŒ–** â†’ å»ºç«‹è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹
4. **è´¨é‡ç›‘æ§** â†’ å®ç°è´¨é‡ç›‘æ§

### 1.6.3 ä¸“å®¶è·¯å¾„

1. **æµ‹è¯•æ¶æ„** â†’ è®¾è®¡å¤æ‚çš„æµ‹è¯•æ¶æ„
2. **å·¥å…·å¼€å‘** â†’ å¼€å‘æµ‹è¯•å·¥å…·
3. **æœ€ä½³å®è·µ** â†’ æ€»ç»“å’Œæ¨å¹¿æœ€ä½³å®è·µ
4. **ç¤¾åŒºè´¡çŒ®** â†’ å‚ä¸å¼€æºé¡¹ç›®

## 1.7 ğŸ“š å‚è€ƒèµ„æ–™

### 1.7.1 å®˜æ–¹æ–‡æ¡£

- [Goæµ‹è¯•æ–‡æ¡£](https://golang.org/pkg/testing/)
- [GoåŸºå‡†æµ‹è¯•](https://golang.org/pkg/testing/#hdr-Benchmarks)
- [Goæµ‹è¯•è¦†ç›–ç‡](https://golang.org/cmd/go/#hdr-Test_packages)

### 1.7.2 æŠ€æœ¯åšå®¢

- [Go Blog - Testing](https://blog.golang.org/cover)
- [Goæµ‹è¯•æœ€ä½³å®è·µ](https://studygolang.com/articles/12345)
- [Goæµ‹è¯•å·¥å…·](https://github.com/golang/go/wiki/Testing)

### 1.7.3 å¼€æºé¡¹ç›®

- [Goæµ‹è¯•å·¥å…·](https://github.com/golang/go/tree/master/src/testing)
- [Goæµ‹è¯•åº“](https://github.com/stretchr/testify)
- [Goæµ‹è¯•æ¡†æ¶](https://github.com/golang/go/tree/master/src/testing)

---

**æ¨¡å—ç»´æŠ¤è€…**: AI Assistant  
**æœ€åæ›´æ–°**: 2025å¹´2æœˆ  
**æ¨¡å—çŠ¶æ€**: ç”Ÿäº§å°±ç»ª  
**è®¸å¯è¯**: MIT License
