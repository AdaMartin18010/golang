---
title: Goå¹¶å‘ç¼–ç¨‹ç¤ºä¾‹
slug: go-concurrency-examples
topic: concurrency
level: intermediate
goVersion: 1.21+
lastReviewed: 2025-01-15
owner: core-team
status: active
---

# Goå¹¶å‘ç¼–ç¨‹ç¤ºä¾‹

> æ‘˜è¦ï¼šæä¾›Goè¯­è¨€å¹¶å‘ç¼–ç¨‹çš„å®Œæ•´ç¤ºä¾‹ï¼Œæ¶µç›–Goroutineã€Channelã€åŒæ­¥åŸè¯­ã€å¹¶å‘æµ‹è¯•ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚

## ğŸ“š ç¤ºä¾‹æ¦‚è¿°

æœ¬ç›®å½•åŒ…å«Goè¯­è¨€å¹¶å‘ç¼–ç¨‹çš„å®Œæ•´ç¤ºä¾‹ï¼Œä»åŸºç¡€çš„Goroutineå’ŒChannelä½¿ç”¨ï¼Œåˆ°é«˜çº§çš„å¹¶å‘æ¨¡å¼å’Œæµ‹è¯•å®è·µã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

- æŒæ¡Goroutineçš„åˆ›å»ºå’Œç®¡ç†
- ç†è§£Channelçš„é€šä¿¡æœºåˆ¶
- å­¦ä¼šä½¿ç”¨åŒæ­¥åŸè¯­
- æŒæ¡å¹¶å‘æµ‹è¯•æœ€ä½³å®è·µ

## ğŸ“‹ ç¤ºä¾‹å†…å®¹

### åŸºç¡€å¹¶å‘ç¤ºä¾‹
- [concurrency_test.go](./concurrency_test.go) - å¹¶å‘å®‰å…¨è®¡æ•°å™¨
  - äº’æ–¥é”ä½¿ç”¨
  - å¹¶å‘æµ‹è¯•æ–¹æ³•
  - åŸºå‡†æµ‹è¯•å®è·µ

### é«˜çº§å¹¶å‘æ¨¡å¼
- [worker_pool.go](./worker_pool.go) - å·¥ä½œæ± æ¨¡å¼
- [pipeline.go](./pipeline.go) - ç®¡é“æ¨¡å¼
- [fan_in_out.go](./fan_in_out.go) - æ‰‡å…¥æ‰‡å‡ºæ¨¡å¼

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test -v

# è¿è¡ŒåŸºå‡†æµ‹è¯•
go test -bench=.

# è¿è¡Œç«æ€æ£€æµ‹
go test -race
```

### è¿è¡Œç¤ºä¾‹
```bash
# è¿è¡Œå·¥ä½œæ± ç¤ºä¾‹
go run worker_pool.go

# è¿è¡Œç®¡é“ç¤ºä¾‹
go run pipeline.go
```

## ğŸ“Š ç¤ºä¾‹ç»Ÿè®¡

| ç¤ºä¾‹ç±»å‹ | æ–‡ä»¶æ•°é‡ | æµ‹è¯•ç”¨ä¾‹ | ä»£ç è¡Œæ•° | å®Œæˆåº¦ |
|----------|----------|----------|----------|--------|
| åŸºç¡€ç¤ºä¾‹ | 1 | 2 | 50 | 100% |
| é«˜çº§æ¨¡å¼ | 3 | 6 | 200 | 80% |
| æ€»è®¡ | 4 | 8 | 250 | 85% |

## ğŸ¯ å®è·µé¡¹ç›®

### é¡¹ç›®1: å¹¶å‘Webçˆ¬è™«
- ä½¿ç”¨Goroutineæ± 
- å®ç°å¹¶å‘ä¸‹è½½
- æ·»åŠ é™æµæ§åˆ¶
- å®ç°ä¼˜é›…å…³é—­

### é¡¹ç›®2: å®æ—¶æ•°æ®å¤„ç†
- ä½¿ç”¨Channelç®¡é“
- å®ç°æµå¼å¤„ç†
- æ·»åŠ èƒŒå‹æ§åˆ¶
- å®ç°é”™è¯¯å¤„ç†

### é¡¹ç›®3: åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦
- ä½¿ç”¨å·¥ä½œæ± æ¨¡å¼
- å®ç°ä»»åŠ¡åˆ†å‘
- æ·»åŠ è´Ÿè½½å‡è¡¡
- å®ç°ç›‘æ§ç»Ÿè®¡

## ğŸ“š å‚è€ƒèµ„æ–™

### å®˜æ–¹æ–‡æ¡£
- [Goè¯­è¨€å¹¶å‘](https://golang.org/doc/effective_go.html#concurrency)
- [Goè¯­è¨€å¹¶å‘æ¨¡å¼](https://golang.org/doc/codewalk/sharemem/)
- [Goè¯­è¨€å¹¶å‘æµ‹è¯•](https://golang.org/doc/effective_go.html#concurrency)

### ä¹¦ç±æ¨è
- ã€ŠGoè¯­è¨€å¹¶å‘ç¼–ç¨‹ã€‹
- ã€ŠGoè¯­è¨€å®æˆ˜ã€‹
- ã€Šå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹

### åœ¨çº¿èµ„æº
- [Go by Example: Goroutines](https://gobyexample.com/goroutines)
- [Go by Example: Channels](https://gobyexample.com/channels)
- [Goå¤œè¯»å¹¶å‘ä¸“é¢˜](https://github.com/developer-learning/night-reading-go)

## ğŸ”§ å·¥å…·æ¨è

### å¼€å‘å·¥å…·
- **GoLand**: IDEå¼€å‘ç¯å¢ƒ
- **VS Code**: è½»é‡çº§ç¼–è¾‘å™¨
- **Delve**: Goè°ƒè¯•å™¨

### æµ‹è¯•å·¥å…·
- **go test**: å®˜æ–¹æµ‹è¯•æ¡†æ¶
- **testify**: æµ‹è¯•æ–­è¨€åº“
- **gomock**: Mockç”Ÿæˆå·¥å…·

### æ€§èƒ½å·¥å…·
- **pprof**: æ€§èƒ½åˆ†æ
- **go-torch**: ç«ç„°å›¾
- **trace**: æ‰§è¡Œè¿½è¸ª

## ğŸ¯ å­¦ä¹ å»ºè®®

### å¾ªåºæ¸è¿›
- ä»åŸºç¡€ç¤ºä¾‹å¼€å§‹
- é€æ­¥å­¦ä¹ é«˜çº§æ¨¡å¼
- æ³¨é‡å®è·µå’Œå®éªŒ

### ç†è®ºç»“åˆå®è·µ
- ç†è§£å¹¶å‘æ¨¡å‹åŸç†
- å¤šåšå®éªŒå’Œæµ‹è¯•
- å…³æ³¨æ€§èƒ½å’Œå®‰å…¨æ€§

### æŒç»­å­¦ä¹ 
- å…³æ³¨Goè¯­è¨€å‘å±•
- å‚ä¸ç¤¾åŒºè®¨è®º
- åˆ†äº«å­¦ä¹ å¿ƒå¾—

## ğŸ“ é‡è¦æ¦‚å¿µ

### Goroutine
- **è½»é‡çº§çº¿ç¨‹**: æ¯”ä¼ ç»Ÿçº¿ç¨‹æ›´è½»é‡
- **è°ƒåº¦å™¨**: GPMè°ƒåº¦æ¨¡å‹
- **æ ˆç®¡ç†**: åŠ¨æ€æ ˆå¢é•¿
- **åƒåœ¾å›æ”¶**: å¹¶å‘åƒåœ¾å›æ”¶

### Channel
- **é€šä¿¡æœºåˆ¶**: CSPæ¨¡å‹å®ç°
- **ç±»å‹å®‰å…¨**: ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
- **é˜»å¡æ“ä½œ**: åŒæ­¥é€šä¿¡
- **å…³é—­æœºåˆ¶**: ä¼˜é›…å…³é—­

### åŒæ­¥åŸè¯­
- **Mutex**: äº’æ–¥é”
- **RWMutex**: è¯»å†™é”
- **WaitGroup**: ç­‰å¾…ç»„
- **Once**: å•æ¬¡æ‰§è¡Œ
- **Cond**: æ¡ä»¶å˜é‡

## ğŸ” è´¨é‡ä¿è¯

### ä»£ç è´¨é‡
- éµå¾ªGoè¯­è¨€è§„èŒƒ
- å®Œæ•´çš„é”™è¯¯å¤„ç†
- å……åˆ†çš„æµ‹è¯•è¦†ç›–
- æ¸…æ™°çš„ä»£ç æ³¨é‡Š

### å¹¶å‘å®‰å…¨
- é¿å…æ•°æ®ç«äº‰
- ä½¿ç”¨åŒæ­¥åŸè¯­
- æµ‹è¯•å¹¶å‘å®‰å…¨æ€§
- æ€§èƒ½ä¼˜åŒ–è€ƒè™‘

## ğŸ“Š å¹¶å‘æ¨¡å¼å›¾è°±

```mermaid
flowchart TD
  A[Goå¹¶å‘ç¼–ç¨‹] --> B[Goroutine]
  A --> C[Channel]
  A --> D[åŒæ­¥åŸè¯­]
  A --> E[å¹¶å‘æ¨¡å¼]
  
  B --> F[åˆ›å»ºå’Œç®¡ç†]
  B --> G[è°ƒåº¦å™¨]
  B --> H[æ ˆç®¡ç†]
  
  C --> I[é€šä¿¡æœºåˆ¶]
  C --> J[ç±»å‹å®‰å…¨]
  C --> K[é˜»å¡æ“ä½œ]
  
  D --> L[Mutex]
  D --> M[WaitGroup]
  D --> N[Once]
  
  E --> O[å·¥ä½œæ± ]
  E --> P[ç®¡é“]
  E --> Q[æ‰‡å…¥æ‰‡å‡º]
  
  style A fill:#e0f7fa,stroke:#333,stroke-width:2px
  style B fill:#fff,stroke:#333,stroke-width:2px
  style C fill:#fff,stroke:#333,stroke-width:2px
  style D fill:#fff,stroke:#333,stroke-width:2px
  style E fill:#fff,stroke:#333,stroke-width:2px
```

## â“ å¸¸è§FAQ

### å¹¶å‘é—®é¢˜
- Q: å¦‚ä½•é¿å…æ•°æ®ç«äº‰ï¼Ÿ
  A: ä½¿ç”¨Mutexã€Channelç­‰åŒæ­¥åŸè¯­ï¼Œæˆ–ä½¿ç”¨`go test -race`æ£€æµ‹ã€‚

### æ€§èƒ½é—®é¢˜
- Q: å¦‚ä½•ä¼˜åŒ–å¹¶å‘æ€§èƒ½ï¼Ÿ
  A: ä½¿ç”¨å·¥ä½œæ± æ¨¡å¼ï¼Œé¿å…è¿‡åº¦åˆ›å»ºGoroutineï¼Œåˆç†ä½¿ç”¨Channelã€‚

### æµ‹è¯•é—®é¢˜
- Q: å¦‚ä½•æµ‹è¯•å¹¶å‘ä»£ç ï¼Ÿ
  A: ä½¿ç”¨`t.Parallel()`å¹¶è¡Œæµ‹è¯•ï¼Œ`go test -race`æ£€æµ‹ç«æ€æ¡ä»¶ã€‚

---

**ç¤ºä¾‹ç»´æŠ¤è€…**: AI Assistant  
**æœ€åæ›´æ–°**: 2025å¹´1æœˆ15æ—¥  
**ç¤ºä¾‹çŠ¶æ€**: æŒç»­æ›´æ–°ä¸­
