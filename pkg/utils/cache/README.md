# ç¼“å­˜å·¥å…·

**ç‰ˆæœ¬**: v1.0
**æ›´æ–°æ—¥æœŸ**: 2025-11-11
**é€‚ç”¨äºŽ**: Go 1.25.3

---

## ðŸ“‹ ç›®å½•

- [ç¼“å­˜å·¥å…·](#ç¼“å­˜å·¥å…·)
  - [ðŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. æ¦‚è¿°](#1-æ¦‚è¿°)
  - [2. åŠŸèƒ½ç‰¹æ€§](#2-åŠŸèƒ½ç‰¹æ€§)
    - [2.1 åŸºæœ¬æ“ä½œ](#21-åŸºæœ¬æ“ä½œ)
    - [2.2 è¿‡æœŸæœºåˆ¶](#22-è¿‡æœŸæœºåˆ¶)
  - [3. ä½¿ç”¨ç¤ºä¾‹](#3-ä½¿ç”¨ç¤ºä¾‹)
    - [3.1 åŸºæœ¬ä½¿ç”¨](#31-åŸºæœ¬ä½¿ç”¨)
    - [3.2 GetOrSetæ¨¡å¼](#32-getorsetæ¨¡å¼)
    - [3.3 åˆ é™¤å’Œæ¸…ç©º](#33-åˆ é™¤å’Œæ¸…ç©º)
  - [4. æœ€ä½³å®žè·µ](#4-æœ€ä½³å®žè·µ)
    - [4.1 è®¾ç½®åˆç†çš„TTL](#41-è®¾ç½®åˆç†çš„ttl)
    - [4.2 ä½¿ç”¨GetOrSetæ¨¡å¼](#42-ä½¿ç”¨getorsetæ¨¡å¼)
    - [4.3 ç›‘æŽ§ç¼“å­˜å¤§å°](#43-ç›‘æŽ§ç¼“å­˜å¤§å°)

---

## 1. æ¦‚è¿°

ç¼“å­˜å·¥å…·æä¾›äº†ç®€å•æ˜“ç”¨çš„å†…å­˜ç¼“å­˜å®žçŽ°ï¼š

- âœ… **å†…å­˜ç¼“å­˜**: åŸºäºŽå†…å­˜çš„ç¼“å­˜å®žçŽ°
- âœ… **TTLæ”¯æŒ**: æ”¯æŒè¿‡æœŸæ—¶é—´è®¾ç½®
- âœ… **è‡ªåŠ¨æ¸…ç†**: è‡ªåŠ¨æ¸…ç†è¿‡æœŸé¡¹
- âœ… **çº¿ç¨‹å®‰å…¨**: æ”¯æŒå¹¶å‘è®¿é—®
- âœ… **GetOrSetæ¨¡å¼**: èŽ·å–æˆ–è®¾ç½®ç¼“å­˜

---

## 2. åŠŸèƒ½ç‰¹æ€§

### 2.1 åŸºæœ¬æ“ä½œ

- `Get`: èŽ·å–ç¼“å­˜å€¼
- `Set`: è®¾ç½®ç¼“å­˜å€¼
- `Delete`: åˆ é™¤ç¼“å­˜é¡¹
- `Clear`: æ¸…ç©ºæ‰€æœ‰ç¼“å­˜
- `Size`: èŽ·å–ç¼“å­˜å¤§å°

### 2.2 è¿‡æœŸæœºåˆ¶

- æ”¯æŒTTLï¼ˆTime To Liveï¼‰
- è‡ªåŠ¨æ¸…ç†è¿‡æœŸé¡¹
- å®šæœŸæ¸…ç†æœºåˆ¶

---

## 3. ä½¿ç”¨ç¤ºä¾‹

### 3.1 åŸºæœ¬ä½¿ç”¨

```go
import (
    "context"
    "github.com/yourusername/golang/pkg/utils/cache"
)

cache := cache.NewMemoryCache()
ctx := context.Background()

// è®¾ç½®ç¼“å­˜
cache.Set(ctx, "key1", "value1", 5*time.Minute)

// èŽ·å–ç¼“å­˜
value, ok := cache.Get(ctx, "key1")
if ok {
    fmt.Println(value)
}
```

### 3.2 GetOrSetæ¨¡å¼

```go
value, err := cache.GetOrSet(ctx, cache, "key1", 5*time.Minute, func() (interface{}, error) {
    // å¦‚æžœç¼“å­˜ä¸å­˜åœ¨ï¼Œæ‰§è¡Œæ­¤å‡½æ•°
    return expensiveOperation(), nil
})
```

### 3.3 åˆ é™¤å’Œæ¸…ç©º

```go
// åˆ é™¤å•ä¸ªé¡¹
cache.Delete(ctx, "key1")

// æ¸…ç©ºæ‰€æœ‰ç¼“å­˜
cache.Clear(ctx)
```

---

## 4. æœ€ä½³å®žè·µ

### 4.1 è®¾ç½®åˆç†çš„TTL

- çƒ­ç‚¹æ•°æ®: 5-15åˆ†é’Ÿ
- æ™®é€šæ•°æ®: 1-5åˆ†é’Ÿ
- å†·æ•°æ®: 30ç§’-1åˆ†é’Ÿ

### 4.2 ä½¿ç”¨GetOrSetæ¨¡å¼

é¿å…ç¼“å­˜ç©¿é€ï¼Œåœ¨ç¼“å­˜æœªå‘½ä¸­æ—¶è‡ªåŠ¨å¡«å……ï¼š

```go
result, err := cache.GetOrSet(ctx, cache, key, ttl, func() (interface{}, error) {
    return fetchFromDatabase()
})
```

### 4.3 ç›‘æŽ§ç¼“å­˜å¤§å°

å®šæœŸæ£€æŸ¥ç¼“å­˜å¤§å°ï¼Œé¿å…å†…å­˜æº¢å‡ºï¼š

```go
if cache.Size() > maxSize {
    cache.Clear(ctx)
}
```

---

**æ›´æ–°æ—¥æœŸ**: 2025-11-11
