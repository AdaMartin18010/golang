# 工具模块

**版本**: v1.0
**更新日期**: 2025-11-11
**适用于**: Go 1.25.3

---

## 📋 目录

- [工具模块](#工具模块)
  - [📋 目录](#-目录)
  - [1. 概述](#1-概述)
  - [2. 模块列表](#2-模块列表)
  - [3. 快速开始](#3-快速开始)

---

## 1. 概述

工具模块提供了各种实用的工具和辅助功能，帮助简化开发工作：

- ✅ **重试工具**: 灵活的重试机制，支持多种重试策略
- ✅ **缓存工具**: 内存缓存实现，支持TTL和自动清理
- ✅ **字符串工具**: 丰富的字符串操作函数
- ✅ **时间工具**: 丰富的时间操作函数
- ✅ **ID生成工具**: 多种ID生成策略
- ✅ **加密工具**: 密码哈希、AES加密、密钥生成
- ✅ **JSON工具**: 丰富的JSON操作函数
- ✅ **HTTP客户端工具**: 简单易用的HTTP客户端
- ✅ **文件操作工具**: 丰富的文件系统操作函数
- ✅ **配置管理工具**: 灵活的配置加载机制
- ✅ **URL工具**: 丰富的URL操作函数
- ✅ **验证工具**: 丰富的数据验证函数
- ✅ **集合工具**: 丰富的切片和映射操作函数
- ✅ **编码工具**: Base64、十六进制、JSON等编码解码功能
- ✅ **随机数工具**: 随机数生成、随机字符串、随机选择等功能
- ✅ **环境变量工具**: 环境变量的读取、设置、验证和管理
- ✅ **反射工具**: 类型检查、方法调用、字段访问等反射操作
- ✅ **并发工具**: goroutine池、worker池、信号量、互斥锁等并发控制
- ✅ **压缩工具**: gzip、zlib等压缩解压功能
- ✅ **哈希工具**: MD5、SHA、CRC、FNV等哈希算法
- ✅ **正则表达式工具**: 字符串匹配、查找、替换、分割等正则操作
- ✅ **模板工具**: text/template和html/template的便捷封装
- ✅ **上下文工具**: context包的便捷封装
- ✅ **信号处理工具**: 信号捕获和处理，优雅关闭支持
- ✅ **类型转换工具**: 各种类型之间的便捷转换
- 🔄 **更多工具**: 持续扩展中...

---

## 2. 模块列表

### 2.1 重试工具 (`retry`)

提供灵活的重试机制，支持多种重试策略。

**功能特性**:
- 指数退避策略
- 线性退避策略
- 固定延迟策略
- Context支持
- 回调支持

**文档**: [重试工具文档](./retry/README.md)

### 2.2 缓存工具 (`cache`)

提供内存缓存实现，支持TTL和自动清理。

**功能特性**:
- 内存缓存实现
- TTL支持
- 自动清理过期项
- 线程安全
- GetOrSet模式

**文档**: [缓存工具文档](./cache/README.md)

### 2.3 字符串工具 (`strings`)

提供丰富的字符串操作函数，简化常见的字符串处理任务。

**功能特性**:
- 基础操作（截断、反转、填充等）
- 包含检查
- 命名转换（驼峰/蛇形）
- 掩码处理（邮箱、手机号等）
- 随机生成

**文档**: [字符串工具文档](./strings/README.md)

### 2.4 时间工具 (`time`)

提供丰富的时间操作函数，简化常见的时间处理任务。

**功能特性**:
- 时间戳获取（秒、毫秒、微秒、纳秒）
- 时间格式化和解析
- 时间计算（添加天数、月数、年数）
- 时间范围（开始/结束时间）
- 时间比较和判断
- 人性化显示

**文档**: [时间工具文档](./time/README.md)

### 2.5 ID生成工具 (`id`)

提供多种ID生成策略，满足不同场景的需求。

**功能特性**:
- UUID生成（标准UUID、短UUID）
- NanoID生成（高性能短ID）
- 雪花ID生成（分布式唯一ID）
- 时间戳ID生成
- 随机ID生成（十六进制、Base64）
- 顺序ID生成

**文档**: [ID生成工具文档](./id/README.md)

### 2.6 加密工具 (`crypto`)

提供常用的加密和哈希功能。

**功能特性**:
- 密码哈希（bcrypt）
- AES加密（AES-256-GCM）
- 密钥生成
- 哈希函数（SHA256）
- HMAC计算
- 密钥派生（PBKDF2）

**文档**: [加密工具文档](./crypto/README.md)

### 2.7 JSON工具 (`json`)

提供丰富的JSON操作函数，简化常见的JSON处理任务。

**功能特性**:
- 基础操作（序列化、反序列化、美化打印）
- 验证和检查
- 路径操作（Get、Set）
- 合并和转换
- 扁平化操作
- 文件操作
- 流操作

**文档**: [JSON工具文档](./json/README.md)

### 2.8 HTTP客户端工具 (`httpclient`)

提供简单易用的HTTP客户端，简化HTTP请求的发送和处理。

**功能特性**:
- GET、POST、PUT、DELETE、PATCH请求支持
- 请求参数和查询参数支持
- 请求头管理
- 超时控制
- Context支持
- JSON响应解析

**文档**: [HTTP客户端工具文档](./httpclient/README.md)

### 2.9 文件操作工具 (`file`)

提供丰富的文件系统操作函数，简化常见的文件处理任务。

**功能特性**:
- 文件检查（存在、类型判断）
- 文件读写（读取、写入、追加、行操作）
- 文件操作（复制、移动、删除）
- 目录操作（创建、列出、遍历）
- 路径操作（扩展名、文件名、路径连接等）
- 文件信息（大小、权限等）

**文档**: [文件操作工具文档](./file/README.md)

### 2.10 配置管理工具 (`config`)

提供灵活的配置加载机制，支持从多种源加载配置。

**功能特性**:
- 文件配置加载（JSON）
- 环境变量配置加载
- Map配置加载
- 多源配置合并

**文档**: [配置管理工具文档](./config/README.md)

### 2.11 URL工具 (`url`)

提供丰富的URL操作函数，简化常见的URL处理任务。

**功能特性**:
- URL解析和构建
- 查询参数操作
- URL组件操作
- URL验证和转换
- URL编码
- URL安全（掩码）

**文档**: [URL工具文档](./url/README.md)

### 2.12 验证工具 (`validator`)

提供丰富的数据验证函数，简化常见的数据验证任务。

**功能特性**:
- 格式验证（邮箱、手机号、身份证、URL、IP、UUID等）
- 字符串验证（空值、数字、字母等）
- 长度验证
- 集合验证
- 数值验证
- 密码验证
- 日期时间验证

**文档**: [验证工具文档](./validator/README.md)

### 2.13 集合工具 (`collection`)

提供丰富的切片（slice）和映射（map）操作函数，简化常见的数据集合处理任务。

**功能特性**:
- 切片查找和操作
- 切片转换（Filter、Map、Reduce等）
- 切片排序
- 切片访问（First、Last、Take、Drop等）
- 切片分组和分区
- 切片统计（Count、Sum、Max、Min等）
- 切片集合运算（Intersect、Union、Difference等）
- 映射操作（Keys、Values、Filter等）

**文档**: [集合工具文档](./collection/README.md)

### 2.14 编码工具 (`encoding`)

提供丰富的编码解码函数，支持Base64、十六进制、JSON等常见编码格式，以及类型转换功能。

**功能特性**:
- Base64编码（标准、URL安全、原始格式）
- 十六进制编码
- 类型转换（字符串、整数、浮点数、布尔值等）
- JSON编码解码
- 字符串转义（HTML实体、URL）

**文档**: [编码工具文档](./encoding/README.md)

### 2.15 随机数工具 (`random`)

提供丰富的随机数生成函数，支持整数、浮点数、字符串、字节数组等类型的随机生成，以及随机选择、打乱、加权选择等功能。

**功能特性**:
- 随机数生成（整数、浮点数、布尔值）
- 随机字符串生成（字母、数字、十六进制、UUID等）
- 随机字节数组生成
- 加密安全随机数生成
- 随机选择（单个、多个、加权选择）
- 随机操作（打乱、时间间隔、时间）

**文档**: [随机数工具文档](./random/README.md)

### 2.16 环境变量工具 (`env`)

提供丰富的环境变量操作函数，简化环境变量的读取、设置、验证和管理任务。

**功能特性**:
- 环境变量读取（字符串、整数、浮点数、布尔值、切片等）
- 环境变量操作（设置、删除、检查、获取所有等）
- 环境变量展开（支持 ${VAR} 或 $VAR 格式）
- 环境变量加载（从文件加载.env格式）
- 环境变量验证（验证必需的环境变量）
- 环境变量工具（过滤、合并等）

**文档**: [环境变量工具文档](./env/README.md)

### 2.17 反射工具 (`reflect`)

提供丰富的反射操作函数，简化类型检查、方法调用、字段访问等反射相关任务。

**功能特性**:
- 类型检查（nil、零值、指针、切片、映射、结构体等）
- 指针操作（解引用）
- 结构体操作（字段访问、设置、标签等）
- 方法操作（调用、检查、获取方法名）
- 实例创建（新实例、切片、映射）
- 类型转换（转换、赋值检查、可转换性检查）
- 值比较和复制（深度比较、深度复制）
- 切片和映射操作（元素访问、设置）
- 长度和容量（获取长度、容量）

**文档**: [反射工具文档](./reflect/README.md)

### 2.18 并发工具 (`concurrency`)

提供丰富的并发控制原语，包括goroutine池、worker池、信号量、互斥锁、屏障等，简化并发编程任务。

**功能特性**:
- Goroutine池（管理固定数量的goroutine）
- Worker池（处理任务并返回结果）
- 信号量（控制并发数量）
- 互斥锁（带超时）
- Once（只执行一次，带错误处理）
- 屏障（同步多个goroutine）
- 等待组（带超时）

**文档**: [并发工具文档](./concurrency/README.md)

### 2.19 压缩工具 (`compress`)

提供丰富的压缩解压函数，支持gzip、zlib等常见压缩格式，简化数据压缩和解压任务。

**功能特性**:
- Gzip压缩（多种压缩级别）
- Zlib压缩
- 流式压缩
- 压缩统计（压缩率、节省空间）

**文档**: [压缩工具文档](./compress/README.md)

### 2.20 哈希工具 (`hash`)

提供丰富的哈希算法函数，支持MD5、SHA1、SHA256、SHA512、CRC32、CRC64、FNV等常见哈希算法，简化数据哈希和校验任务。

**功能特性**:
- MD5哈希
- SHA系列哈希（SHA1、SHA256、SHA512）
- CRC校验和（CRC32、CRC64）
- FNV哈希（FNV32、FNV64、FNV128）
- 通用哈希函数
- 哈希验证

**文档**: [哈希工具文档](./hash/README.md)

### 2.21 正则表达式工具 (`regex`)

提供丰富的正则表达式操作函数，简化字符串匹配、查找、替换、分割等常见任务。

**功能特性**:
- 匹配操作（检查是否匹配）
- 查找操作（查找、提取匹配的子串和子组）
- 替换操作（替换、移除匹配的子串）
- 分割操作（使用正则表达式分割字符串）
- 统计操作（统计匹配数量）
- 位置操作（获取匹配位置）
- 工具函数（验证、转义、编译等）
- 常用模式（邮箱、手机号、URL等预定义模式）
- 快捷匹配函数（常用格式的快捷检查）

**文档**: [正则表达式工具文档](./regex/README.md)

### 2.22 模板工具 (`template`)

提供text/template和html/template的便捷封装，简化模板解析、执行和管理任务。

**功能特性**:
- 文本模板（解析、执行、自定义函数）
- HTML模板（解析、执行、自定义函数）
- 快捷渲染函数
- 模板验证
- 常用函数映射（数学、字符串、逻辑等）

**文档**: [模板工具文档](./template/README.md)

### 2.23 上下文工具 (`context`)

提供context包的便捷封装，简化context的创建、管理和使用任务。

**功能特性**:
- Context创建（超时、截止时间、取消、值）
- Context检查（是否完成、错误、截止时间）
- Context值操作（获取、设置各种类型的值）
- Context等待（等待完成、超时等待、可取消睡眠）
- Context执行（带超时/截止时间/取消的执行）
- Context合并（合并多个context）
- 常用键（TraceID、SpanID、UserID等）
- Context构建器（链式设置多个值）

**文档**: [上下文工具文档](./context/README.md)

### 2.24 信号处理工具 (`signal`)

提供信号捕获和处理的便捷封装，简化信号处理任务，特别适用于优雅关闭等场景。

**功能特性**:
- 信号通知（注册各种信号通知）
- 信号处理（处理各种信号）
- 信号等待（等待信号，支持context）
- 优雅关闭（优雅关闭处理器）
- 信号操作（忽略、重置、发送信号）
- 信号检查（检查信号类型、获取信号名称）
- Context集成（带信号取消的context）

**文档**: [信号处理工具文档](./signal/README.md)

---

## 3. 快速开始

### 3.1 使用重试工具

```go
import "github.com/yourusername/golang/pkg/utils/retry"

strategy := retry.DefaultExponentialBackoff()
err := retry.Retry(ctx, strategy, func(ctx context.Context) error {
    return someOperation()
})
```

### 3.2 使用缓存工具

```go
import "github.com/yourusername/golang/pkg/utils/cache"

c := cache.NewMemoryCache()
c.Set(ctx, "key", "value", 5*time.Minute)
value, ok := c.Get(ctx, "key")
```

---

**更新日期**: 2025-11-11
