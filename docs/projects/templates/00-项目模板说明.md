# Goé¡¹ç›®æ¨¡æ¿è¯´æ˜

> **ç®€ä»‹**: Goé¡¹ç›®æ¨¡æ¿å®Œæ•´æŒ‡å—ï¼ŒåŒ…æ‹¬æ ‡å‡†é¡¹ç›®ç»“æ„ã€æ¨¡æ¿é€‰æ‹©å’Œæœ€ä½³å®è·µ

> **ç‰ˆæœ¬**: Go 1.25.3  
> **éš¾åº¦**: â­â­â­  
> **æ ‡ç­¾**: #é¡¹ç›®ç»“æ„ #æ¨¡æ¿ #æœ€ä½³å®è·µ

---

## ğŸ“‹ ç›®å½•


- [1. æ ‡å‡†é¡¹ç›®å¸ƒå±€](#1-æ ‡å‡†é¡¹ç›®å¸ƒå±€)
  - [åŸºç¡€é¡¹ç›®ç»“æ„](#åŸºç¡€é¡¹ç›®ç»“æ„)
- [2. é¡¹ç›®ç±»å‹](#2-é¡¹ç›®ç±»å‹)
  - [ç±»å‹1: CLIå·¥å…·](#ç±»å‹1-cliå·¥å…·)
  - [ç±»å‹2: Web APIæœåŠ¡](#ç±»å‹2-web-apiæœåŠ¡)
  - [ç±»å‹3: å¾®æœåŠ¡](#ç±»å‹3-å¾®æœåŠ¡)
  - [ç±»å‹4: åº“é¡¹ç›®](#ç±»å‹4-åº“é¡¹ç›®)
- [3. ç›®å½•è¯´æ˜](#3-ç›®å½•è¯´æ˜)
  - [/cmd](#cmd)
  - [/internal](#internal)
  - [/pkg](#pkg)
  - [/api](#api)
  - [/configs](#configs)
  - [/scripts](#scripts)
  - [/test](#test)
- [4. é…ç½®æ–‡ä»¶](#4-é…ç½®æ–‡ä»¶)
  - [go.mod](#gomod)
  - [Makefile](#makefile)
  - [.gitignore](#gitignore)
  - [README.mdæ¨¡æ¿](#readmemdæ¨¡æ¿)
- [Features](#features)
- [Installation](#installation)
- [Usage](#usage)
- [Configuration](#configuration)
- [Development](#development)
- [License](#license)
- [5. æœ€ä½³å®è·µ](#5-æœ€ä½³å®è·µ)
  - [1. åˆ†å±‚æ¶æ„](#1-åˆ†å±‚æ¶æ„)
  - [2. ä¾èµ–æ³¨å…¥](#2-ä¾èµ–æ³¨å…¥)
  - [3. é…ç½®ç®¡ç†](#3-é…ç½®ç®¡ç†)
  - [4. é”™è¯¯å¤„ç†](#4-é”™è¯¯å¤„ç†)
  - [5. æ—¥å¿—è®°å½•](#5-æ—¥å¿—è®°å½•)
- [ğŸ”— ç›¸å…³èµ„æº](#-ç›¸å…³èµ„æº)

## 1. æ ‡å‡†é¡¹ç›®å¸ƒå±€

### åŸºç¡€é¡¹ç›®ç»“æ„

```
myproject/
â”œâ”€â”€ cmd/                    # ä¸»ç¨‹åºå…¥å£
â”‚   â””â”€â”€ myapp/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/               # ç§æœ‰ä»£ç 
â”‚   â”œâ”€â”€ handler/           # HTTPå¤„ç†å™¨
â”‚   â”œâ”€â”€ service/           # ä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ repository/        # æ•°æ®è®¿é—®å±‚
â”‚   â””â”€â”€ model/             # æ•°æ®æ¨¡å‹
â”œâ”€â”€ pkg/                   # å…¬å…±åº“
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ api/                   # APIå®šä¹‰
â”‚   â””â”€â”€ openapi.yaml
â”œâ”€â”€ configs/               # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml
â”‚   â””â”€â”€ config.dev.yaml
â”œâ”€â”€ scripts/               # è„šæœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ build.sh
â”‚   â””â”€â”€ deploy.sh
â”œâ”€â”€ test/                  # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ e2e/
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ .gitignore
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ Makefile
â””â”€â”€ README.md
```

---

## 2. é¡¹ç›®ç±»å‹

### ç±»å‹1: CLIå·¥å…·

```
cli-tool/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ tool/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ command/           # å‘½ä»¤å®ç°
â”‚   â”‚   â”œâ”€â”€ root.go
â”‚   â”‚   â”œâ”€â”€ version.go
â”‚   â”‚   â””â”€â”€ config.go
â”‚   â””â”€â”€ config/            # é…ç½®ç®¡ç†
â”œâ”€â”€ pkg/
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ go.mod
â””â”€â”€ README.md
```

---

### ç±»å‹2: Web APIæœåŠ¡

```
web-api/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ handler/           # HTTP handlers
â”‚   â”‚   â”œâ”€â”€ user.go
â”‚   â”‚   â”œâ”€â”€ auth.go
â”‚   â”‚   â””â”€â”€ middleware.go
â”‚   â”œâ”€â”€ service/           # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ user.go
â”‚   â”‚   â””â”€â”€ auth.go
â”‚   â”œâ”€â”€ repository/        # æ•°æ®è®¿é—®
â”‚   â”‚   â””â”€â”€ user.go
â”‚   â””â”€â”€ model/             # æ•°æ®æ¨¡å‹
â”‚       â””â”€â”€ user.go
â”œâ”€â”€ api/
â”‚   â””â”€â”€ openapi.yaml
â”œâ”€â”€ configs/
â”‚   â””â”€â”€ config.yaml
â”œâ”€â”€ migrations/            # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ 001_create_users.sql
â”‚   â””â”€â”€ 002_add_indexes.sql
â”œâ”€â”€ go.mod
â””â”€â”€ README.md
```

---

### ç±»å‹3: å¾®æœåŠ¡

```
microservice/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ service/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ grpc/              # gRPCæœåŠ¡
â”‚   â”‚   â””â”€â”€ server.go
â”‚   â”œâ”€â”€ handler/
â”‚   â”œâ”€â”€ service/
â”‚   â””â”€â”€ repository/
â”œâ”€â”€ pkg/
â”‚   â””â”€â”€ proto/             # Protobufå®šä¹‰
â”‚       â””â”€â”€ service.proto
â”œâ”€â”€ api/
â”‚   â””â”€â”€ http/
â”‚       â””â”€â”€ routes.go
â”œâ”€â”€ configs/
â”œâ”€â”€ deployments/           # éƒ¨ç½²é…ç½®
â”‚   â”œâ”€â”€ docker/
â”‚   â”‚   â””â”€â”€ Dockerfile
â”‚   â””â”€â”€ k8s/
â”‚       â”œâ”€â”€ deployment.yaml
â”‚       â””â”€â”€ service.yaml
â”œâ”€â”€ go.mod
â””â”€â”€ README.md
```

---

### ç±»å‹4: åº“é¡¹ç›®

```
library/
â”œâ”€â”€ pkg/
â”‚   â””â”€â”€ mylib/
â”‚       â”œâ”€â”€ core.go
â”‚       â”œâ”€â”€ core_test.go
â”‚       â”œâ”€â”€ helper.go
â”‚       â””â”€â”€ helper_test.go
â”œâ”€â”€ examples/              # ç¤ºä¾‹ä»£ç 
â”‚   â””â”€â”€ basic/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ usage.md
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ test.yml
â”œâ”€â”€ go.mod
â”œâ”€â”€ LICENSE
â””â”€â”€ README.md
```

---

## 3. ç›®å½•è¯´æ˜

### /cmd

ä¸»ç¨‹åºå…¥å£ç›®å½•ï¼Œæ¯ä¸ªå­ç›®å½•æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºã€‚

```go
// cmd/myapp/main.go
package main

import (
    "myproject/internal/server"
)

func main() {
    srv := server.New()
    srv.Run()
}
```

---

### /internal

ç§æœ‰ä»£ç ï¼Œä¸èƒ½è¢«å…¶ä»–é¡¹ç›®å¯¼å…¥ã€‚

```
internal/
â”œâ”€â”€ handler/        # HTTPå¤„ç†å™¨
â”œâ”€â”€ service/        # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ repository/     # æ•°æ®è®¿é—®
â”œâ”€â”€ model/          # æ•°æ®æ¨¡å‹
â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â””â”€â”€ config/         # é…ç½®ç®¡ç†
```

---

### /pkg

å¯ä»¥è¢«å…¶ä»–é¡¹ç›®å¯¼å…¥çš„å…¬å…±åº“ã€‚

```
pkg/
â”œâ”€â”€ logger/         # æ—¥å¿—å·¥å…·
â”œâ”€â”€ errors/         # é”™è¯¯å¤„ç†
â”œâ”€â”€ validator/      # æ•°æ®éªŒè¯
â””â”€â”€ cache/          # ç¼“å­˜å·¥å…·
```

---

### /api

APIå®šä¹‰æ–‡ä»¶ã€‚

```
api/
â”œâ”€â”€ openapi/        # OpenAPI/Swaggerå®šä¹‰
â”‚   â””â”€â”€ api.yaml
â”œâ”€â”€ proto/          # Protobufå®šä¹‰
â”‚   â””â”€â”€ service.proto
â””â”€â”€ graphql/        # GraphQL schema
    â””â”€â”€ schema.graphql
```

---

### /configs

é…ç½®æ–‡ä»¶æ¨¡æ¿ã€‚

```
configs/
â”œâ”€â”€ config.yaml         # é»˜è®¤é…ç½®
â”œâ”€â”€ config.dev.yaml     # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ config.prod.yaml    # ç”Ÿäº§ç¯å¢ƒ
â””â”€â”€ config.test.yaml    # æµ‹è¯•ç¯å¢ƒ
```

---

### /scripts

æ„å»ºã€éƒ¨ç½²ç­‰è„šæœ¬ã€‚

```bash
#!/bin/bash
# scripts/build.sh

VERSION=$(git describe --tags --always)
BUILD_TIME=$(date -u +"%Y-%m-%dT%H:%M:%SZ")

go build -ldflags="-X main.Version=${VERSION} -X main.BuildTime=${BUILD_TIME}" \
    -o bin/myapp ./cmd/myapp
```

---

### /test

é¢å¤–çš„æµ‹è¯•æ–‡ä»¶ã€‚

```
test/
â”œâ”€â”€ integration/    # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ api_test.go
â”œâ”€â”€ e2e/           # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â””â”€â”€ flow_test.go
â””â”€â”€ testdata/      # æµ‹è¯•æ•°æ®
    â””â”€â”€ fixtures/
```

---

## 4. é…ç½®æ–‡ä»¶

### go.mod

```go
module github.com/username/myproject

go 1.25.3

require (
    github.com/gin-gonic/gin v1.10.0
    gorm.io/gorm v1.25.5
)
```

---

### Makefile

```makefile
.PHONY: build test clean run

# å˜é‡
APP_NAME=myapp
VERSION=$(shell git describe --tags --always)
BUILD_TIME=$(shell date -u +"%Y-%m-%dT%H:%M:%SZ")

# æ„å»º
build:
	go build -ldflags="-X main.Version=$(VERSION) -X main.BuildTime=$(BUILD_TIME)" \
		-o bin/$(APP_NAME) ./cmd/$(APP_NAME)

# æµ‹è¯•
test:
	go test -v -race -coverprofile=coverage.out ./...
	go tool cover -html=coverage.out -o coverage.html

# æ¸…ç†
clean:
	rm -rf bin/
	rm -f coverage.out coverage.html

# è¿è¡Œ
run:
	go run ./cmd/$(APP_NAME)

# Dockeræ„å»º
docker-build:
	docker build -t $(APP_NAME):$(VERSION) .

# å®‰è£…å·¥å…·
tools:
	go install github.com/golangci/golangci-lint/cmd/golangci-lint@latest
```

---

### .gitignore

```
# Binaries
bin/
*.exe
*.exe~
*.dll
*.so
*.dylib

# Test
*.test
*.out
coverage.txt
coverage.html

# Build
dist/
build/

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Config
.env
.env.*
!.env.example

# Logs
*.log
logs/
```

---

### README.mdæ¨¡æ¿

```markdown
# Project Name

Brief description of your project.

## Features

- Feature 1
- Feature 2
- Feature 3

## Installation

```bash
go get github.com/username/project
```

## Usage

```go
package main

import "github.com/username/project"

func main() {
    // Example code
}
```

## Configuration

```yaml
# config.yaml
server:
  port: 8080
  host: localhost
```

## Development

```bash
# Clone repository
git clone https://github.com/username/project.git

# Install dependencies
go mod download

# Run tests
make test

# Build
make build
```

## License

MIT License
```

---

## 5. æœ€ä½³å®è·µ

### 1. åˆ†å±‚æ¶æ„

```
Handler (HTTP) â†’ Service (ä¸šåŠ¡é€»è¾‘) â†’ Repository (æ•°æ®è®¿é—®)
```

**ç¤ºä¾‹**:
```go
// internal/handler/user.go
type UserHandler struct {
    userService *service.UserService
}

// internal/service/user.go
type UserService struct {
    userRepo *repository.UserRepository
}

// internal/repository/user.go
type UserRepository struct {
    db *sql.DB
}
```

---

### 2. ä¾èµ–æ³¨å…¥

```go
// internal/server/server.go
type Server struct {
    db          *sql.DB
    userHandler *handler.UserHandler
}

func New() *Server {
    db := setupDB()
    
    userRepo := repository.NewUserRepository(db)
    userService := service.NewUserService(userRepo)
    userHandler := handler.NewUserHandler(userService)
    
    return &Server{
        db:          db,
        userHandler: userHandler,
    }
}
```

---

### 3. é…ç½®ç®¡ç†

```go
// internal/config/config.go
type Config struct {
    Server   ServerConfig
    Database DatabaseConfig
}

type ServerConfig struct {
    Port string `yaml:"port"`
    Host string `yaml:"host"`
}

func Load(path string) (*Config, error) {
    data, err := os.ReadFile(path)
    if err != nil {
        return nil, err
    }
    
    var config Config
    if err := yaml.Unmarshal(data, &config); err != nil {
        return nil, err
    }
    
    return &config, nil
}
```

---

### 4. é”™è¯¯å¤„ç†

```go
// pkg/errors/errors.go
type AppError struct {
    Code    int
    Message string
    Err     error
}

func (e *AppError) Error() string {
    if e.Err != nil {
        return fmt.Sprintf("%s: %v", e.Message, e.Err)
    }
    return e.Message
}

// é¢„å®šä¹‰é”™è¯¯
var (
    ErrNotFound     = &AppError{Code: 404, Message: "not found"}
    ErrUnauthorized = &AppError{Code: 401, Message: "unauthorized"}
)
```

---

### 5. æ—¥å¿—è®°å½•

```go
// pkg/logger/logger.go
var log *slog.Logger

func Init(level string) {
    var logLevel slog.Level
    switch level {
    case "debug":
        logLevel = slog.LevelDebug
    case "info":
        logLevel = slog.LevelInfo
    default:
        logLevel = slog.LevelInfo
    }
    
    log = slog.New(slog.NewJSONHandler(os.Stdout, &slog.HandlerOptions{
        Level: logLevel,
    }))
}

func Info(msg string, args ...any) {
    log.Info(msg, args...)
}

func Error(msg string, args ...any) {
    log.Error(msg, args...)
}
```

---

## ğŸ”— ç›¸å…³èµ„æº

- [é¡¹ç›®ç¤ºä¾‹](../examples/README.md)
- [å·¥ç¨‹åŒ–å®è·µ](../../practices/engineering/README.md)
- [éƒ¨ç½²å®è·µ](../../practices/deployment/README.md)

---

**æœ€åæ›´æ–°**: 2025-10-28  
**Goç‰ˆæœ¬**: 1.25.3

