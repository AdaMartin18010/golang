# 知识图谱

**版本**: v2.0  
**发布日期**: 2024年2月  
**更新日期**: 2025-10-29

---


## 📋 目录

- [1. Go 1.22核心特性体系](#go-1.22核心特性体系)
- [2. 主要特性详解](#主要特性详解)
- [3. Go 1.21 vs Go 1.22](#go-1.21-vs-go-1.22)
- [4. 🔗 相关文档](#相关文档)

---

## Go 1.22核心特性体系

```text
Go 1.22重大特性
│
├── 🔄 for循环语义改进 ⭐⭐⭐⭐⭐
│   ├── 循环变量per-iteration
│   ├── 修复经典闭包bug
│   ├── goroutine安全
│   └── 向后兼容保证
│
├── 🔢 整数range ⭐⭐⭐⭐⭐
│   ├── for i := range n
│   ├── 简化计数循环
│   └── 编译器优化
│
├── 🌐 HTTP路由增强 ⭐⭐⭐⭐⭐
│   ├── 通配符路由
│   ├── HTTP方法匹配
│   ├── 路径参数提取
│   └── net/http内置
│
└── ⚡ 性能改进 ⭐⭐⭐⭐
    ├── 编译速度+6%
    ├── GC延迟改进
    └── 运行时优化
```

---

## 主要特性详解

### 1. for循环变量改进

**Go 1.21问题**:
```go
// Bug: 所有goroutine共享同一个v
for _, v := range []int{1, 2, 3} {
    go func() {
        fmt.Println(v)  // 可能全打印3
    }()
}
```

**Go 1.22修复**:
```go
// 正确: 每次迭代独立的v
for _, v := range []int{1, 2, 3} {
    go func() {
        fmt.Println(v)  // 打印1, 2, 3
    }()
}
```

---

### 2. 整数range

**新语法**:
```go
// Go 1.22+
for i := range 10 {
    fmt.Println(i)  // 0-9
}

// 等价于 (Go 1.21)
for i := 0; i < 10; i++ {
    fmt.Println(i)
}
```

---

### 3. HTTP路由增强

**新特性**:
```go
// 通配符
http.HandleFunc("/posts/{id}", handler)

// HTTP方法
http.HandleFunc("GET /users", getUsers)
http.HandleFunc("POST /users", createUser)

// 提取参数
id := r.PathValue("id")
```

---

## Go 1.21 vs Go 1.22

| 特性 | Go 1.21 | Go 1.22 | 提升 |
|------|---------|---------|------|
| **for循环** | 共享变量 | 独立变量 | ⭐⭐⭐⭐⭐ |
| **range整数** | ❌ | ✅ | ⭐⭐⭐⭐⭐ |
| **HTTP路由** | 基础 | 增强 | ⭐⭐⭐⭐⭐ |

---

## 🔗 相关文档

- [对比矩阵](./00-对比矩阵.md)
- [概念定义体系](./00-概念定义体系.md)

---

**最后更新**: 2025-10-29
