# Go 1.21特性 - 知识图谱

**版本**: v1.0  
**发布日期**: 2023年8月  
**更新日期**: 2025-10-28  
**目录**: reference/versions/01-Go-1.21特性

---

## 📋 目录

- [1. Go 1.21核心特性](#1-go-121核心特性)
- [2. 主要改进](#2-主要改进)
- [3. 特性清单](#3-特性清单)

---

## 1. Go 1.21核心特性

```text
Go 1.21完整特性体系
│
├── 🚀 新特性 (New Features)
│   ├── 内置函数增强
│   │   ├── min/max函数
│   │   ├── clear函数
│   │   └── 类型推导改进
│   │
│   ├── PGO (Profile-Guided Optimization)
│   │   ├── 自动性能优化
│   │   ├── 性能提升2-14%
│   │   └── 生产环境应用
│   │
│   └── 泛型改进
│       ├── 类型推导增强
│       └── 编译速度提升
│
├── 📚 标准库增强 (Stdlib)
│   ├── log/slog包 (结构化日志)
│   ├── slices包 (切片操作)
│   ├── maps包 (映射操作)
│   ├── cmp包 (比较操作)
│   └── testing增强
│
├── 🔧 工具链改进 (Toolchain)
│   ├── go工具前向兼容
│   ├── GODEBUG改进
│   └── 编译器优化
│
└── 🐛 Bug修复 (Fixes)
    └── 100+个bug修复
```

---

## 2. 主要改进

### 🚀 内置函数增强

**min/max函数**:
```go
// Go 1.21新增
result := min(1, 2, 3)  // 1
result := max(1, 2, 3)  // 3

// 支持任意可比较类型
minStr := min("apple", "banana", "cherry")  // "apple"
```

**clear函数**:
```go
// 清空切片
slice := []int{1, 2, 3}
clear(slice)  // [0, 0, 0]

// 清空映射
m := map[string]int{"a": 1}
clear(m)  // map[]
```

---

### ⚡ PGO性能优化

**Profile-Guided Optimization**:
```bash
# 1. 收集性能数据
go test -cpuprofile=cpu.prof

# 2. 使用PGO构建
go build -pgo=cpu.prof

# 性能提升: 2-14%
```

**适用场景**:
- 高性能服务
- CPU密集型应用
- 生产环境优化

---

### 📦 新标准库包

**log/slog - 结构化日志**:
```go
import "log/slog"

slog.Info("user login",
    "user_id", 123,
    "ip", "192.168.1.1")
```

**slices包 - 切片操作**:
```go
import "slices"

s := []int{3, 1, 2}
slices.Sort(s)  // [1, 2, 3]

found := slices.Contains(s, 2)  // true
```

**maps包 - 映射操作**:
```go
import "maps"

m1 := map[string]int{"a": 1}
m2 := map[string]int{"b": 2}
maps.Copy(m1, m2)  // m1: {"a": 1, "b": 2}
```

---

## 3. 特性清单

### 语言特性 (5个)

| # | 特性 | 类型 | 影响 | 推荐度 |
|---|------|------|------|-------|
| 1 | min/max函数 | 新增 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 2 | clear函数 | 新增 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| 3 | 泛型改进 | 增强 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ |
| 4 | PGO | 新增 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| 5 | WASM改进 | 增强 | ⭐⭐⭐ | ⭐⭐⭐ |

### 标准库 (10+个)

| # | 包 | 功能 | 重要性 |
|---|-----|------|-------|
| 1 | log/slog | 结构化日志 | ⭐⭐⭐⭐⭐ |
| 2 | slices | 切片操作 | ⭐⭐⭐⭐⭐ |
| 3 | maps | 映射操作 | ⭐⭐⭐⭐⭐ |
| 4 | cmp | 比较操作 | ⭐⭐⭐⭐ |
| 5 | testing | 测试增强 | ⭐⭐⭐⭐ |

### 工具链 (5个)

| # | 工具 | 改进 | 影响 |
|---|------|------|------|
| 1 | go命令 | 前向兼容 | ⭐⭐⭐⭐⭐ |
| 2 | 编译器 | PGO支持 | ⭐⭐⭐⭐⭐ |
| 3 | GODEBUG | 新选项 | ⭐⭐⭐ |

---

## 🔗 相关文档

- [对比矩阵](./00-对比矩阵.md)
- [概念定义体系](./00-概念定义体系.md)
- [README.md](./README.md)
- [版本对比](../00-版本对比与选择指南.md)

---

**最后更新**: 2025-10-28
