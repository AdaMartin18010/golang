# 知识图谱

**版本**: v2.0  
**发布日期**: 2023年8月  
**更新日期**: 2025-10-29

---


## 📋 目录

- [1. Go 1.21核心特性体系](#1.-go-1.21核心特性体系)[2. 主要特性详解](#2.-主要特性详解)[3. Go 1.20 vs Go 1.21](#3.-go-1.20-vs-go-1.21)[4. 🔗 相关文档](#4.-相关文档)档](#相关文档)

---

## Go 1.21核心特性体系

```text
Go 1.21重大特性
│
├── 🚀 PGO优化 (Profile-Guided Optimization) ⭐⭐⭐⭐⭐
│   ├── 编译时性能优化
│   ├── 基于实际运行profile
│   ├── 典型性能提升: 2%-7%
│   └── default.pgo支持
│
├── 📦 内置函数扩展 ⭐⭐⭐⭐⭐
│   ├── min/max: 通用最值
│   ├── clear: 清空map/slice
│   ├── 泛型支持
│   └── 编译器优化
│
├── 🗑️ GC优化 ⭐⭐⭐⭐
│   ├── 尾延迟改进
│   ├── 大堆性能提升
│   └── 更稳定的暂停时间
│
└── 🛠️ GODEBUG改进 ⭐⭐⭐
    ├── go.mod中设置GODEBUG
    ├── 版本兼容性控制
    └── 渐进式升级支持
```

---

## 主要特性详解

### 1. PGO优化

**工作流程**:
```bash
# 1. 运行生成profile
go test -cpuprofile=default.pgo ./...

# 2. PGO编译
go build  # 自动检测default.pgo

# 3. 性能提升
Web服务: +2-7%
CPU密集: +3-10%
```

**优化原理**:
- 热点路径内联
- 分支预测优化
- 指令缓存优化

---

### 2. min/max/clear

**新增内置函数**:
```go
// min/max - 泛型最值
func min[T cmp.Ordered](x, y T) T
func max[T cmp.Ordered](x, y T) T

// clear - 清空容器
func clear[T ~[]E | ~map[K]V](t T)
```

**应用示例**:
```go
a := min(3, 5)          // 3
b := max(1.2, 3.4)      // 3.4

m := map[int]string{1: "a"}
clear(m)  // len(m) == 0
```

---

## Go 1.20 vs Go 1.21

| 特性 | Go 1.20 | Go 1.21 | 提升 |
|------|---------|---------|------|
| **PGO** | 无 | 支持 | ⭐⭐⭐⭐⭐ |
| **min/max** | 无 | 内置 | ⭐⭐⭐⭐⭐ |
| **clear** | 无 | 内置 | ⭐⭐⭐⭐ |
| **GC尾延迟** | 基准 | -10% | ⭐⭐⭐⭐ |

---

## 🔗 相关文档

- [对比矩阵](./00-对比矩阵.md)
- [概念定义体系](./00-概念定义体系.md)
- [版本总览](../00-知识图谱.md)

---

**最后更新**: 2025-10-29

