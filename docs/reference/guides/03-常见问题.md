# 常见问题

**难度**: 入门 | **预计阅读**: 15分钟

---

## 📖 语言相关

### Q: 为什么没有泛型？
**A**: Go 1.18+已支持泛型。
```go
func Max[T constraints.Ordered](a, b T) T {
    if a > b {
        return a
    }
    return b
}
```

---

### Q: 如何处理nil指针？
**A**: 始终检查nil。
```go
if ptr != nil {
    value := *ptr
}
```

---

### Q: slice和array区别？
**A**: 
- array: 固定长度
- slice: 动态长度，底层指向array

```go
arr := [3]int{1, 2, 3}  // array
slice := []int{1, 2, 3}  // slice
```

---

## 🔧 并发相关

### Q: goroutine泄漏？
**A**: 确保goroutine能正常退出。
```go
ctx, cancel := context.WithCancel(context.Background())
defer cancel()

go func() {
    for {
        select {
        case <-ctx.Done():
            return
        default:
            // work...
        }
    }
}()
```

---

### Q: channel什么时候关闭？
**A**: 
- 只在发送端关闭
- 接收端通过ok判断

```go
ch := make(chan int)
go func() {
    ch <- 42
    close(ch)
}()

v, ok := <-ch
if !ok {
    // channel已关闭
}
```

---

## 🌐 Web开发

### Q: 如何处理CORS？
**A**: 设置响应头或使用中间件。
```go
w.Header().Set("Access-Control-Allow-Origin", "*")
```

---

### Q: 如何实现优雅关闭？
**A**: 监听信号并超时关闭。
```go
quit := make(chan os.Signal, 1)
signal.Notify(quit, syscall.SIGTERM)
<-quit

ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)
defer cancel()
server.Shutdown(ctx)
```

---

## 🐛 调试相关

### Q: 如何调试？
**A**: 
- 使用`fmt.Printf`
- 使用Delve调试器
- 使用IDE断点

---

### Q: 如何性能分析？
**A**: 
```go
import _ "net/http/pprof"

http.ListenAndServe(":6060", nil)
```

```bash
go tool pprof http://localhost:6060/debug/pprof/profile
```

---

## 📚 相关资源

- [Go FAQ](https://go.dev/doc/faq)

---

**最后更新**: 2025-10-28

