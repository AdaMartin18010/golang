# 常用第三方库

**版本**: v1.0  
**更新日期**: 2025-10-29  
**适用于**: Go 1.25.3

---

## 📋 目录

- [1. 📖 Web框架](#1.-web框架)
  - [Gin](#gin)
  - [Fiber](#fiber)
- [🗄️ 数据库](#数据库)
  - [GORM](#gorm)
  - [sqlx](#sqlx)
- [🔧 工具库](#工具库)
  - [Viper (配置)](#viper-配置)
  - [Cobra (CLI)](#cobra-cli)
  - [Logrus (日志)](#logrus-日志)
- [📊 监控](#监控)
  - [Prometheus Client](#prometheus-client)
- [🔌 RPC/API](#rpcapi)
  - [gRPC](#grpc)
  - [Gorilla Mux (路由)](#gorilla-mux-路由)
- [🗄️ 缓存/存储](#缓存存储)
  - [go-redis](#go-redis)
  - [etcd client](#etcd-client)
- [📨 消息队列](#消息队列)
  - [Kafka (sarama)](#kafka-sarama)
  - [NATS](#nats)
- [🧪 测试](#测试)
  - [testify](#testify)
  - [gomock](#gomock)
- [🔐 认证/安全](#认证安全)
  - [JWT](#jwt)
  - [bcrypt](#bcrypt)
- [📚 相关资源](#相关资源)
- [🔗 导航](#导航)

## 1. 📖 Web框架

### Gin

```bash
go get github.com/gin-gonic/gin
```

```go
r := gin.Default()
r.GET("/ping", func(c *gin.Context) {
    c.JSON(200, gin.H{"message": "pong"})
})
r.Run()
```

### Fiber

```bash
go get github.com/gofiber/fiber/v2
```

```go
app := fiber.New()
app.Get("/", func(c *fiber.Ctx) error {
    return c.SendString("Hello!")
})
app.Listen(":3000")
```

---

## 🗄️ 数据库

### GORM

```bash
go get gorm.io/gorm
go get gorm.io/driver/postgres
```

```go
db, _ := gorm.Open(postgres.Open(dsn), &gorm.Config{})

type User struct {
    ID   uint
    Name string
}

db.Create(&User{Name: "Alice"})
db.First(&user, 1)
```

### sqlx

```bash
go get github.com/jmoiron/sqlx
```

```go
db, _ := sqlx.Connect("postgres", dsn)
var users []User
db.Select(&users, "SELECT * FROM users")
```

---

## 🔧 工具库

### Viper (配置)

```bash
go get github.com/spf13/viper
```

```go
viper.SetConfigName("config")
viper.AddConfigPath(".")
viper.ReadInConfig()
value := viper.GetString("key")
```

### Cobra (CLI)

```bash
go get github.com/spf13/cobra
```

```go
rootCmd := &cobra.Command{
    Use: "app",
    Run: func(cmd *cobra.Command, args []string) {
        // logic
    },
}
rootCmd.Execute()
```

### Logrus (日志)

```bash
go get github.com/sirupsen/logrus
```

```go
log := logrus.New()
log.WithFields(logrus.Fields{
    "user": "alice",
}).Info("User logged in")
```

---

## 📊 监控

### Prometheus Client

```bash
go get github.com/prometheus/client_golang/prometheus
```

```go
counter := prometheus.NewCounter(prometheus.CounterOpts{
    Name: "requests_total",
})
prometheus.MustRegister(counter)
counter.Inc()
```

---

## 🔌 RPC/API

### gRPC

```bash
go get google.golang.org/grpc
go get google.golang.org/protobuf
```

```go
conn, _ := grpc.Dial("localhost:50051", grpc.WithInsecure())
defer conn.Close()
client := pb.NewGreeterClient(conn)
```

### Gorilla Mux (路由)

```bash
go get github.com/gorilla/mux
```

```go
r := mux.NewRouter()
r.HandleFunc("/users/{id}", handler).Methods("GET")
http.ListenAndServe(":8080", r)
```

---

## 🗄️ 缓存/存储

### go-redis

```bash
go get github.com/redis/go-redis/v9
```

```go
rdb := redis.NewClient(&redis.Options{
    Addr: "localhost:6379",
})
rdb.Set(ctx, "key", "value", 0)
val, _ := rdb.Get(ctx, "key").Result()
```

### etcd client

```bash
go get go.etcd.io/etcd/client/v3
```

```go
cli, _ := clientv3.New(clientv3.Config{
    Endpoints: []string{"localhost:2379"},
})
cli.Put(ctx, "key", "value")
```

---

## 📨 消息队列

### Kafka (sarama)

```bash
go get github.com/IBM/sarama
```

```go
producer, _ := sarama.NewSyncProducer([]string{"localhost:9092"}, nil)
producer.SendMessage(&sarama.ProducerMessage{
    Topic: "test",
    Value: sarama.StringEncoder("message"),
})
```

### NATS

```bash
go get github.com/nats-io/nats.go
```

```go
nc, _ := nats.Connect(nats.DefaultURL)
nc.Publish("subject", []byte("data"))
```

---

## 🧪 测试

### testify

```bash
go get github.com/stretchr/testify
```

```go
import "github.com/stretchr/testify/assert"

func TestSomething(t *testing.T) {
    assert.Equal(t, 42, result)
    assert.NotNil(t, obj)
}
```

### gomock

```bash
go get github.com/golang/mock/gomock
```

```go
ctrl := gomock.NewController(t)
defer ctrl.Finish()
mock := NewMockInterface(ctrl)
mock.EXPECT().Method().Return(value)
```

---

## 🔐 认证/安全

### JWT

```bash
go get github.com/golang-jwt/jwt/v5
```

```go
token := jwt.NewWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{
    "user_id": 123,
    "exp": time.Now().Add(time.Hour * 24).Unix(),
})
tokenString, _ := token.SignedString([]byte("secret"))
```

### bcrypt

```bash
go get golang.org/x/crypto/bcrypt
```

```go
hashed, _ := bcrypt.GenerateFromPassword([]byte("password"), 10)
err := bcrypt.CompareHashAndPassword(hashed, []byte("password"))
```

---

## 📚 相关资源

- [Awesome Go](https://github.com/avelino/awesome-go)
- [Go Packages](https://pkg.go.dev/)
- [Go Module Proxy](https://proxy.golang.org/)

---

## 🔗 导航

- **上一页**: [02-标准库API](./02-标准库API.md)
- **下一页**: [04-API设计指南](./04-API设计指南.md)
- **相关**: [README](./README.md)

---

**最后更新**: 2025-10-29  
**Go版本**: 1.25.3
