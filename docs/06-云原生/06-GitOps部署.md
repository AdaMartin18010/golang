# GitOpséƒ¨ç½²

> **ç®€ä»‹**: ä»äº‘åŸç”Ÿè§†è§’æ¢è®¨GitOpsåœ¨KubernetesæŒç»­éƒ¨ç½²ä¸­çš„åº”ç”¨
> **ç‰ˆæœ¬**: Go 1.23+ / Kubernetes 1.28+  
> **éš¾åº¦**: â­â­â­â­  
> **æ ‡ç­¾**: #GitOps #æŒç»­éƒ¨ç½² #ArgoCD #FluxCD

<!-- TOC START -->
- [GitOpséƒ¨ç½²](#gitopséƒ¨ç½²)
  - [6.1 ğŸ“š GitOpsæ¦‚è¿°](#61--gitopsæ¦‚è¿°)
  - [6.2 ğŸ¯ äº‘åŸç”ŸGitOpsæ¶æ„](#62--äº‘åŸç”Ÿgitopsæ¶æ„)
    - [å·¥å…·å¯¹æ¯”](#å·¥å…·å¯¹æ¯”)
    - [äº‘å¹³å°é›†æˆ](#äº‘å¹³å°é›†æˆ)
  - [6.3 ğŸ“š è¯¦ç»†æ–‡æ¡£](#63--è¯¦ç»†æ–‡æ¡£)
<!-- TOC END -->

## 6.1 ğŸ“š GitOpsæ¦‚è¿°

**GitOps**æ˜¯äº‘åŸç”Ÿç¯å¢ƒä¸‹çš„å£°æ˜å¼æŒç»­äº¤ä»˜æ–¹æ³•è®ºï¼š

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Git Repo    â”‚  å•ä¸€äº‹å®æ¥æº
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitOps      â”‚  è‡ªåŠ¨åŒæ­¥
â”‚  Operator    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Kubernetes   â”‚  ç›®æ ‡çŠ¶æ€
â”‚  Cluster     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒä¼˜åŠ¿**:

- âœ… ç‰ˆæœ¬æ§åˆ¶ï¼šæ‰€æœ‰å˜æ›´å¯è¿½æº¯
- âœ… è‡ªåŠ¨åŒ–ï¼šå‡å°‘äººå·¥é”™è¯¯
- âœ… å›æ»šå®¹æ˜“ï¼šGit revertå³å¯
- âœ… å®¡è®¡å‹å¥½ï¼šå®Œæ•´çš„å˜æ›´å†å²

## 6.2 ğŸ¯ äº‘åŸç”ŸGitOpsæ¶æ„

### å·¥å…·å¯¹æ¯”

| å·¥å…· | ç±»å‹ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|---------|
| ArgoCD | Pull-based | UIå‹å¥½ã€å¤šé›†ç¾¤ | ä¼ä¸šçº§ |
| Flux | Pull-based | è½»é‡ã€GitOps Toolkit | äº‘åŸç”Ÿä¼˜å…ˆ |
| Jenkins X | Push-based | CI/CDä¸€ä½“åŒ– | ä¼ ç»Ÿè½¬å‹ |

### äº‘å¹³å°é›†æˆ

**AWS + ArgoCD**:

```bash
# åœ¨EKSä¸Šå®‰è£…ArgoCD
kubectl create namespace argocd
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml

# ä½¿ç”¨AWS Load Balancer
kubectl patch svc argocd-server -n argocd -p '{"spec": {"type": "LoadBalancer"}}'
```

**GCP + Flux**:

```bash
# åœ¨GKEä¸Šå¼•å¯¼Flux
flux bootstrap github \
  --owner=myorg \
  --repository=fleet-infra \
  --path=clusters/gke-prod
```

## 6.3 ğŸ“š è¯¦ç»†æ–‡æ¡£

å®Œæ•´çš„GitOpsæŒç»­éƒ¨ç½²æŒ‡å—ï¼Œè¯·å‚è€ƒï¼š

**[ğŸ“– å¾®æœåŠ¡/13-GitOpsæŒç»­éƒ¨ç½²](../05-å¾®æœåŠ¡/13-GitOpsæŒç»­éƒ¨ç½².md)**

è¯¥æ–‡æ¡£æ¶µç›–ï¼š

- ArgoCDå®Œæ•´å®è·µï¼ˆå®‰è£…ã€é…ç½®ã€åº”ç”¨ç®¡ç†ï¼‰
- Flux CDå®è·µï¼ˆGitRepositoryã€Kustomizationã€HelmReleaseï¼‰
- éƒ¨ç½²ç­–ç•¥ï¼ˆè“ç»¿ã€é‡‘ä¸é›€ã€æ¸è¿›å¼ï¼‰
- å®‰å…¨æœ€ä½³å®è·µï¼ˆSealed Secretsã€RBACï¼‰
- ç›‘æ§ä¸å‘Šè­¦ï¼ˆPrometheusé›†æˆã€é€šçŸ¥é…ç½®ï¼‰
- CI/CDå®Œæ•´æµç¨‹ï¼ˆGitHub Actionsé›†æˆï¼‰
- å¤šé›†ç¾¤éƒ¨ç½²ï¼ˆApplicationSetã€å¤šç¯å¢ƒç®¡ç†ï¼‰

---

**æ–‡æ¡£ç»´æŠ¤è€…**: Go Documentation Team  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ20æ—¥  
**æ–‡æ¡£çŠ¶æ€**: å®Œæˆ  
**é€‚ç”¨ç‰ˆæœ¬**: Kubernetes 1.27+, ArgoCD 2.9+, Flux 2.2+
