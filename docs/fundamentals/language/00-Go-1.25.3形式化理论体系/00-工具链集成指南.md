# Goå½¢å¼åŒ–æ–¹æ³•å·¥å…·é“¾é›†æˆæŒ‡å—

**ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-10-23  
**é€‚ç”¨å¯¹è±¡**: å·¥å…·å¼€å‘è€…ã€CI/CDå·¥ç¨‹å¸ˆã€DevOps

---


## ğŸ“‹ ç›®å½•

- [ğŸ¯ å·¥å…·é“¾æ¦‚è¿°](#-å·¥å…·é“¾æ¦‚è¿°)
- [ğŸ› ï¸ æ ¸å¿ƒå·¥å…·](#-æ ¸å¿ƒå·¥å…·)
  - [1. å½¢å¼åŒ–éªŒè¯å·¥å…· (Formal Verifier)](#1-å½¢å¼åŒ–éªŒè¯å·¥å…·-formal-verifier)
  - [2. å¹¶å‘æ¨¡å¼ç”Ÿæˆå™¨ (Pattern Generator)](#2-å¹¶å‘æ¨¡å¼ç”Ÿæˆå™¨-pattern-generator)
  - [3. æ€§èƒ½åˆ†æå™¨ (Performance Analyzer)](#3-æ€§èƒ½åˆ†æå™¨-performance-analyzer)
- [ğŸ”„ CI/CDé›†æˆ](#-cicdé›†æˆ)
  - [GitHub Actions](#github-actions)
  - [GitLab CI](#gitlab-ci)
- [ğŸ”§ IDEé›†æˆ](#-ideé›†æˆ)
  - [VSCode Extension](#vscode-extension)
  - [GoLand Plugin](#goland-plugin)
- [ğŸ“Š å·¥å…·é“¾æµç¨‹](#-å·¥å…·é“¾æµç¨‹)
- [ğŸ“š æœ€ä½³å®è·µ](#-æœ€ä½³å®è·µ)
  - [1. æŒç»­éªŒè¯](#1-æŒç»­éªŒè¯)
  - [2. è‡ªåŠ¨åŒ–æŠ¥å‘Š](#2-è‡ªåŠ¨åŒ–æŠ¥å‘Š)
  - [3. æ€§èƒ½å›å½’æ£€æµ‹](#3-æ€§èƒ½å›å½’æ£€æµ‹)
- [ğŸ“ å­¦ä¹ èµ„æº](#-å­¦ä¹ èµ„æº)

## ğŸ¯ å·¥å…·é“¾æ¦‚è¿°

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•å°†Goå½¢å¼åŒ–ç†è®ºåº”ç”¨åˆ°å®é™…å¼€å‘å·¥å…·é“¾ä¸­ã€‚

---

## ğŸ› ï¸ æ ¸å¿ƒå·¥å…·

### 1. å½¢å¼åŒ–éªŒè¯å·¥å…· (Formal Verifier)

**ä½ç½®**: `tools/formal-verifier/`  
**åŠŸèƒ½**: CFGã€SSAã€æ•°æ®æµåˆ†æã€å¹¶å‘æ£€æŸ¥

**é›†æˆæ–¹å¼**:

```bash
# å®‰è£…
go install github.com/your-org/formal-verifier/cmd/fv@latest

# CI/CDé›†æˆ
fv concurrency --check=all --file=./...
fv optimizer --check=escape --file=./...
```

### 2. å¹¶å‘æ¨¡å¼ç”Ÿæˆå™¨ (Pattern Generator)

**ä½ç½®**: `tools/concurrency-pattern-generator/`  
**åŠŸèƒ½**: ç”Ÿæˆç»è¿‡éªŒè¯çš„å¹¶å‘æ¨¡å¼ä»£ç 

**ä½¿ç”¨**:

```bash
# å®‰è£…
go install github.com/your-org/cpgen@latest

# ç”ŸæˆWorker Pool
cpgen generate --pattern=worker-pool --workers=10 --output=pool.go
```

### 3. æ€§èƒ½åˆ†æå™¨ (Performance Analyzer)

**åŠŸèƒ½**: åŸºäºå½¢å¼åŒ–æ¨¡å‹çš„æ€§èƒ½é¢„æµ‹

**é›†æˆ**:

```yaml
# .github/workflows/performance.yml
- name: Performance Analysis
  run: |
    go test -bench=. -benchmem | tee bench.txt
    fv optimizer --check=all --file=./ --report=perf.html
```

---

## ğŸ”„ CI/CDé›†æˆ

### GitHub Actions

```yaml
name: Formal Verification

on: [push, pull_request]

jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Go
        uses: actions/setup-go@v4
        with:
          go-version: '1.25.3'
      
      - name: Install Formal Verifier
        run: go install github.com/your-org/fv@latest
      
      - name: Run Verification
        run: |
          fv cfg --file=./... --format=json > cfg.json
          fv concurrency --check=all --file=./...
          fv types --check=safety --file=./...
      
      - name: Upload Report
        uses: actions/upload-artifact@v3
        with:
          name: verification-report
          path: |
            cfg.json
            report.html
```

### GitLab CI

```yaml
formal-verification:
  stage: test
  image: golang:1.25.3
  script:
    - go install github.com/your-org/fv@latest
    - fv concurrency --check=all --file=./...
    - fv optimizer --check=all --file=./...
  artifacts:
    reports:
      junit: report.xml
    paths:
      - report.html
```

---

## ğŸ”§ IDEé›†æˆ

### VSCode Extension

**å®‰è£…**: æœç´¢ "Go Formal Verifier"

**åŠŸèƒ½**:

- å®æ—¶CFGå¯è§†åŒ–
- å¹¶å‘é”™è¯¯é«˜äº®
- ä¼˜åŒ–å»ºè®®æç¤º

**é…ç½®** (`.vscode/settings.json`):

```json
{
  "go.formalVerifier.enabled": true,
  "go.formalVerifier.checks": [
    "goroutine-leak",
    "deadlock",
    "race",
    "escape"
  ],
  "go.formalVerifier.autofix": true
}
```

### GoLand Plugin

**å®‰è£…**: Settings â†’ Plugins â†’ "Go Formal Methods"

**å¿«æ·é”®**:

- `Ctrl+Shift+F`: è¿è¡Œå½¢å¼åŒ–éªŒè¯
- `Ctrl+Shift+C`: ç”Ÿæˆå¹¶å‘æ¨¡å¼
- `Ctrl+Shift+O`: æŸ¥çœ‹ä¼˜åŒ–å»ºè®®

---

## ğŸ“Š å·¥å…·é“¾æµç¨‹

```mermaid
graph LR
    A[ä»£ç ] --> B[å½¢å¼åŒ–éªŒè¯]
    B --> C{é€šè¿‡?}
    C -->|å¦| D[ä¿®å¤é—®é¢˜]
    D --> A
    C -->|æ˜¯| E[æ€§èƒ½åˆ†æ]
    E --> F[ä¼˜åŒ–å»ºè®®]
    F --> G[ä»£ç ä¼˜åŒ–]
    G --> H[éƒ¨ç½²]
```

---

## ğŸ“š æœ€ä½³å®è·µ

### 1. æŒç»­éªŒè¯

```bash
# Pre-commit Hook (.git/hooks/pre-commit)
#!/bin/bash
fv concurrency --check=all --file=$(git diff --cached --name-only '*.go')
if [ $? -ne 0 ]; then
    echo "å¹¶å‘éªŒè¯å¤±è´¥ï¼Œè¯·ä¿®å¤åå†æäº¤"
    exit 1
fi
```

### 2. è‡ªåŠ¨åŒ–æŠ¥å‘Š

```bash
# æ¯æ—¥æŠ¥å‘Š
cron: 0 2 * * * cd /project && fv --full-report --output=daily-report.html
```

### 3. æ€§èƒ½å›å½’æ£€æµ‹

```yaml
# æ€§èƒ½åŸºå‡†
- name: Performance Regression
  run: |
    go test -bench=. > new.txt
    benchstat baseline.txt new.txt
```

---

## ğŸ“ å­¦ä¹ èµ„æº

- ğŸ“– [å½¢å¼åŒ–ç†è®ºä½“ç³»](../README.md)
- ğŸ› ï¸ [å·¥å…·ä½¿ç”¨æ–‡æ¡£](../../tools/)
- ğŸ’¬ [è®¨è®ºç¤¾åŒº](https://github.com/discussions)

---

<div align="center">

**Goå½¢å¼åŒ–æ–¹æ³•å·¥å…·é“¾é›†æˆæŒ‡å—**-

ç†è®ºè½åœ° | å·¥ç¨‹å®è·µ | æŒç»­æ”¹è¿›

v1.0 | 2025-10-23

</div>
