# go.modæ–‡ä»¶è¯¦è§£

> ğŸ“š **ç®€ä»‹**
>
> æœ¬æ–‡æ·±å…¥è®²è§£go.modæ–‡ä»¶çš„ç»“æ„ã€è¯­æ³•å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…å…¨é¢æŒæ¡Goæ¨¡å—é…ç½®ã€‚å†…å®¹æ¶µç›–æ¨¡å—å£°æ˜ã€ä¾èµ–ç®¡ç†ã€ç‰ˆæœ¬æ§åˆ¶ç­‰å…³é”®çŸ¥è¯†ç‚¹ã€‚
>
> é€šè¿‡æœ¬æ–‡ï¼Œæ‚¨å°†æŒæ¡go.modæ–‡ä»¶çš„ç¼–å†™è§„èŒƒï¼Œèƒ½å¤Ÿé«˜æ•ˆç®¡ç†é¡¹ç›®ä¾èµ–ã€‚

---

## ğŸ“‹ ç›®å½•

- [go.modæ–‡ä»¶è¯¦è§£](#gomodæ–‡ä»¶è¯¦è§£)
  - [ğŸ“‹ ç›®å½•](#-ç›®å½•)
  - [1. ğŸ“š go.modæ–‡ä»¶æ¦‚è¿°](#1--gomodæ–‡ä»¶æ¦‚è¿°)
    - [1.1 æ–‡ä»¶ä½œç”¨](#11-æ–‡ä»¶ä½œç”¨)
    - [1.2 æ–‡ä»¶ä½ç½®](#12-æ–‡ä»¶ä½ç½®)
  - [2. ğŸ“ æ–‡ä»¶ç»“æ„](#2--æ–‡ä»¶ç»“æ„)
    - [2.1 moduleæŒ‡ä»¤](#21-moduleæŒ‡ä»¤)
    - [2.2 goæŒ‡ä»¤](#22-goæŒ‡ä»¤)
    - [2.3 requireæŒ‡ä»¤](#23-requireæŒ‡ä»¤)
    - [2.4 replaceæŒ‡ä»¤](#24-replaceæŒ‡ä»¤)
    - [2.5 excludeæŒ‡ä»¤](#25-excludeæŒ‡ä»¤)
    - [2.6 retractæŒ‡ä»¤](#26-retractæŒ‡ä»¤)
  - [3. ğŸ’» ä»£ç ç¤ºä¾‹](#3--ä»£ç ç¤ºä¾‹)
    - [3.1 åŸºç¡€ç¤ºä¾‹](#31-åŸºç¡€ç¤ºä¾‹)
    - [3.2 é«˜çº§é…ç½®](#32-é«˜çº§é…ç½®)
  - [4. ğŸ”§ å®è·µåº”ç”¨](#4--å®è·µåº”ç”¨)
    - [4.1 åˆ›å»ºæ–°æ¨¡å—](#41-åˆ›å»ºæ–°æ¨¡å—)
    - [4.2 æ·»åŠ ä¾èµ–](#42-æ·»åŠ ä¾èµ–)
    - [4.3 æ›´æ–°ä¾èµ–](#43-æ›´æ–°ä¾èµ–)
  - [5. ğŸ¯ æœ€ä½³å®è·µ](#5--æœ€ä½³å®è·µ)
    - [âœ… æ¨èåšæ³•](#-æ¨èåšæ³•)
    - [âŒ é¿å…çš„åšæ³•](#-é¿å…çš„åšæ³•)
  - [6. âš ï¸ å¸¸è§é—®é¢˜](#6-ï¸-å¸¸è§é—®é¢˜)
    - [Q1: go.modä¸­çš„// indirectæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ](#q1-gomodä¸­çš„-indirectæ˜¯ä»€ä¹ˆæ„æ€)
    - [Q2: å¦‚ä½•å¤„ç†ä¾èµ–å†²çªï¼Ÿ](#q2-å¦‚ä½•å¤„ç†ä¾èµ–å†²çª)
    - [Q3: ä¸ºä»€ä¹ˆæœ‰äº›ä¾èµ–æ˜¾ç¤º+incompatibleï¼Ÿ](#q3-ä¸ºä»€ä¹ˆæœ‰äº›ä¾èµ–æ˜¾ç¤ºincompatible)
    - [Q4: å¦‚ä½•ä½¿ç”¨æœ¬åœ°ä¾èµ–è¿›è¡Œå¼€å‘ï¼Ÿ](#q4-å¦‚ä½•ä½¿ç”¨æœ¬åœ°ä¾èµ–è¿›è¡Œå¼€å‘)
  - [7. ğŸ“š æ‰©å±•é˜…è¯»](#7--æ‰©å±•é˜…è¯»)
    - [å®˜æ–¹æ–‡æ¡£](#å®˜æ–¹æ–‡æ¡£)
    - [ç›¸å…³æ–‡æ¡£](#ç›¸å…³æ–‡æ¡£)

## 1. ğŸ“š go.modæ–‡ä»¶æ¦‚è¿°

### 1.1 æ–‡ä»¶ä½œç”¨

`go.mod`æ–‡ä»¶æ˜¯Goæ¨¡å—çš„å®šä¹‰æ–‡ä»¶ï¼Œç”¨äºï¼š

- ğŸ“¦ **å£°æ˜æ¨¡å—è·¯å¾„**: å®šä¹‰æ¨¡å—çš„å”¯ä¸€æ ‡è¯†
- ğŸ”— **ç®¡ç†ä¾èµ–**: è®°å½•é¡¹ç›®æ‰€éœ€çš„ä¾èµ–åŒ…åŠç‰ˆæœ¬
- ğŸ”’ **ç‰ˆæœ¬æ§åˆ¶**: é”å®šä¾èµ–ç‰ˆæœ¬ï¼Œç¡®ä¿æ„å»ºå¯é‡ç°
- ğŸ”„ **ä¾èµ–æ›¿æ¢**: æ”¯æŒæœ¬åœ°å¼€å‘å’Œä¾èµ–é‡å®šå‘

### 1.2 æ–‡ä»¶ä½ç½®

- ä½äºé¡¹ç›®æ ¹ç›®å½•
- æ¯ä¸ªæ¨¡å—æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª`go.mod`æ–‡ä»¶
- é€šè¿‡`go mod init`å‘½ä»¤åˆ›å»º

---

## 2. ğŸ“ æ–‡ä»¶ç»“æ„

### 2.1 moduleæŒ‡ä»¤

å£°æ˜æ¨¡å—è·¯å¾„ï¼š

```go
module github.com/username/projectname
```

**è§„èŒƒ**:

- é€šå¸¸ä½¿ç”¨ä»£ç æ‰˜ç®¡å¹³å°çš„è·¯å¾„
- è·¯å¾„ä¸èƒ½åŒ…å«ç©ºæ ¼
- å»ºè®®ä½¿ç”¨å°å†™å­—æ¯

### 2.2 goæŒ‡ä»¤

æŒ‡å®šGoè¯­è¨€ç‰ˆæœ¬ï¼š

```go
go 1.25.3
```

**ä½œç”¨**:

- å£°æ˜é¡¹ç›®æ‰€éœ€çš„æœ€ä½Goç‰ˆæœ¬
- å½±å“è¯­è¨€ç‰¹æ€§çš„å¯ç”¨æ€§
- Go 1.25.3+æ”¯æŒæ›´ç²¾ç¡®çš„å·¥å…·é“¾é€‰æ‹©

### 2.3 requireæŒ‡ä»¤

å£°æ˜ä¾èµ–åŒ…ï¼š

```go
require (
    github.com/gin-gonic/gin v1.9.1
    github.com/spf13/viper v1.16.0
)
```

**æ ¼å¼**:

```text
require æ¨¡å—è·¯å¾„ ç‰ˆæœ¬å·
```

**ç‰ˆæœ¬å·è§„åˆ™**:

- `v1.2.3`: ç²¾ç¡®ç‰ˆæœ¬
- `v1.2.3+incompatible`: ä¸å…¼å®¹çš„ä¸»ç‰ˆæœ¬
- `v0.0.0-20230101120000-abcdef123456`: ä¼ªç‰ˆæœ¬ï¼ˆPseudo-versionï¼‰

### 2.4 replaceæŒ‡ä»¤

æ›¿æ¢ä¾èµ–åŒ…ï¼š

```go
replace (
    github.com/old/module => github.com/new/module v1.2.3
    github.com/local/module => ../local/path
)
```

**ä½¿ç”¨åœºæ™¯**:

- ğŸ”§ æœ¬åœ°å¼€å‘è°ƒè¯•
- ğŸ”„ ä½¿ç”¨forkç‰ˆæœ¬
- ğŸš« è§£å†³ä¾èµ–å†²çª

### 2.5 excludeæŒ‡ä»¤

æ’é™¤ç‰¹å®šç‰ˆæœ¬ï¼š

```go
exclude github.com/some/module v1.2.3
```

**ç”¨é€”**:

- æ’é™¤æœ‰é—®é¢˜çš„ç‰ˆæœ¬
- å¼ºåˆ¶ä½¿ç”¨å…¶ä»–ç‰ˆæœ¬

### 2.6 retractæŒ‡ä»¤

æ’¤å›å·²å‘å¸ƒçš„ç‰ˆæœ¬ï¼š

```go
retract (
    v1.0.0 // åŒ…å«ä¸¥é‡bug
    [v1.1.0, v1.2.0] // ç‰ˆæœ¬èŒƒå›´
)
```

---

## 3. ğŸ’» ä»£ç ç¤ºä¾‹

### 3.1 åŸºç¡€ç¤ºä¾‹

```go
module github.com/mycompany/myproject

go 1.25.3

require (
    github.com/gin-gonic/gin v1.9.1
    github.com/go-sql-driver/mysql v1.7.1
    golang.org/x/sync v0.3.0
)
```

### 3.2 é«˜çº§é…ç½®

```go
module github.com/mycompany/advanced-project

go 1.25.3

require (
    github.com/gin-gonic/gin v1.9.1
    github.com/spf13/cobra v1.7.0
)

require (
    // é—´æ¥ä¾èµ–ï¼ˆindirectï¼‰
    github.com/gin-contrib/sse v0.1.0 // indirect
    github.com/golang/protobuf v1.5.3 // indirect
)

replace (
    // ä½¿ç”¨æœ¬åœ°ç‰ˆæœ¬è¿›è¡Œå¼€å‘
    github.com/mycompany/internal-lib => ../internal-lib
)

exclude (
    // æ’é™¤æœ‰å®‰å…¨æ¼æ´çš„ç‰ˆæœ¬
    github.com/some/package v1.2.3
)
```

---

## 4. ğŸ”§ å®è·µåº”ç”¨

### 4.1 åˆ›å»ºæ–°æ¨¡å—

```bash
# åˆå§‹åŒ–æ¨¡å—
go mod init github.com/username/projectname

# æŸ¥çœ‹go.modå†…å®¹
cat go.mod
```

### 4.2 æ·»åŠ ä¾èµ–

```bash
# æ–¹å¼1ï¼šä»£ç ä¸­importåæ‰§è¡Œ
go mod tidy

# æ–¹å¼2ï¼šç›´æ¥æ·»åŠ 
go get github.com/gin-gonic/gin@v1.9.1

# æ–¹å¼3ï¼šæ·»åŠ æœ€æ–°ç‰ˆæœ¬
go get github.com/gin-gonic/gin@latest
```

### 4.3 æ›´æ–°ä¾èµ–

```bash
# æ›´æ–°æ‰€æœ‰ä¾èµ–åˆ°æœ€æ–°å°ç‰ˆæœ¬
go get -u ./...

# æ›´æ–°ç‰¹å®šä¾èµ–
go get -u github.com/gin-gonic/gin

# æŸ¥çœ‹å¯ç”¨æ›´æ–°
go list -u -m all
```

---

## 5. ğŸ¯ æœ€ä½³å®è·µ

### âœ… æ¨èåšæ³•

1. **å®šæœŸæ‰§è¡Œgo mod tidy**

   ```bash
   go mod tidy
   ```

   - æ¸…ç†æœªä½¿ç”¨çš„ä¾èµ–
   - æ·»åŠ ç¼ºå°‘çš„ä¾èµ–

2. **æäº¤go.modå’Œgo.sumåˆ°ç‰ˆæœ¬æ§åˆ¶**

   ```bash
   git add go.mod go.sum
   ```

3. **æ˜ç¡®æŒ‡å®šGoç‰ˆæœ¬**

   ```go
   Go 1.25.3
   ```

4. **ä½¿ç”¨replaceè¿›è¡Œæœ¬åœ°å¼€å‘**

   ```go
   replace github.com/myorg/lib => ../lib
   ```

5. **ä¸ºreplaceæ·»åŠ æ³¨é‡Š**

   ```go
   replace (
       // ä¿®å¤issue #123
       github.com/old/pkg => github.com/new/pkg v1.2.3
   )
   ```

### âŒ é¿å…çš„åšæ³•

1. âŒ ä¸æäº¤go.modåˆ°ç‰ˆæœ¬æ§åˆ¶
2. âŒ æ‰‹åŠ¨ç¼–è¾‘ç‰ˆæœ¬å·è€Œä¸ä½¿ç”¨go get
3. âŒ åœ¨ç”Ÿäº§ä»£ç ä¸­ä½¿ç”¨replaceæŒ‡å‘æœ¬åœ°è·¯å¾„
4. âŒ å¿½ç•¥go.sumæ–‡ä»¶

---

## 6. âš ï¸ å¸¸è§é—®é¢˜

### Q1: go.modä¸­çš„// indirectæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

**A**: `// indirect`è¡¨ç¤ºé—´æ¥ä¾èµ–ï¼Œå³ä¸æ˜¯ä½ çš„ä»£ç ç›´æ¥å¯¼å…¥çš„ä¾èµ–ï¼Œè€Œæ˜¯é€šè¿‡å…¶ä»–ä¾èµ–å¼•å…¥çš„ã€‚

### Q2: å¦‚ä½•å¤„ç†ä¾èµ–å†²çªï¼Ÿ

**A**: ä½¿ç”¨`replace`æŒ‡ä»¤ç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬ï¼š

```go
replace github.com/conflicting/pkg => github.com/conflicting/pkg v1.2.3
```

### Q3: ä¸ºä»€ä¹ˆæœ‰äº›ä¾èµ–æ˜¾ç¤º+incompatibleï¼Ÿ

**A**: è¿™è¡¨ç¤ºè¯¥ä¾èµ–åœ¨v2+ç‰ˆæœ¬ä½†æ²¡æœ‰ä½¿ç”¨Go modulesï¼ŒæŒ‰ç…§v1å¤„ç†ã€‚

### Q4: å¦‚ä½•ä½¿ç”¨æœ¬åœ°ä¾èµ–è¿›è¡Œå¼€å‘ï¼Ÿ

**A**: ä½¿ç”¨`replace`æŒ‡ä»¤ï¼š

```go
replace github.com/myorg/pkg => ../local/pkg
```

**æ³¨æ„**: å‘å¸ƒå‰åº”åˆ é™¤æ­¤replaceæŒ‡ä»¤ã€‚

---

## 7. ğŸ“š æ‰©å±•é˜…è¯»

### å®˜æ–¹æ–‡æ¡£

- [Go Modules Reference](https://go.dev/ref/mod)
- [go.mod file reference](https://go.dev/doc/modules/gomod-ref)

### ç›¸å…³æ–‡æ¡£

- [01-Go-Modulesç®€ä»‹.md](./01-Go-Modulesç®€ä»‹.md)
- [03-go-sumæ–‡ä»¶è¯¦è§£.md](./03-go-sumæ–‡ä»¶è¯¦è§£.md)
- [05-go-modå‘½ä»¤.md](./05-go-modå‘½ä»¤.md)

---

**æ–‡æ¡£ç»´æŠ¤è€…**: Go Documentation Team
**æœ€åæ›´æ–°**: 2025-10-29
**æ–‡æ¡£çŠ¶æ€**: å®Œæˆ
**é€‚ç”¨ç‰ˆæœ¬**: Go 1.25.3+
