# Go基本语法

**版本**: v1.0  
**更新日期**: 2025-10-29  
**适用于**: Go 1.25.3

---

## 📋 目录

- [1. 变量声明](#1.-变量声明)
  - [声明方式](#声明方式)
  - [多变量声明](#多变量声明)
  - [匿名变量](#匿名变量)
- [2. 常量](#2.-常量)
  - [声明常量](#声明常量)
  - [iota枚举](#iota枚举)
- [3. 数据类型](#3.-数据类型)
  - [基本类型](#基本类型)
  - [类型转换](#类型转换)
- [4. 零值](#4.-零值)
  - [各类型的零值](#各类型的零值)
  - [零值的应用](#零值的应用)
- [5. 作用域](#5.-作用域)
  - [块级作用域](#块级作用域)
  - [变量遮蔽](#变量遮蔽)
  - [可见性规则](#可见性规则)
- [🎯 最佳实践](#最佳实践)
  - [1. 优先使用短变量声明](#1.-优先使用短变量声明)
  - [2. 合理使用零值](#2.-合理使用零值)
  - [3. 批量声明相关变量](#3.-批量声明相关变量)
  - [4. 避免不必要的类型转换](#4.-避免不必要的类型转换)
- [🔗 相关资源](#相关资源)

## 1. 变量声明

### 声明方式

```go
// 方式1: var关键字
var name string
var age int
var isActive bool

// 方式2: 带初始值
var name string = "Alice"
var age int = 25

// 方式3: 类型推断
var name = "Alice"
var age = 25

// 方式4: 短变量声明（只能在函数内）
name := "Alice"
age := 25

// 方式5: 批量声明
var (
    name    string = "Alice"
    age     int    = 25
    isActive bool   = true
)
```

---

### 多变量声明

```go
// 同类型多变量
var a, b, c int
var x, y, z = 1, 2, 3

// 不同类型
var name, age = "Alice", 25

// 短变量声明
name, age := "Alice", 25

// 交换变量
a, b = b, a
```

---

### 匿名变量

```go
// 使用_忽略不需要的返回值
value, _ := someFunction()

// 忽略错误（不推荐）
data, _ := os.ReadFile("file.txt")

// 只检查错误
_, err := someFunction()
if err != nil {
    // 处理错误
}
```

---

## 2. 常量

### 声明常量

```go
// 单个常量
const Pi = 3.14159
const AppName = "MyApp"

// 批量声明
const (
    StatusOK       = 200
    StatusNotFound = 404
    StatusError    = 500
)

// 类型化常量
const Port int = 8080
const Timeout time.Duration = 30 * time.Second
```

---

### iota枚举

```go
// 基本用法
const (
    Sunday = iota     // 0
    Monday            // 1
    Tuesday           // 2
    Wednesday         // 3
    Thursday          // 4
    Friday            // 5
    Saturday          // 6
)

// 跳过值
const (
    _ = iota          // 0 (跳过)
    KB = 1 << (10 * iota)  // 1 << 10 = 1024
    MB                     // 1 << 20 = 1048576
    GB                     // 1 << 30 = 1073741824
)

// 表达式
const (
    FlagRead = 1 << iota   // 1
    FlagWrite              // 2
    FlagExecute            // 4
)

// 多个iota
const (
    a, b = iota, iota * 10  // 0, 0
    c, d                     // 1, 10
    e, f                     // 2, 20
)
```

---

## 3. 数据类型

### 基本类型

```go
// 布尔型
var isActive bool = true

// 整数型
var i8 int8 = 127            // -128 到 127
var i16 int16 = 32767         // -32768 到 32767
var i32 int32 = 2147483647    // -2^31 到 2^31-1
var i64 int64 = 9223372036854775807

// 无符号整数
var u8 uint8 = 255            // 0 到 255
var u16 uint16 = 65535        // 0 到 65535
var u32 uint32 = 4294967295   // 0 到 2^32-1
var u64 uint64 = 18446744073709551615

// 平台相关整数
var i int      // 32位或64位
var u uint     // 32位或64位
var ptr uintptr  // 存放指针的整数

// 浮点型
var f32 float32 = 3.14
var f64 float64 = 3.141592653589793

// 复数
var c64 complex64 = 1 + 2i
var c128 complex128 = 1 + 2i

// 字符串
var str string = "Hello, Go!"

// 字节
var b byte = 'A'    // byte是uint8的别名
var r rune = '中'   // rune是int32的别名，表示Unicode码点
```

---

### 类型转换

```go
// 显式类型转换
var i int = 42
var f float64 = float64(i)
var u uint = uint(f)

// 字符串转换
str := "123"
num, _ := strconv.Atoi(str)           // string to int
str2 := strconv.Itoa(num)             // int to string
f, _ := strconv.ParseFloat("3.14", 64) // string to float64

// 字节切片和字符串
str := "Hello"
bytes := []byte(str)    // string to []byte
str2 := string(bytes)   // []byte to string
```

---

## 4. 零值

### 各类型的零值

```go
var i int        // 0
var f float64    // 0.0
var b bool       // false
var s string     // ""
var p *int       // nil
var sl []int     // nil
var m map[string]int  // nil
var ch chan int  // nil
var fn func()    // nil
var iface interface{}  // nil

// 结构体的零值是所有字段的零值
type User struct {
    Name string
    Age  int
}
var u User  // User{Name: "", Age: 0}
```

---

### 零值的应用

```go
// 安全的默认值
var count int  // 自动初始化为0

// 需要检查nil
var users []User
if users == nil {
    users = make([]User, 0)
}

// map需要初始化才能使用
var m map[string]int
// m["key"] = 1  // panic: assignment to entry in nil map

m = make(map[string]int)  // 正确
m["key"] = 1
```

---

## 5. 作用域

### 块级作用域

```go
package main

// 包级变量（全局）
var global = "I'm global"

func main() {
    // 函数级变量
    local := "I'm local"
    
    // 块级作用域
    {
        inner := "I'm in a block"
        fmt.Println(inner)  // ✅ 可以访问
    }
    // fmt.Println(inner)  // ❌ 编译错误
    
    // if块
    if x := 10; x > 5 {
        fmt.Println(x)  // ✅ 可以访问
    }
    // fmt.Println(x)  // ❌ 编译错误
    
    // for块
    for i := 0; i < 5; i++ {
        fmt.Println(i)  // ✅ 可以访问
    }
    // fmt.Println(i)  // ❌ 编译错误
}
```

---

### 变量遮蔽

```go
var x = 10  // 包级变量

func main() {
    fmt.Println(x)  // 10
    
    x := 20  // 遮蔽包级变量
    fmt.Println(x)  // 20
    
    {
        x := 30  // 遮蔽函数级变量
        fmt.Println(x)  // 30
    }
    
    fmt.Println(x)  // 20
}
```

---

### 可见性规则

```go
// 大写字母开头：导出（public）
var PublicVar = "I'm exported"
type PublicType struct {}
func PublicFunc() {}

// 小写字母开头：未导出（private）
var privateVar = "I'm private"
type privateType struct {}
func privateFunc() {}
```

---

## 🎯 最佳实践

### 1. 优先使用短变量声明

```go
// ✅ 推荐
name := "Alice"
age := 25

// ❌ 不推荐（在函数内）
var name string = "Alice"
var age int = 25
```

---

### 2. 合理使用零值

```go
// ✅ 利用零值
var count int  // 自动为0

// ❌ 不必要的初始化
var count int = 0
```

---

### 3. 批量声明相关变量

```go
// ✅ 推荐
var (
    host   = "localhost"
    port   = 8080
    debug  = true
)

// ❌ 不推荐
var host = "localhost"
var port = 8080
var debug = true
```

---

### 4. 避免不必要的类型转换

```go
// ✅ 推荐
const timeout = 30 * time.Second

// ❌ 不推荐
const timeout = time.Duration(30) * time.Second
```

---

## 🔗 相关资源

- [数据类型](./02-数据类型.md)
- [运算符](./03-运算符.md)
- [流程控制](./04-流程控制.md)

---

**最后更新**: 2025-10-29  
**Go版本**: 1.25.3
