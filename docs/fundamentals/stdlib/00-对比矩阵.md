# Go标准库 - 对比矩阵

**版本**: v1.0  
**更新日期**: 2025-10-28  
**适用于**: Go 1.25.3  
**文件夹**: fundamentals/stdlib

---

## 📋 目录

- [1. 核心包对比](#1-核心包对比)
- [2. I/O包对比](#2-io包对比)
- [3. 编码包对比](#3-编码包对比)
- [4. 网络包对比](#4-网络包对比)
- [5. 并发包对比](#5-并发包对比)
- [6. 与其他语言标准库对比](#6-与其他语言标准库对比)

---

## 1. 核心包对比

### 1.1 fmt vs log vs errors

| 维度 | fmt | log | errors |
|------|-----|-----|--------|
| **用途** | 格式化I/O | 日志记录 | 错误创建 |
| **输出目标** | 可自定义 | stderr | N/A |
| **时间戳** | 否 | 是 | N/A |
| **前缀** | 否 | 可配置 | N/A |
| **错误处理** | 返回error | 可Fatal/Panic | 创建error |
| **使用场景** | 通用输出 | 应用日志 | 错误传递 |

**示例**:
```go
// fmt - 通用输出
fmt.Println("Hello")
fmt.Errorf("error: %v", err)

// log - 日志
log.Println("Info message")
log.Fatal("Fatal error")

// errors - 错误创建
err := errors.New("something wrong")
err2 := fmt.Errorf("wrapped: %w", err)
```

### 1.2 strings vs bytes

| 维度 | strings | bytes |
|------|---------|-------|
| **操作对象** | string | []byte |
| **不可变性** | 不可变 | 可变 |
| **性能** | 创建时需要复制 | 原地修改 |
| **API** | 几乎相同 | 几乎相同 |
| **转换** | `[]byte(s)` | `string(b)` |
| **使用场景** | 文本处理 | 二进制/性能敏感 |

**选择建议**:
```go
// strings - 文本处理
result := strings.ToUpper("hello")  // 不可变

// bytes - 二进制数据、性能优化
buf := []byte("hello")
buf[0] = 'H'  // 原地修改
```

---

## 2. I/O包对比

### 2.1 io.Reader vs io.Writer vs io.Closer

| 接口 | 方法 | 用途 | 常见实现 |
|------|------|------|---------|
| **Reader** | `Read([]byte) (int, error)` | 读取数据 | File, Buffer, HTTP Body |
| **Writer** | `Write([]byte) (int, error)` | 写入数据 | File, Buffer, HTTP Response |
| **Closer** | `Close() error` | 关闭资源 | File, Connection |
| **ReadWriter** | Reader + Writer | 读写 | Connection, Buffer |
| **ReadCloser** | Reader + Closer | 读+关闭 | HTTP Body |

**组合模式**:
```go
// io.ReadCloser 常见于HTTP
resp, _ := http.Get(url)
defer resp.Body.Close()  // io.ReadCloser

// io.Copy 连接Reader和Writer
io.Copy(dst io.Writer, src io.Reader)
```

### 2.2 os.File vs bytes.Buffer vs strings.Reader

| 维度 | os.File | bytes.Buffer | strings.Reader |
|------|---------|--------------|----------------|
| **数据源** | 文件系统 | 内存 | 内存（只读） |
| **读写** | 读写 | 读写 | 只读 |
| **性能** | 慢（I/O） | 快（内存） | 最快（只读） |
| **容量** | 磁盘大小 | 内存限制 | 内存限制 |
| **使用场景** | 文件操作 | 内存缓冲 | 字符串读取 |

---

## 3. 编码包对比

### 3.1 JSON vs XML vs Gob

| 维度 | encoding/json | encoding/xml | encoding/gob |
|------|--------------|--------------|--------------|
| **格式** | 文本（JSON） | 文本（XML） | 二进制 |
| **可读性** | 高 | 中 | 无（二进制） |
| **大小** | 中等 | 大 | 小 |
| **速度** | 快 | 慢 | 最快 |
| **跨语言** | 是 | 是 | 否（Go专用） |
| **使用场景** | API、配置 | 配置、文档 | Go内部通信 |

**性能对比**:
```text
编码速度: gob > json > xml
解码速度: gob > json > xml
文件大小: gob < json < xml
通用性:   xml = json > gob
```

**选择建议**:
```go
// JSON - API开发（推荐）
json.Marshal(data)

// XML - 需要XML格式时
xml.Marshal(data)

// Gob - Go程序间通信
gob.NewEncoder(conn).Encode(data)
```

### 3.2 Base64 vs Hex

| 维度 | base64 | hex |
|------|--------|-----|
| **编码率** | 133% (4/3) | 200% (2/1) |
| **可读性** | 低 | 高 |
| **字符集** | A-Za-z0-9+/ | 0-9a-f |
| **使用场景** | 数据传输 | 调试、显示 |

---

## 4. 网络包对比

### 4.1 net vs net/http

| 维度 | net | net/http |
|------|-----|----------|
| **层级** | TCP/UDP | HTTP |
| **复杂度** | 低级 | 高级 |
| **协议** | TCP, UDP | HTTP/1.1, HTTP/2 |
| **易用性** | 中 | 高 |
| **使用场景** | 自定义协议 | Web服务 |

**示例**:
```go
// net - TCP服务器
ln, _ := net.Listen("tcp", ":8080")
conn, _ := ln.Accept()
conn.Write([]byte("Hello"))

// net/http - HTTP服务器
http.HandleFunc("/", handler)
http.ListenAndServe(":8080", nil)
```

### 4.2 http.Client vs http.Server

| 维度 | http.Client | http.Server |
|------|------------|-------------|
| **角色** | 客户端 | 服务器 |
| **超时** | 请求超时 | 读写超时 |
| **连接池** | 自动管理 | N/A |
| **中间件** | Transport | Handler |

---

## 5. 并发包对比

### 5.1 sync.Mutex vs sync.RWMutex

| 维度 | Mutex | RWMutex |
|------|-------|---------|
| **读锁** | 不区分 | 支持 |
| **写锁** | 独占 | 独占 |
| **并发读** | 否 | 是 |
| **性能（读多）** | 低 | 高 |
| **复杂度** | 低 | 中 |

### 5.2 sync.WaitGroup vs context.Context

| 维度 | WaitGroup | Context |
|------|-----------|---------|
| **用途** | 等待完成 | 取消控制 |
| **方向** | 子→父 | 父→子 |
| **超时** | 无 | 有 |
| **取消** | 无 | 有 |

---

## 6. 与其他语言标准库对比

### 6.1 Go vs Python

| 维度 | Go | Python |
|------|----|----|
| **I/O** | io包（接口）| io模块（类） |
| **HTTP** | net/http（内置）| http（标准库）|
| **JSON** | encoding/json | json |
| **并发** | goroutine+channel | threading+queue |
| **易用性** | 中 | 高 |
| **性能** | 极高 | 低 |

### 6.2 Go vs Java

| 维度 | Go | Java |
|------|----|----|
| **HTTP** | net/http（简单）| java.net.http（复杂）|
| **JSON** | encoding/json | Jackson/Gson（库）|
| **并发** | 轻量级 | 重量级 |
| **包数量** | 精简（~150） | 庞大（~4000+）|

**Go标准库优势**:
- ✅ 精简而强大
- ✅ 设计统一
- ✅ 并发原生支持
- ✅ 性能优秀

---

## 📊 选择指南

### 常见任务包选择

| 任务 | 推荐包 | 备选 |
|------|-------|------|
| Web API | net/http + encoding/json | - |
| 文件操作 | os + io | bufio |
| 文本处理 | strings | regexp |
| 数据序列化 | encoding/json | encoding/gob |
| 加密 | crypto/* | - |
| 并发控制 | sync + context | channel |
| 日志 | log/slog | log |

---

## 🔗 相关文档

- [00-知识图谱.md](./00-知识图谱.md)
- [00-概念定义体系.md](./00-概念定义体系.md)
- [README.md](./README.md)

---

**最后更新**: 2025-10-28  
**维护者**: Go形式化理论体系项目组

---

> **对比中理解标准库，选择中掌握最佳实践** 📊

