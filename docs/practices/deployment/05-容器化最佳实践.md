# ÂÆπÂô®ÂåñÊúÄ‰Ω≥ÂÆûË∑µ

## üìã ÁõÆÂΩï


- [1. DockerfileÊúÄ‰Ω≥ÂÆûË∑µ](#1-dockerfileÊúÄ‰Ω≥ÂÆûË∑µ)
  - [Âü∫Á°ÄDockerfile](#Âü∫Á°Ädockerfile)
  - [Â§öÈò∂ÊÆµÊûÑÂª∫ÔºàÊé®ËçêÔºâ](#Â§öÈò∂ÊÆµÊûÑÂª∫Êé®Ëçê)
  - [ÊúÄÂ∞èÂåñÈïúÂÉèÔºàDistrolessÔºâ](#ÊúÄÂ∞èÂåñÈïúÂÉèdistroless)
- [2. ÈïúÂÉè‰ºòÂåñ](#2-ÈïúÂÉè‰ºòÂåñ)
  - [Â±ÇÁºìÂ≠ò‰ºòÂåñ](#Â±ÇÁºìÂ≠ò‰ºòÂåñ)
  - [.dockerignore](#dockerignore)
  - [ÂéãÁº©ÊäÄÂ∑ß](#ÂéãÁº©ÊäÄÂ∑ß)
  - [ÊÄßËÉΩÂØπÊØî](#ÊÄßËÉΩÂØπÊØî)
- [3. ÂÆâÂÖ®Âä†Âõ∫](#3-ÂÆâÂÖ®Âä†Âõ∫)
  - [ÈùûrootÁî®Êà∑](#ÈùûrootÁî®Êà∑)
  - [Êâ´ÊèèÊºèÊ¥û](#Êâ´ÊèèÊºèÊ¥û)
  - [ÊúÄÂ∞èÂåñÊîªÂáªÈù¢](#ÊúÄÂ∞èÂåñÊîªÂáªÈù¢)
  - [ÊïèÊÑü‰ø°ÊÅØÂ§ÑÁêÜ](#ÊïèÊÑü‰ø°ÊÅØÂ§ÑÁêÜ)
- [4. Â§öÊû∂ÊûÑÊûÑÂª∫](#4-Â§öÊû∂ÊûÑÊûÑÂª∫)
  - [‰ΩøÁî®Docker Buildx](#‰ΩøÁî®docker-buildx)
  - [DockerfileÂ§öÊû∂ÊûÑ](#dockerfileÂ§öÊû∂ÊûÑ)
- [5. Docker Compose](#5-docker-compose)
  - [ÂºÄÂèëÁéØÂ¢ÉÈÖçÁΩÆ](#ÂºÄÂèëÁéØÂ¢ÉÈÖçÁΩÆ)
  - [Áîü‰∫ßÁéØÂ¢ÉÈÖçÁΩÆ](#Áîü‰∫ßÁéØÂ¢ÉÈÖçÁΩÆ)
- [6. ÂÅ•Â∫∑Ê£ÄÊü•](#6-ÂÅ•Â∫∑Ê£ÄÊü•)
  - [Â∫îÁî®Â±ÇÂÅ•Â∫∑Ê£ÄÊü•](#Â∫îÁî®Â±ÇÂÅ•Â∫∑Ê£ÄÊü•)
  - [DockerfileÂÅ•Â∫∑Ê£ÄÊü•](#dockerfileÂÅ•Â∫∑Ê£ÄÊü•)
  - [Docker ComposeÂÅ•Â∫∑Ê£ÄÊü•](#docker-composeÂÅ•Â∫∑Ê£ÄÊü•)
- [7. Êó•ÂøóÁÆ°ÁêÜ](#7-Êó•ÂøóÁÆ°ÁêÜ)
  - [Êó•ÂøóËæìÂá∫](#Êó•ÂøóËæìÂá∫)
  - [DockerÊó•ÂøóÈÖçÁΩÆ](#dockerÊó•ÂøóÈÖçÁΩÆ)
  - [Êó•ÂøóËÅöÂêà](#Êó•ÂøóËÅöÂêà)
- [8. ÊÄßËÉΩ‰ºòÂåñ](#8-ÊÄßËÉΩ‰ºòÂåñ)
  - [ËµÑÊ∫êÈôêÂà∂](#ËµÑÊ∫êÈôêÂà∂)
  - [ÁΩëÁªú‰ºòÂåñ](#ÁΩëÁªú‰ºòÂåñ)
  - [Â≠òÂÇ®‰ºòÂåñ](#Â≠òÂÇ®‰ºòÂåñ)
  - [ÊÄßËÉΩÂØπÊØî](#ÊÄßËÉΩÂØπÊØî)
- [üíº ÂÆûÊàòÊ°à‰æã](#-ÂÆûÊàòÊ°à‰æã)
  - [Ê°à‰æã: ÂæÆÊúçÂä°ÂÆπÂô®Âåñ](#Ê°à‰æã-ÂæÆÊúçÂä°ÂÆπÂô®Âåñ)
- [üìã Ê£ÄÊü•Ê∏ÖÂçï](#-Ê£ÄÊü•Ê∏ÖÂçï)
  - [ÊûÑÂª∫Ê£ÄÊü•](#ÊûÑÂª∫Ê£ÄÊü•)
  - [ÂÆâÂÖ®Ê£ÄÊü•](#ÂÆâÂÖ®Ê£ÄÊü•)
  - [ËøêË°åÊó∂Ê£ÄÊü•](#ËøêË°åÊó∂Ê£ÄÊü•)
- [üîó Áõ∏ÂÖ≥ËµÑÊ∫ê](#-Áõ∏ÂÖ≥ËµÑÊ∫ê)

## 1. DockerfileÊúÄ‰Ω≥ÂÆûË∑µ

### Âü∫Á°ÄDockerfile

```dockerfile
# ‚ùå ‰∏çÊé®Ëçê
FROM golang:latest
WORKDIR /app
COPY . .
RUN go build -o app
CMD ["./app"]
```

**ÈóÆÈ¢ò**:
- ‰ΩøÁî®latestÊ†áÁ≠æÔºà‰∏çÂèØÂ§çÁé∞Ôºâ
- ÈïúÂÉè‰ΩìÁßØÂ§ßÔºà>800MBÔºâ
- ÊûÑÂª∫ÁºìÂ≠òÊïàÁéá‰Ωé
- ËøêË°åÊó∂ÂåÖÂê´ÊûÑÂª∫Â∑•ÂÖ∑

---

### Â§öÈò∂ÊÆµÊûÑÂª∫ÔºàÊé®ËçêÔºâ

```dockerfile
# ‚úÖ Êé®Ëçê: Â§öÈò∂ÊÆµÊûÑÂª∫
# Èò∂ÊÆµ1: ÊûÑÂª∫
FROM golang:1.25.3-alpine AS builder

# ÂÆâË£ÖÂøÖË¶ÅÁöÑÊûÑÂª∫Â∑•ÂÖ∑
RUN apk add --no-cache git make ca-certificates tzdata

WORKDIR /build

# 1. ÂÖàÂ§çÂà∂‰æùËµñÊñá‰ª∂ÔºàÂÖÖÂàÜÂà©Áî®DockerÁºìÂ≠òÔºâ
COPY go.mod go.sum ./
RUN go mod download && go mod verify

# 2. ÂÜçÂ§çÂà∂Ê∫ê‰ª£Á†Å
COPY . .

# 3. ÊûÑÂª∫
RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build \
    -ldflags="-w -s \
    -X main.version=${VERSION:-dev} \
    -X main.commit=${COMMIT:-unknown} \
    -X main.buildTime=$(date -u '+%Y-%m-%d_%H:%M:%S')" \
    -trimpath \
    -o app \
    ./cmd/app

# Èò∂ÊÆµ2: ËøêË°å
FROM alpine:3.19

# ÂÆâË£ÖËøêË°åÊó∂‰æùËµñ
RUN apk --no-cache add ca-certificates tzdata && \
    # ÂàõÂª∫ÈùûrootÁî®Êà∑
    addgroup -g 1000 appuser && \
    adduser -D -u 1000 -G appuser appuser

WORKDIR /app

# ‰ªébuilderÂ§çÂà∂ÂøÖË¶ÅÊñá‰ª∂
COPY --from=builder /build/app ./
COPY --from=builder /usr/share/zoneinfo /usr/share/zoneinfo
COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/

# Â§çÂà∂ÈÖçÁΩÆÊñá‰ª∂
COPY configs/ ./configs/

# ËÆæÁΩÆÊó∂Âå∫
ENV TZ=Asia/Shanghai

# ÂàáÊç¢Âà∞ÈùûrootÁî®Êà∑
USER appuser

EXPOSE 8080

# ÂÅ•Â∫∑Ê£ÄÊü•
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD ["/app/app", "healthcheck"] || exit 1

ENTRYPOINT ["/app/app"]
CMD ["serve"]
```

**‰ºòÂäø**:
- ÈïúÂÉèÂ§ßÂ∞è: 800MB ‚Üí 15MB (53xÂáèÂ∞ë)
- ÊûÑÂª∫ÁºìÂ≠ò‰ºòÂåñ
- ÂÆâÂÖ®ÔºöÈùûrootÁî®Êà∑ËøêË°å
- ÂèØÂ§çÁé∞Ôºö‰ΩøÁî®Âõ∫ÂÆöÁâàÊú¨Ê†áÁ≠æ

---

### ÊúÄÂ∞èÂåñÈïúÂÉèÔºàDistrolessÔºâ

```dockerfile
# ‚úÖ ÊúÄ‰Ω≥: ‰ΩøÁî®Distroless
FROM golang:1.25.3-alpine AS builder

WORKDIR /build

COPY go.mod go.sum ./
RUN go mod download

COPY . .

RUN CGO_ENABLED=0 go build -ldflags="-w -s" -o app ./cmd/app

# ‰ΩøÁî®Google DistrolessÔºàÊúÄÂ∞èÂåñÈïúÂÉèÔºâ
FROM gcr.io/distroless/static:nonroot

WORKDIR /app

COPY --from=builder /build/app ./
COPY --from=builder --chown=nonroot:nonroot /build/configs ./configs

USER nonroot:nonroot

EXPOSE 8080

ENTRYPOINT ["/app/app"]
```

**ÈïúÂÉèÂ§ßÂ∞èÂØπÊØî**:
- golang:1.25.3: 820MB
- alpine: 15MB
- distroless: 5MB ‚ù§Ô∏è

---

## 2. ÈïúÂÉè‰ºòÂåñ

### Â±ÇÁºìÂ≠ò‰ºòÂåñ

```dockerfile
# ‚ùå ‰∏çÂ•Ω: ‰∏ÄÊ¨°ÊÄßÂ§çÂà∂ÊâÄÊúâÊñá‰ª∂
COPY . .
RUN go mod download
RUN go build

# ‚úÖ Â•Ω: ÂàÜÂ±ÇÂ§çÂà∂ÔºåÂÖÖÂàÜÂà©Áî®ÁºìÂ≠ò
COPY go.mod go.sum ./
RUN go mod download  # Âè™Êúâ‰æùËµñÂèòÂåñÊó∂ÊâçÈáçÊñ∞ÊâßË°å

COPY . .
RUN go build         # Âè™Êúâ‰ª£Á†ÅÂèòÂåñÊó∂ÊâçÈáçÊñ∞ÊâßË°å
```

### .dockerignore

```
# .dockerignore
# ÁâàÊú¨ÊéßÂà∂
.git
.gitignore

# IDE
.vscode
.idea
*.swp

# ÊµãËØïÂíåÊñáÊ°£
*_test.go
*.md
docs/

# ‰æùËµñ
vendor/

# ÊûÑÂª∫‰∫ßÁâ©
*.exe
*.dll
*.so
*.dylib
dist/
bin/

# Êó•ÂøóÂíå‰∏¥Êó∂Êñá‰ª∂
*.log
tmp/
*.tmp

# CI/CD
.github
.gitlab-ci.yml
Jenkinsfile
```

### ÂéãÁº©ÊäÄÂ∑ß

```dockerfile
# ‚ùå ÊØè‰∏™RUNÈÉΩ‰ºöÂàõÂª∫‰∏ÄÂ±Ç
RUN apk add --no-cache git
RUN apk add --no-cache make
RUN apk add --no-cache curl

# ‚úÖ ÂêàÂπ∂‰∏∫‰∏ÄÂ±ÇÔºåÂπ∂Ê∏ÖÁêÜÁºìÂ≠ò
RUN apk add --no-cache \
    git \
    make \
    curl && \
    rm -rf /var/cache/apk/*
```

### ÊÄßËÉΩÂØπÊØî

| ‰ºòÂåñÈ°π | ÊûÑÂª∫Êó∂Èó¥ | ÈïúÂÉèÂ§ßÂ∞è | Â±ÇÊï∞ |
|--------|----------|----------|------|
| ÂéüÂßã | 5min | 820MB | 15 |
| Â§öÈò∂ÊÆµ | 3min | 15MB | 8 |
| +ÁºìÂ≠ò‰ºòÂåñ | 30s | 15MB | 8 |
| +distroless | 30s | 5MB | 5 |

---

## 3. ÂÆâÂÖ®Âä†Âõ∫

### ÈùûrootÁî®Êà∑

```dockerfile
# ‚úÖ ÂàõÂª∫Âπ∂‰ΩøÁî®ÈùûrootÁî®Êà∑
RUN addgroup -g 1000 appuser && \
    adduser -D -u 1000 -G appuser appuser

# ËÆæÁΩÆÊñá‰ª∂ÊùÉÈôê
COPY --chown=appuser:appuser app /app/

USER appuser
```

### Êâ´ÊèèÊºèÊ¥û

```bash
# ‰ΩøÁî®TrivyÊâ´ÊèèÈïúÂÉè
trivy image myapp:latest

# ËæìÂá∫Á§∫‰æã
HIGH: 2
MEDIUM: 5
LOW: 10

# Êâ´ÊèèÂπ∂ÈòªÊ≠¢È´òÂç±ÊºèÊ¥û
trivy image --severity HIGH,CRITICAL --exit-code 1 myapp:latest
```

### ÊúÄÂ∞èÂåñÊîªÂáªÈù¢

```dockerfile
# ‚úÖ Âè™ÂÆâË£ÖÂøÖË¶ÅÁöÑÂåÖ
RUN apk add --no-cache ca-certificates

# ‚úÖ Âà†Èô§shellÔºàdistrolessËá™Âä®ÂÆûÁé∞Ôºâ
FROM gcr.io/distroless/static  # Êó†shell

# ‚úÖ Âè™ËØªÊñá‰ª∂Á≥ªÁªü
docker run --read-only myapp

# ‚úÖ ÈôêÂà∂capabilities
docker run --cap-drop=ALL --cap-add=NET_BIND_SERVICE myapp
```

### ÊïèÊÑü‰ø°ÊÅØÂ§ÑÁêÜ

```dockerfile
# ‚ùå ‰∏çË¶Å: Á°¨ÁºñÁ†ÅÂØÜÈí•
ENV API_KEY=secret123

# ‚úÖ ‰ΩøÁî®secrets
docker run --secret id=api_key,src=./api_key.txt myapp

# ‚úÖ ‰ΩøÁî®ÁéØÂ¢ÉÂèòÈáè
docker run -e API_KEY=$API_KEY myapp
```

---

## 4. Â§öÊû∂ÊûÑÊûÑÂª∫

### ‰ΩøÁî®Docker Buildx

```bash
# ÂàõÂª∫builder
docker buildx create --name multiarch --use

# ÊûÑÂª∫Â§öÊû∂ÊûÑÈïúÂÉè
docker buildx build \
    --platform linux/amd64,linux/arm64,linux/arm/v7 \
    -t myapp:latest \
    --push \
    .
```

### DockerfileÂ§öÊû∂ÊûÑ

```dockerfile
# Â§öÊû∂ÊûÑÊûÑÂª∫
FROM --platform=$BUILDPLATFORM golang:1.25.3-alpine AS builder

ARG TARGETOS
ARG TARGETARCH

WORKDIR /build

COPY go.mod go.sum ./
RUN go mod download

COPY . .

# Ê†πÊçÆÁõÆÊ†áÂπ≥Âè∞ÊûÑÂª∫
RUN CGO_ENABLED=0 GOOS=$TARGETOS GOARCH=$TARGETARCH \
    go build -o app ./cmd/app

FROM alpine:3.19

COPY --from=builder /build/app /app/

ENTRYPOINT ["/app/app"]
```

---

## 5. Docker Compose

### ÂºÄÂèëÁéØÂ¢ÉÈÖçÁΩÆ

```yaml
# docker-compose.yml
version: '3.9'

services:
  # Â∫îÁî®ÊúçÂä°
  app:
    build:
      context: .
      dockerfile: Dockerfile
      target: development
    ports:
      - "8080:8080"
    volumes:
      - .:/app
      - go-mod-cache:/go/pkg/mod
    environment:
      - DATABASE_URL=postgres://user:pass@db:5432/myapp
      - REDIS_URL=redis://redis:6379
    depends_on:
      db:
        condition: service_healthy
      redis:
        condition: service_started
    networks:
      - app-network

  # Êï∞ÊçÆÂ∫ì
  db:
    image: postgres:15-alpine
    ports:
      - "5432:5432"
    environment:
      POSTGRES_DB: myapp
      POSTGRES_USER: user
      POSTGRES_PASSWORD: pass
    volumes:
      - postgres-data:/var/lib/postgresql/data
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U user"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - app-network

  # Redis
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis-data:/data
    networks:
      - app-network

  # Nginx
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf:ro
      - ./ssl:/etc/nginx/ssl:ro
    depends_on:
      - app
    networks:
      - app-network

volumes:
  postgres-data:
  redis-data:
  go-mod-cache:

networks:
  app-network:
    driver: bridge
```

### Áîü‰∫ßÁéØÂ¢ÉÈÖçÁΩÆ

```yaml
# docker-compose.prod.yml
version: '3.9'

services:
  app:
    image: registry.example.com/myapp:${VERSION}
    deploy:
      replicas: 3
      resources:
        limits:
          cpus: '1'
          memory: 512M
        reservations:
          cpus: '0.5'
          memory: 256M
      restart_policy:
        condition: on-failure
        delay: 5s
        max_attempts: 3
    environment:
      - ENV=production
    secrets:
      - db_password
      - api_key
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"

secrets:
  db_password:
    external: true
  api_key:
    external: true
```

---

## 6. ÂÅ•Â∫∑Ê£ÄÊü•

### Â∫îÁî®Â±ÇÂÅ•Â∫∑Ê£ÄÊü•

```go
// healthcheck.go
package main

import (
    "context"
    "fmt"
    "net/http"
    "os"
    "time"
)

func main() {
    if len(os.Args) > 1 && os.Args[1] == "healthcheck" {
        if err := healthcheck(); err != nil {
            fmt.Fprintf(os.Stderr, "Health check failed: %v\n", err)
            os.Exit(1)
        }
        os.Exit(0)
    }
    
    // Ê≠£Â∏∏ÂêØÂä®...
}

func healthcheck() error {
    ctx, cancel := context.WithTimeout(context.Background(), 3*time.Second)
    defer cancel()
    
    req, _ := http.NewRequestWithContext(ctx, "GET", "http://localhost:8080/health", nil)
    resp, err := http.DefaultClient.Do(req)
    if err != nil {
        return err
    }
    defer resp.Body.Close()
    
    if resp.StatusCode != http.StatusOK {
        return fmt.Errorf("unexpected status: %d", resp.StatusCode)
    }
    
    return nil
}
```

### DockerfileÂÅ•Â∫∑Ê£ÄÊü•

```dockerfile
# Âü∫Á°ÄÂÅ•Â∫∑Ê£ÄÊü•
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:8080/health || exit 1

# ‰ΩøÁî®Ëá™ÂÆö‰πâÂëΩ‰ª§
HEALTHCHECK --interval=30s --timeout=3s \
    CMD ["/app/app", "healthcheck"]

# Á¶ÅÁî®ÁªßÊâøÁöÑÂÅ•Â∫∑Ê£ÄÊü•
HEALTHCHECK NONE
```

### Docker ComposeÂÅ•Â∫∑Ê£ÄÊü•

```yaml
services:
  app:
    healthcheck:
      test: ["CMD", "/app/app", "healthcheck"]
      interval: 30s
      timeout: 3s
      start_period: 40s
      retries: 3
    
  db:
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U user"]
      interval: 10s
      timeout: 5s
      retries: 5
```

---

## 7. Êó•ÂøóÁÆ°ÁêÜ

### Êó•ÂøóËæìÂá∫

```go
// ‚úÖ ËæìÂá∫Âà∞stdout/stderr
func main() {
    // Ê†áÂáÜÊó•ÂøóËæìÂá∫Âà∞stdout
    log.SetOutput(os.Stdout)
    
    // ÈîôËØØÊó•ÂøóËæìÂá∫Âà∞stderr
    errorLog := log.New(os.Stderr, "ERROR: ", log.LstdFlags)
    
    // ÁªìÊûÑÂåñÊó•Âøó
    logger := slog.New(slog.NewJSONHandler(os.Stdout, nil))
    logger.Info("Server started", "port", 8080)
}
```

### DockerÊó•ÂøóÈÖçÁΩÆ

```yaml
# docker-compose.yml
services:
  app:
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
        labels: "service=app"

  # ‰ΩøÁî®fluentd
  app-with-fluentd:
    logging:
      driver: "fluentd"
      options:
        fluentd-address: localhost:24224
        tag: app
```

### Êó•ÂøóËÅöÂêà

```yaml
# ‰ΩøÁî®ELK Stack
version: '3.9'

services:
  app:
    logging:
      driver: "fluentd"
      options:
        fluentd-address: fluentd:24224

  fluentd:
    image: fluent/fluentd:latest
    volumes:
      - ./fluentd.conf:/fluentd/etc/fluent.conf
    ports:
      - "24224:24224"
    depends_on:
      - elasticsearch

  elasticsearch:
    image: elasticsearch:8.11.0
    environment:
      - discovery.type=single-node
    ports:
      - "9200:9200"

  kibana:
    image: kibana:8.11.0
    ports:
      - "5601:5601"
    depends_on:
      - elasticsearch
```

---

## 8. ÊÄßËÉΩ‰ºòÂåñ

### ËµÑÊ∫êÈôêÂà∂

```yaml
# docker-compose.yml
services:
  app:
    deploy:
      resources:
        limits:
          cpus: '1.0'      # ÊúÄÂ§ö1‰∏™CPU
          memory: 512M     # ÊúÄÂ§ö512MBÂÜÖÂ≠ò
        reservations:
          cpus: '0.5'      # ‰øùËØÅ0.5‰∏™CPU
          memory: 256M     # ‰øùËØÅ256MBÂÜÖÂ≠ò
```

### ÁΩëÁªú‰ºòÂåñ

```dockerfile
# ‰ΩøÁî®hostÁΩëÁªúÔºàÊÄßËÉΩÊúÄ‰ºòÔºå‰ΩÜÂ§±ÂéªÈöîÁ¶ªÊÄßÔºâ
docker run --network host myapp

# ‰ΩøÁî®Ëá™ÂÆö‰πâÁΩëÁªúÔºàÊé®ËçêÔºâ
docker network create --driver bridge myapp-net
docker run --network myapp-net myapp
```

### Â≠òÂÇ®‰ºòÂåñ

```yaml
services:
  app:
    volumes:
      # ‰ΩøÁî®tmpfsÊèêÂçáÊÄßËÉΩÔºà‰∏¥Êó∂Êï∞ÊçÆÔºâ
      - type: tmpfs
        target: /tmp
        tmpfs:
          size: 100M
      
      # ‰ΩøÁî®volumeÔºàÊåÅ‰πÖÂåñÊï∞ÊçÆÔºâ
      - type: volume
        source: app-data
        target: /data
```

### ÊÄßËÉΩÂØπÊØî

| ÈÖçÁΩÆ | ÂêØÂä®Êó∂Èó¥ | ÂÜÖÂ≠ò‰ΩøÁî® | QPS |
|------|----------|----------|-----|
| ÈªòËÆ§ÈÖçÁΩÆ | 5s | 200MB | 5000 |
| +ËµÑÊ∫êÈôêÂà∂ | 5s | 150MB | 4800 |
| +ÁΩëÁªú‰ºòÂåñ | 3s | 150MB | 6000 |
| +Â≠òÂÇ®‰ºòÂåñ | 3s | 120MB | 6500 |

---

## üíº ÂÆûÊàòÊ°à‰æã

### Ê°à‰æã: ÂæÆÊúçÂä°ÂÆπÂô®Âåñ

**È°πÁõÆÁªìÊûÑ**:
```
myapp/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ worker/
‚îÇ   ‚îî‚îÄ‚îÄ cron/
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ deployments/
    ‚îú‚îÄ‚îÄ api.dockerfile
    ‚îú‚îÄ‚îÄ worker.dockerfile
    ‚îî‚îÄ‚îÄ k8s/
```

**Â§öÊúçÂä°Dockerfile**:

```dockerfile
# Dockerfile (ÂÖ±‰∫´Âü∫Á°Ä)
FROM golang:1.25.3-alpine AS base

WORKDIR /build
COPY go.mod go.sum ./
RUN go mod download
COPY . .

# APIÊúçÂä°
FROM base AS api-builder
RUN CGO_ENABLED=0 go build -o api ./cmd/api

FROM alpine:3.19 AS api
COPY --from=api-builder /build/api /app/api
ENTRYPOINT ["/app/api"]

# WorkerÊúçÂä°
FROM base AS worker-builder
RUN CGO_ENABLED=0 go build -o worker ./cmd/worker

FROM alpine:3.19 AS worker
COPY --from=worker-builder /build/worker /app/worker
ENTRYPOINT ["/app/worker"]

# CronÊúçÂä°
FROM base AS cron-builder
RUN CGO_ENABLED=0 go build -o cron ./cmd/cron

FROM alpine:3.19 AS cron
COPY --from=cron-builder /build/cron /app/cron
ENTRYPOINT ["/app/cron"]
```

**ÊûÑÂª∫ÂëΩ‰ª§**:
```bash
# ÊûÑÂª∫ÁâπÂÆöÊúçÂä°
docker build --target api -t myapp-api:latest .
docker build --target worker -t myapp-worker:latest .
docker build --target cron -t myapp-cron:latest .
```

---

## üìã Ê£ÄÊü•Ê∏ÖÂçï

### ÊûÑÂª∫Ê£ÄÊü•

- [ ] ‰ΩøÁî®Â§öÈò∂ÊÆµÊûÑÂª∫
- [ ] ‰ΩøÁî®Âõ∫ÂÆöÁâàÊú¨Ê†áÁ≠æ
- [ ] ‰ºòÂåñÂ±ÇÁºìÂ≠ò
- [ ] Ê∑ªÂä†.dockerignore
- [ ] ÈïúÂÉèÂ§ßÂ∞è<50MB

### ÂÆâÂÖ®Ê£ÄÊü•

- [ ] ‰ΩøÁî®ÈùûrootÁî®Êà∑
- [ ] Êâ´ÊèèÊºèÊ¥û
- [ ] ‰∏çÂåÖÂê´ÊïèÊÑü‰ø°ÊÅØ
- [ ] ÊúÄÂ∞èÂåñÊîªÂáªÈù¢
- [ ] ‰ΩøÁî®secretsÁÆ°ÁêÜÂØÜÈí•

### ËøêË°åÊó∂Ê£ÄÊü•

- [ ] ÈÖçÁΩÆÂÅ•Â∫∑Ê£ÄÊü•
- [ ] ËÆæÁΩÆËµÑÊ∫êÈôêÂà∂
- [ ] ÈÖçÁΩÆÊó•ÂøóËæìÂá∫
- [ ] ‰ºòÈõÖÂÖ≥Èó≠
- [ ] ÁõëÊéßÂíåÂëäË≠¶

---

## üîó Áõ∏ÂÖ≥ËµÑÊ∫ê

- [DockerÈÉ®ÁΩ≤](./02-DockerÈÉ®ÁΩ≤.md)
- [KubernetesÈÉ®ÁΩ≤](./03-KubernetesÈÉ®ÁΩ≤.md)
- [CI/CDÂÆûÊàò](./04-CI_CDÂÆûÊàòÊåáÂçó.md)

---

**ÊúÄÂêéÊõ¥Êñ∞**: 2025-10-28  
**GoÁâàÊú¨**: 1.25.3  
**ÊñáÊ°£Á±ªÂûã**: ÂÆπÂô®ÂåñÊúÄ‰Ω≥ÂÆûË∑µ ‚ú®

