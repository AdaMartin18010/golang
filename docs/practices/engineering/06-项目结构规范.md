# Goé¡¹ç›®ç»“æ„è§„èŒƒå®Œå…¨æŒ‡å—

> **ç®€ä»‹**: Goé¡¹ç›®ç›®å½•ç»“æ„çš„æœ€ä½³å®è·µï¼ŒåŒ…æ‹¬æ ‡å‡†å¸ƒå±€ã€ç›®å½•è¯´æ˜å’Œå®æˆ˜æ¡ˆä¾‹

---

## ğŸ“š ç›®å½•

- [Goé¡¹ç›®ç»“æ„è§„èŒƒå®Œå…¨æŒ‡å—](#goé¡¹ç›®ç»“æ„è§„èŒƒå®Œå…¨æŒ‡å—)
  - [ğŸ“š ç›®å½•](#-ç›®å½•)
  - [1. æ ‡å‡†é¡¹ç›®å¸ƒå±€](#1-æ ‡å‡†é¡¹ç›®å¸ƒå±€)
    - [Standard Go Project Layout](#standard-go-project-layout)
  - [2. ç›®å½•ç»“æ„è¯¦è§£](#2-ç›®å½•ç»“æ„è¯¦è§£)
    - [`/cmd` - ä¸»åº”ç”¨ç¨‹åº](#cmd---ä¸»åº”ç”¨ç¨‹åº)
    - [`/internal` - ç§æœ‰ä»£ç ](#internal---ç§æœ‰ä»£ç )
    - [`/pkg` - å…¬å…±åº“ä»£ç ](#pkg---å…¬å…±åº“ä»£ç )
    - [`/api` - APIå®šä¹‰](#api---apiå®šä¹‰)
    - [`/configs` - é…ç½®æ–‡ä»¶](#configs---é…ç½®æ–‡ä»¶)
    - [`/scripts` - è„šæœ¬](#scripts---è„šæœ¬)
    - [`/deployments` - éƒ¨ç½²é…ç½®](#deployments---éƒ¨ç½²é…ç½®)
  - [3. ä¸åŒè§„æ¨¡é¡¹ç›®ç»“æ„](#3-ä¸åŒè§„æ¨¡é¡¹ç›®ç»“æ„)
    - [å°å‹é¡¹ç›®ï¼ˆå•ä½“åº”ç”¨ï¼‰](#å°å‹é¡¹ç›®å•ä½“åº”ç”¨)
    - [ä¸­å‹é¡¹ç›®ï¼ˆåˆ†å±‚æ¶æ„ï¼‰](#ä¸­å‹é¡¹ç›®åˆ†å±‚æ¶æ„)
    - [å¤§å‹é¡¹ç›®ï¼ˆå¾®æœåŠ¡æ¶æ„ï¼‰](#å¤§å‹é¡¹ç›®å¾®æœåŠ¡æ¶æ„)
  - [4. æœ€ä½³å®è·µ](#4-æœ€ä½³å®è·µ)
    - [DO's âœ…](#dos-)
      - [1. åˆç†åˆ†å±‚](#1-åˆç†åˆ†å±‚)
      - [2. ä¾èµ–æ³¨å…¥](#2-ä¾èµ–æ³¨å…¥)
      - [3. æ¥å£å®šä¹‰](#3-æ¥å£å®šä¹‰)
      - [4. é…ç½®ç®¡ç†](#4-é…ç½®ç®¡ç†)
    - [DON'Ts âŒ](#donts-)
  - [5. å®æˆ˜æ¡ˆä¾‹](#5-å®æˆ˜æ¡ˆä¾‹)
    - [RESTful APIé¡¹ç›®](#restful-apié¡¹ç›®)
    - [Makefile](#makefile)

---

## 1. æ ‡å‡†é¡¹ç›®å¸ƒå±€

### Standard Go Project Layout

åŸºäº[golang-standards/project-layout](https://github.com/golang-standards/project-layout)çš„æ ‡å‡†å¸ƒå±€ï¼š

```text
myproject/
â”œâ”€â”€ cmd/                    # ä¸»åº”ç”¨ç¨‹åº
â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â””â”€â”€ main.go
â”‚   â””â”€â”€ cli/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/               # ç§æœ‰åº”ç”¨å’Œåº“ä»£ç 
â”‚   â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ pkg/
â”‚   â””â”€â”€ config/
â”œâ”€â”€ pkg/                    # å¯è¢«å¤–éƒ¨åº”ç”¨ä½¿ç”¨çš„åº“ä»£ç 
â”‚   â”œâ”€â”€ api/
â”‚   â””â”€â”€ utils/
â”œâ”€â”€ api/                    # APIå®šä¹‰æ–‡ä»¶
â”‚   â”œâ”€â”€ openapi/
â”‚   â”œâ”€â”€ protobuf/
â”‚   â””â”€â”€ graphql/
â”œâ”€â”€ web/                    # Webåº”ç”¨ç‰¹å®šç»„ä»¶
â”‚   â”œâ”€â”€ static/
â”‚   â””â”€â”€ templates/
â”œâ”€â”€ configs/                # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml
â”‚   â””â”€â”€ config.prod.yaml
â”œâ”€â”€ scripts/                # å„ç§æ„å»ºã€å®‰è£…ã€åˆ†æç­‰è„šæœ¬
â”‚   â”œâ”€â”€ build.sh
â”‚   â””â”€â”€ deploy.sh
â”œâ”€â”€ build/                  # æ‰“åŒ…å’ŒæŒç»­é›†æˆ
â”‚   â”œâ”€â”€ ci/
â”‚   â””â”€â”€ package/
â”œâ”€â”€ deployments/            # éƒ¨ç½²é…ç½®å’Œæ¨¡æ¿
â”‚   â”œâ”€â”€ docker/
â”‚   â””â”€â”€ kubernetes/
â”œâ”€â”€ test/                   # é¢å¤–çš„å¤–éƒ¨æµ‹è¯•åº”ç”¨å’Œæµ‹è¯•æ•°æ®
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ e2e/
â”œâ”€â”€ docs/                   # è®¾è®¡å’Œç”¨æˆ·æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture.md
â”‚   â””â”€â”€ api.md
â”œâ”€â”€ tools/                  # é¡¹ç›®çš„æ”¯æŒå·¥å…·
â”œâ”€â”€ vendor/                 # åº”ç”¨ä¾èµ–ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ Makefile
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ README.md
â””â”€â”€ LICENSE
```

---

## 2. ç›®å½•ç»“æ„è¯¦è§£

### `/cmd` - ä¸»åº”ç”¨ç¨‹åº

æ¯ä¸ªåº”ç”¨ç¨‹åºä¸€ä¸ªå­ç›®å½•ï¼Œç›®å½•ååº”è¯¥ä¸å¯æ‰§è¡Œæ–‡ä»¶åç§°åŒ¹é…ã€‚

```text
cmd/
â”œâ”€â”€ server/              # WebæœåŠ¡å™¨
â”‚   â””â”€â”€ main.go
â”œâ”€â”€ worker/              # åå°ä»»åŠ¡worker
â”‚   â””â”€â”€ main.go
â”œâ”€â”€ cli/                 # CLIå·¥å…·
â”‚   â””â”€â”€ main.go
â””â”€â”€ migrator/            # æ•°æ®åº“è¿ç§»å·¥å…·
    â””â”€â”€ main.go
```

**main.goç¤ºä¾‹**:

```go
// cmd/server/main.go
package main

import (
    "log"
    "myproject/internal/app"
    "myproject/internal/config"
)

func main() {
    // åŠ è½½é…ç½®
    cfg, err := config.Load()
    if err != nil {
        log.Fatal(err)
    }
    
    // åˆ›å»ºåº”ç”¨
    app := app.New(cfg)
    
    // å¯åŠ¨æœåŠ¡å™¨
    if err := app.Run(); err != nil {
        log.Fatal(err)
    }
}
```

### `/internal` - ç§æœ‰ä»£ç 

Goç¼–è¯‘å™¨å¼ºåˆ¶ï¼šå…¶ä»–é¡¹ç›®ä¸èƒ½å¯¼å…¥`internal`ç›®å½•ä¸­çš„ä»£ç ã€‚

```text
internal/
â”œâ”€â”€ app/                 # åº”ç”¨æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ server.go        # æœåŠ¡å™¨åˆå§‹åŒ–
â”‚   â””â”€â”€ app.go
â”œâ”€â”€ handler/             # HTTPå¤„ç†å™¨
â”‚   â”œâ”€â”€ user.go
â”‚   â””â”€â”€ product.go
â”œâ”€â”€ service/             # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ user.go
â”‚   â””â”€â”€ product.go
â”œâ”€â”€ repository/          # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ user.go
â”‚   â””â”€â”€ product.go
â”œâ”€â”€ model/               # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ user.go
â”‚   â””â”€â”€ product.go
â”œâ”€â”€ middleware/          # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.go
â”‚   â””â”€â”€ logging.go
â”œâ”€â”€ config/              # é…ç½®åŠ è½½
â”‚   â””â”€â”€ config.go
â””â”€â”€ pkg/                 # å†…éƒ¨å…±äº«åº“
    â”œâ”€â”€ errors/
    â”œâ”€â”€ logger/
    â””â”€â”€ validator/
```

### `/pkg` - å…¬å…±åº“ä»£ç 

å¯ä»¥è¢«å¤–éƒ¨é¡¹ç›®å®‰å…¨å¯¼å…¥çš„ä»£ç ã€‚

```text
pkg/
â”œâ”€â”€ api/                 # APIå®¢æˆ·ç«¯
â”‚   â””â”€â”€ client.go
â”œâ”€â”€ auth/                # è®¤è¯åº“
â”‚   â””â”€â”€ jwt.go
â”œâ”€â”€ cache/               # ç¼“å­˜åº“
â”‚   â””â”€â”€ redis.go
â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
    â”œâ”€â”€ strings.go
    â””â”€â”€ time.go
```

**âš ï¸ æ³¨æ„**: åªæ”¾ç½®çœŸæ­£å¯é‡ç”¨çš„ã€ç¨³å®šçš„ä»£ç ã€‚

### `/api` - APIå®šä¹‰

```text
api/
â”œâ”€â”€ openapi/
â”‚   â””â”€â”€ api.yaml         # OpenAPI/Swaggerè§„èŒƒ
â”œâ”€â”€ protobuf/
â”‚   â”œâ”€â”€ user.proto       # Protocol Bufferså®šä¹‰
â”‚   â””â”€â”€ product.proto
â””â”€â”€ graphql/
    â””â”€â”€ schema.graphql   # GraphQL Schema
```

### `/configs` - é…ç½®æ–‡ä»¶

```text
configs/
â”œâ”€â”€ config.yaml          # é»˜è®¤é…ç½®
â”œâ”€â”€ config.dev.yaml      # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ config.staging.yaml  # æµ‹è¯•ç¯å¢ƒ
â””â”€â”€ config.prod.yaml     # ç”Ÿäº§ç¯å¢ƒ
```

### `/scripts` - è„šæœ¬

```text
scripts/
â”œâ”€â”€ build.sh             # æ„å»ºè„šæœ¬
â”œâ”€â”€ test.sh              # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ deploy.sh            # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ migration.sh         # æ•°æ®åº“è¿ç§»
â””â”€â”€ lint.sh              # ä»£ç æ£€æŸ¥
```

### `/deployments` - éƒ¨ç½²é…ç½®

```text
deployments/
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â””â”€â”€ kubernetes/
    â”œâ”€â”€ deployment.yaml
    â”œâ”€â”€ service.yaml
    â””â”€â”€ ingress.yaml
```

---

## 3. ä¸åŒè§„æ¨¡é¡¹ç›®ç»“æ„

### å°å‹é¡¹ç›®ï¼ˆå•ä½“åº”ç”¨ï¼‰

```text
simple-app/
â”œâ”€â”€ main.go              # ä¸»å…¥å£
â”œâ”€â”€ handler.go           # HTTPå¤„ç†å™¨
â”œâ”€â”€ model.go             # æ•°æ®æ¨¡å‹
â”œâ”€â”€ service.go           # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ go.mod
â””â”€â”€ README.md
```

### ä¸­å‹é¡¹ç›®ï¼ˆåˆ†å±‚æ¶æ„ï¼‰

```text
medium-app/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ user_handler.go
â”‚   â”‚   â””â”€â”€ product_handler.go
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â”œâ”€â”€ user_service.go
â”‚   â”‚   â””â”€â”€ product_service.go
â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â”œâ”€â”€ user_repository.go
â”‚   â”‚   â””â”€â”€ product_repository.go
â”‚   â””â”€â”€ model/
â”‚       â”œâ”€â”€ user.go
â”‚       â””â”€â”€ product.go
â”œâ”€â”€ pkg/
â”‚   â””â”€â”€ database/
â”‚       â””â”€â”€ postgres.go
â”œâ”€â”€ configs/
â”‚   â””â”€â”€ config.yaml
â”œâ”€â”€ go.mod
â””â”€â”€ README.md
```

### å¤§å‹é¡¹ç›®ï¼ˆå¾®æœåŠ¡æ¶æ„ï¼‰

```text
large-app/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ user-service/
â”‚   â”‚   â”œâ”€â”€ cmd/
â”‚   â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ go.mod
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ product-service/
â”‚   â”‚   â”œâ”€â”€ cmd/
â”‚   â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ go.mod
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â””â”€â”€ order-service/
â”‚       â”œâ”€â”€ cmd/
â”‚       â”œâ”€â”€ internal/
â”‚       â”œâ”€â”€ go.mod
â”‚       â””â”€â”€ README.md
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ pkg/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ logger/
â”‚   â”‚   â””â”€â”€ errors/
â”‚   â””â”€â”€ proto/
â”‚       â”œâ”€â”€ user.proto
â”‚       â””â”€â”€ product.proto
â”œâ”€â”€ deployments/
â”‚   â””â”€â”€ kubernetes/
â”œâ”€â”€ scripts/
â””â”€â”€ README.md
```

---

## 4. æœ€ä½³å®è·µ

### DO's âœ…

#### 1. åˆç†åˆ†å±‚

```go
// ä¸‰å±‚æ¶æ„
// Handler -> Service -> Repository

// Handlerå±‚ï¼šå¤„ç†HTTPè¯·æ±‚
type UserHandler struct {
    userService *service.UserService
}

func (h *UserHandler) GetUser(w http.ResponseWriter, r *http.Request) {
    id := getIDFromRequest(r)
    user, err := h.userService.GetUser(r.Context(), id)
    // ... å“åº”å¤„ç†
}

// Serviceå±‚ï¼šä¸šåŠ¡é€»è¾‘
type UserService struct {
    userRepo repository.UserRepository
}

func (s *UserService) GetUser(ctx context.Context, id int) (*model.User, error) {
    // ä¸šåŠ¡é€»è¾‘
    return s.userRepo.FindByID(ctx, id)
}

// Repositoryå±‚ï¼šæ•°æ®è®¿é—®
type UserRepository interface {
    FindByID(ctx context.Context, id int) (*model.User, error)
}
```

#### 2. ä¾èµ–æ³¨å…¥

```go
// ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
type UserService struct {
    userRepo  repository.UserRepository
    emailSvc  EmailService
    logger    *log.Logger
}

func NewUserService(
    userRepo repository.UserRepository,
    emailSvc EmailService,
    logger *log.Logger,
) *UserService {
    return &UserService{
        userRepo: userRepo,
        emailSvc: emailSvc,
        logger:   logger,
    }
}
```

#### 3. æ¥å£å®šä¹‰

```go
// åœ¨ä½¿ç”¨æ–¹å®šä¹‰æ¥å£ï¼ˆä¾èµ–å€’ç½®ï¼‰
package service

// UserRepository åœ¨serviceåŒ…ä¸­å®šä¹‰æ¥å£
type UserRepository interface {
    FindByID(ctx context.Context, id int) (*model.User, error)
    Save(ctx context.Context, user *model.User) error
}

// åœ¨repositoryåŒ…ä¸­å®ç°
package repository

type postgresUserRepo struct {
    db *sql.DB
}

func (r *postgresUserRepo) FindByID(ctx context.Context, id int) (*model.User, error) {
    // å®ç°
}
```

#### 4. é…ç½®ç®¡ç†

```go
// internal/config/config.go
package config

import (
    "github.com/spf13/viper"
)

type Config struct {
    Server   ServerConfig
    Database DatabaseConfig
    Redis    RedisConfig
    Log      LogConfig
}

type ServerConfig struct {
    Port string
    Env  string
}

type DatabaseConfig struct {
    Host     string
    Port     int
    User     string
    Password string
    DBName   string
}

func Load() (*Config, error) {
    viper.SetConfigName("config")
    viper.SetConfigType("yaml")
    viper.AddConfigPath("./configs")
    viper.AutomaticEnv()
    
    if err := viper.ReadInConfig(); err != nil {
        return nil, err
    }
    
    var config Config
    if err := viper.Unmarshal(&config); err != nil {
        return nil, err
    }
    
    return &config, nil
}
```

### DON'Ts âŒ

```go
// âŒ 1. ä¸è¦æŠŠæ‰€æœ‰ä»£ç æ”¾åœ¨mainåŒ…
// main.go
package main

type User struct {...}
func GetUser() {...}
func SaveUser() {...}
// ... 1000è¡Œä»£ç 

// âŒ 2. ä¸è¦å¾ªç¯ä¾èµ–
// package A imports B
// package B imports A

// âŒ 3. ä¸è¦åœ¨pkgä¸­æ”¾ç½®åº”ç”¨ç‰¹å®šä»£ç 
pkg/
â””â”€â”€ myapp_specific/  // ä¸åº”è¯¥åœ¨pkgä¸­

// âŒ 4. ä¸è¦è¿‡åº¦è®¾è®¡
// å°é¡¹ç›®ä¸éœ€è¦å¤æ‚çš„ç›®å½•ç»“æ„

// âŒ 5. ä¸è¦å¿½ç•¥go.mod
// åº”è¯¥æäº¤go.modå’Œgo.sum
```

---

## 5. å®æˆ˜æ¡ˆä¾‹

### RESTful APIé¡¹ç›®

```text
todo-api/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â””â”€â”€ todo.go
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â””â”€â”€ todo.go
â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â””â”€â”€ todo.go
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â””â”€â”€ todo.go
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.go
â”‚   â”‚   â””â”€â”€ logging.go
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ config.go
â”œâ”€â”€ pkg/
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â””â”€â”€ postgres.go
â”‚   â””â”€â”€ validator/
â”‚       â””â”€â”€ validator.go
â”œâ”€â”€ migrations/
â”‚   â”œâ”€â”€ 001_create_todos.up.sql
â”‚   â””â”€â”€ 001_create_todos.down.sql
â”œâ”€â”€ configs/
â”‚   â”œâ”€â”€ config.yaml
â”‚   â””â”€â”€ config.prod.yaml
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ migrate.sh
â”‚   â””â”€â”€ seed.sh
â”œâ”€â”€ deployments/
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ Makefile
â””â”€â”€ README.md
```

**main.go**:

```go
// cmd/server/main.go
package main

import (
    "context"
    "log"
    "net/http"
    "os"
    "os/signal"
    "syscall"
    "time"
    
    "todo-api/internal/config"
    "todo-api/internal/handler"
    "todo-api/internal/middleware"
    "todo-api/internal/repository"
    "todo-api/internal/service"
    "todo-api/pkg/database"
)

func main() {
    // åŠ è½½é…ç½®
    cfg, err := config.Load()
    if err != nil {
        log.Fatal("Failed to load config:", err)
    }
    
    // åˆå§‹åŒ–æ•°æ®åº“
    db, err := database.NewPostgres(cfg.Database)
    if err != nil {
        log.Fatal("Failed to connect database:", err)
    }
    defer db.Close()
    
    // åˆå§‹åŒ–Repository
    todoRepo := repository.NewTodoRepository(db)
    
    // åˆå§‹åŒ–Service
    todoService := service.NewTodoService(todoRepo)
    
    // åˆå§‹åŒ–Handler
    todoHandler := handler.NewTodoHandler(todoService)
    
    // è®¾ç½®è·¯ç”±
    mux := http.NewServeMux()
    mux.HandleFunc("/api/todos", todoHandler.ListTodos)
    mux.HandleFunc("/api/todos/", todoHandler.HandleTodo)
    
    // åº”ç”¨ä¸­é—´ä»¶
    handler := middleware.Logging(
        middleware.Auth(mux, cfg.JWT.Secret),
    )
    
    // åˆ›å»ºæœåŠ¡å™¨
    srv := &http.Server{
        Addr:         cfg.Server.Port,
        Handler:      handler,
        ReadTimeout:  15 * time.Second,
        WriteTimeout: 15 * time.Second,
        IdleTimeout:  60 * time.Second,
    }
    
    // ä¼˜é›…å…³é—­
    go func() {
        log.Printf("Server starting on %s", cfg.Server.Port)
        if err := srv.ListenAndServe(); err != nil && err != http.ErrServerClosed {
            log.Fatal("Server failed:", err)
        }
    }()
    
    // ç­‰å¾…ä¸­æ–­ä¿¡å·
    quit := make(chan os.Signal, 1)
    signal.Notify(quit, syscall.SIGINT, syscall.SIGTERM)
    <-quit
    
    log.Println("Server shutting down...")
    
    ctx, cancel := context.WithTimeout(context.Background(), 30*time.Second)
    defer cancel()
    
    if err := srv.Shutdown(ctx); err != nil {
        log.Fatal("Server forced to shutdown:", err)
    }
    
    log.Println("Server exited")
}
```

### Makefile

```makefile
# Makefile
.PHONY: build run test lint docker-build

# å˜é‡
APP_NAME=todo-api
VERSION=$(shell git describe --tags --always --dirty)
BUILD_TIME=$(shell date -u '+%Y-%m-%d_%H:%M:%S')
LDFLAGS=-ldflags "-X main.Version=${VERSION} -X main.BuildTime=${BUILD_TIME}"

# æ„å»º
build:
 go build ${LDFLAGS} -o bin/${APP_NAME} cmd/server/main.go

# è¿è¡Œ
run:
 go run cmd/server/main.go

# æµ‹è¯•
test:
 go test -v -race -coverprofile=coverage.out ./...
 go tool cover -html=coverage.out -o coverage.html

# ä»£ç æ£€æŸ¥
lint:
 golangci-lint run --timeout 5m

# æ ¼å¼åŒ–
fmt:
 go fmt ./...
 goimports -w .

# ä¾èµ–
deps:
 go mod download
 go mod tidy

# æ•°æ®åº“è¿ç§»
migrate-up:
 migrate -path migrations -database "${DATABASE_URL}" up

migrate-down:
 migrate -path migrations -database "${DATABASE_URL}" down

# Dockeræ„å»º
docker-build:
 docker build -t ${APP_NAME}:${VERSION} .

# æ¸…ç†
clean:
 rm -rf bin/ coverage.out coverage.html

# å¸®åŠ©
help:
 @echo "Available targets:"
 @echo "  build        - Build the application"
 @echo "  run          - Run the application"
 @echo "  test         - Run tests"
 @echo "  lint         - Run linters"
 @echo "  docker-build - Build Docker image"
```

---

**æ–‡æ¡£ç»´æŠ¤è€…**: Go Documentation Team  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ24æ—¥  
**æ–‡æ¡£çŠ¶æ€**: âœ… å®Œæˆ  
**é€‚ç”¨ç‰ˆæœ¬**: Go 1.21+
