# 技术栈选型决策树

> **简介**: 本文档提供技术栈选型的决策树，帮助理解技术选型的决策过程。

**版本**: v1.0
**更新日期**: 2025-11-11
**适用于**: Go 1.25.3

---

## 📋 目录

- [技术栈选型决策树](#技术栈选型决策树)
  - [📋 目录](#-目录)
  - [1. 可观测性技术栈选型决策树](#1-可观测性技术栈选型决策树)
  - [2. 消息队列选型决策树](#2-消息队列选型决策树)
  - [3. 配置管理选型决策树](#3-配置管理选型决策树)
  - [4. 日志库选型决策树](#4-日志库选型决策树)
  - [5. API 协议选型决策树](#5-api-协议选型决策树)
  - [6. 扩展阅读](#6-扩展阅读)

---

## 1. 可观测性技术栈选型决策树

```mermaid
graph TD
    Start[可观测性选型] --> Q1{需要统一标准?}
    Q1 -->|是| Q2{需要三支柱支持?}
    Q1 -->|否| Q3{只需要指标?}

    Q2 -->|是| OTLP[OpenTelemetry<br/>✅ 选择<br/>理由:<br/>1. 行业标准<br/>2. 三支柱支持<br/>3. 生态丰富]

    Q3 -->|是| Prom[Prometheus<br/>✅ 选择<br/>理由:<br/>1. 监控标准<br/>2. 高性能<br/>3. 生态丰富]

    Start --> Q4{需要可视化?}
    Q4 -->|是| Grafana[Grafana<br/>✅ 选择<br/>理由:<br/>1. 可视化强大<br/>2. 数据源丰富<br/>3. 社区活跃]

    Start --> Q5{需要分布式追踪?}
    Q5 -->|是| Q6{需要 OTLP 集成?}
    Q6 -->|是| Jaeger[Jaeger<br/>✅ 选择<br/>理由:<br/>1. OTLP 集成<br/>2. 可视化完善<br/>3. 开源免费]

    style OTLP fill:#10b981
    style Prom fill:#10b981
    style Grafana fill:#10b981
    style Jaeger fill:#10b981
```

---

## 2. 消息队列选型决策树

```mermaid
graph TD
    Start[消息队列选型] --> Q1{使用场景?}
    Q1 -->|大数据流处理| Kafka[Kafka<br/>✅ 选择<br/>理由:<br/>1. 高吞吐量<br/>2. 持久化<br/>3. 分区支持]
    Q1 -->|IoT 设备通信| MQTT[MQTT<br/>✅ 选择<br/>理由:<br/>1. IoT 适配<br/>2. 轻量级<br/>3. QoS 支持]
    Q1 -->|传统消息队列| RabbitMQ[RabbitMQ<br/>❌ 未选择<br/>理由:<br/>1. 性能不如 Kafka<br/>2. 不适合大数据流]

    style Kafka fill:#10b981
    style MQTT fill:#10b981
    style RabbitMQ fill:#ef4444
```

---

## 3. 配置管理选型决策树

```mermaid
graph TD
    Start[配置管理选型] --> Q1{需要多格式支持?}
    Q1 -->|是| Q2{需要远程配置?}
    Q1 -->|否| Q3{只需要环境变量?}

    Q2 -->|是| Viper[Viper<br/>✅ 选择<br/>理由:<br/>1. 功能完整<br/>2. 多格式支持<br/>3. 易用性]

    Q3 -->|是| Envconfig[envconfig<br/>❌ 未选择<br/>理由:<br/>1. 功能有限<br/>2. 不支持文件配置]

    style Viper fill:#10b981
    style Envconfig fill:#ef4444
```

---

## 4. 日志库选型决策树

```mermaid
graph TD
    Start[日志库选型] --> Q1{需要标准库?}
    Q1 -->|是| Slog[Slog<br/>✅ 选择<br/>理由:<br/>1. 标准库<br/>2. 结构化日志<br/>3. 性能优秀]
    Q1 -->|否| Q2{需要高性能?}

    Q2 -->|是| Zap[Zap<br/>❌ 未选择<br/>理由:<br/>1. 非标准库<br/>2. API 复杂]

    style Slog fill:#10b981
    style Zap fill:#ef4444
```

---

## 5. API 协议选型决策树

```mermaid
graph TD
    Start[API 协议选型] --> Q1{使用场景?}
    Q1 -->|微服务通信| gRPC[gRPC<br/>✅ 选择<br/>理由:<br/>1. 高性能<br/>2. 类型安全<br/>3. 流式处理]
    Q1 -->|Web 前端查询| GraphQL[GraphQL<br/>✅ 选择<br/>理由:<br/>1. 查询灵活<br/>2. 类型系统<br/>3. 客户端控制]
    Q1 -->|简单 REST API| REST[REST<br/>❌ 未选择<br/>理由:<br/>1. 性能不如 gRPC<br/>2. 无类型安全]

    style gRPC fill:#10b981
    style GraphQL fill:#10b981
    style REST fill:#ef4444
```

---

## 6. 扩展阅读

- [技术栈概览](./00-技术栈概览.md) - 技术栈概览
- [技术栈集成](./01-技术栈集成.md) - 技术栈集成架构和最佳实践
- [架构文档索引](../README.md) - 架构文档索引

---

> 📚 **简介**
> 本文档提供了技术栈选型的决策树，帮助理解技术选型的决策过程和理由。
