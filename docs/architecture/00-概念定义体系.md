# 项目架构概念定义体系

> **简介**: 本项目架构相关的核心概念定义，建立统一的术语体系。

**版本**: v1.0
**更新日期**: 2025-11-11
**适用于**: Go 1.25.3

---

## 📋 目录

- [项目架构概念定义体系](#项目架构概念定义体系)
  - [📋 目录](#-目录)
  - [1. 🏗️ 架构概念](#1-️-架构概念)
  - [2. 📦 层次概念](#2--层次概念)
  - [3. 🔧 技术概念](#3--技术概念)
  - [4. 🔄 模式概念](#4--模式概念)

---

## 1. 🏗️ 架构概念

### 1.1 Clean Architecture（整洁架构）

**定义**: 一种软件架构设计方法，将系统分为多个层次，内层不依赖外层，确保业务逻辑与技术实现分离。

**特征**:
- 四层架构：Domain, Application, Infrastructure, Interfaces
- 依赖倒置：外层依赖内层接口
- 独立性：业务逻辑不依赖框架

**在本项目中的应用**: 完整的四层架构实现

---

### 1.2 Domain-Driven Design (DDD)

**定义**: 一种软件开发方法，通过领域模型来表达业务逻辑。

**特征**:
- 领域实体（Entity）
- 值对象（Value Object）
- 领域服务（Domain Service）
- 仓储（Repository）

**在本项目中的应用**: User 领域模型实现

---

## 2. 📦 层次概念

### 2.1 Domain Layer（领域层）

**定义**: 包含核心业务逻辑和领域模型的层次。

**职责**:
- 定义领域实体
- 定义仓储接口
- 定义领域错误
- 封装业务规则

**位置**: `internal/domain/`

---

### 2.2 Application Layer（应用层）

**定义**: 包含用例编排和应用服务的层次。

**职责**:
- 协调领域对象
- 定义应用服务
- 定义工作流
- 定义活动

**位置**: `internal/application/`

---

### 2.3 Infrastructure Layer（基础设施层）

**定义**: 包含技术实现细节的层次。

**职责**:
- 实现仓储接口
- 数据库访问
- 外部服务集成
- 工作流引擎集成

**位置**: `internal/infrastructure/`

---

### 2.4 Interfaces Layer（接口层）

**定义**: 包含外部接口适配的层次。

**职责**:
- HTTP 处理器
- gRPC 服务
- GraphQL 解析器
- 工作流处理器

**位置**: `internal/interfaces/`

---

## 3. 🔧 技术概念

### 3.1 Temporal Workflow（工作流）

**定义**: 使用 Temporal 定义的可恢复、可查询的业务流程。

**特征**:
- 确定性执行
- 自动持久化
- 支持信号和查询
- 可重试

**在本项目中的应用**: UserWorkflow（用户操作工作流）

---

### 3.2 Temporal Activity（活动）

**定义**: 工作流中执行的具体业务逻辑单元。

**特征**:
- 可重试
- 可超时
- 可取消
- 非确定性

**在本项目中的应用**: User Activities（用户相关活动）

---

### 3.3 Ent ORM

**定义**: Facebook 开源的类型安全的 ORM 框架。

**特征**:
- 代码生成
- 类型安全
- Schema 定义
- 迁移支持

**在本项目中的应用**: 数据库访问层实现

---

## 4. 🔄 模式概念

### 4.1 Repository Pattern（仓储模式）

**定义**: 封装数据访问逻辑，提供领域对象访问接口。

**特征**:
- 接口在领域层定义
- 实现在基础设施层
- 隐藏数据访问细节

**在本项目中的应用**: UserRepository 接口和实现

---

### 4.2 Service Pattern（服务模式）

**定义**: 封装业务逻辑，协调领域对象。

**特征**:
- 无状态
- 事务边界
- 用例编排

**在本项目中的应用**: UserService 应用服务

---

### 4.3 DTO Pattern（数据传输对象模式）

**定义**: 在不同层次之间传输数据的对象。

**特征**:
- 无业务逻辑
- 序列化友好
- 层次隔离

**在本项目中的应用**: UserDTO 应用层数据传输对象

---

## 📚 相关文档

- [Clean Architecture](./clean-architecture.md) - 架构设计详解
- [领域模型设计](./domain-model.md) - 领域层设计
- [工作流架构设计](./workflow.md) - 工作流集成

---

> 📚 **简介**
> 本文档定义了项目架构相关的核心概念，建立统一的术语体系。通过本文档，可以更好地理解项目的架构设计和技术选型。
