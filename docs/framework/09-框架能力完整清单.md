# 框架能力完整清单

> **版本**: v1.0
> **日期**: 2025-01-XX
> **状态**: ✅ 已完成

---

## 📋 概述

本文档提供框架所有核心能力的完整清单，包括基础设施、可观测性、控制能力等。

---

## ✅ 核心能力清单

### 1. 数据库抽象层

**位置**: `pkg/database/`

**功能**:

- ✅ 统一数据库接口
- ✅ 支持 PostgreSQL、SQLite3、MySQL
- ✅ 连接池管理
- ✅ 事务支持
- ✅ 上下文支持
- ✅ 统计信息

**文档**: `pkg/database/README.md`

---

### 2. 数据转换工具

**位置**: `pkg/converter/`

**功能**:

- ✅ 类型转换（字符串、整数、浮点数、布尔值、时间）
- ✅ JSON 转换
- ✅ Map 转换
- ✅ Slice 转换
- ✅ 通用转换（基于反射）

**文档**: `pkg/converter/README.md`

---

### 3. 采样机制

**位置**: `pkg/sampling/`

**功能**:

- ✅ 总是采样（AlwaysSampler）
- ✅ 从不采样（NeverSampler）
- ✅ 概率采样（ProbabilisticSampler）
- ✅ 速率限制采样（RateLimitingSampler）
- ✅ 自适应采样（AdaptiveSampler）
- ✅ 动态调整采样率

**文档**: `pkg/sampling/README.md`

---

### 4. 追踪和定位

**位置**: `pkg/tracing/`

**功能**:

- ✅ 分布式追踪
- ✅ 错误定位（堆栈跟踪、调用位置）
- ✅ 属性记录
- ✅ Panic 捕获
- ✅ OpenTelemetry 集成

**文档**: `pkg/tracing/README.md`

---

### 5. 反射/自解释

**位置**: `pkg/reflect/`

**功能**:

- ✅ 类型检查（类型元数据）
- ✅ 函数检查（函数元数据）
- ✅ 结构体检查（字段、标签）
- ✅ 自描述（对象完整描述）

**文档**: `pkg/reflect/README.md`

---

### 6. 精细控制

**位置**: `pkg/control/`

**功能**:

- ✅ 功能开关（动态启用/禁用）
- ✅ 配置管理（动态更新）
- ✅ 配置监听（变化通知）
- ✅ 速率控制（细粒度限流）
- ✅ 熔断器（自动熔断和恢复）

**文档**: `pkg/control/README.md`

---

### 7. 增强的 OTLP 集成

**位置**: `pkg/observability/otlp/`

**功能**:

- ✅ 完整的追踪、指标、日志支持
- ✅ 采样集成
- ✅ 动态调整采样率
- ✅ 资源标识

**文档**: `pkg/observability/otlp/README.md`

**注意**: 指标导出器需要添加 `otlpmetricgrpc` 依赖（当前为 TODO）

---

### 8. eBPF 收集器

**位置**: `pkg/observability/ebpf/`

**功能**:

- ✅ eBPF 收集器框架
- ✅ 系统调用追踪接口
- ✅ 网络监控接口
- ✅ OpenTelemetry 集成接口

**文档**: `pkg/observability/ebpf/README.md`

**注意**: 实际的 eBPF 程序实现需要编写 eBPF C 程序和加载逻辑

---

## 🎯 核心能力分类

### 可观测 (Observable)

| 能力 | 状态 | 位置 |
|------|------|------|
| OTLP 集成 | ✅ | `pkg/observability/otlp/` |
| 追踪 | ✅ | `pkg/tracing/` |
| 指标 | ✅ | `pkg/observability/otlp/` |
| 日志 | ✅ | `internal/framework/logger/` |
| eBPF | ✅ | `pkg/observability/ebpf/` |

### 可预测 (Predictable)

| 能力 | 状态 | 位置 |
|------|------|------|
| 采样机制 | ✅ | `pkg/sampling/` |
| 速率控制 | ✅ | `pkg/control/` |
| 熔断器 | ✅ | `pkg/control/` |

### 可采样 (Samplable)

| 能力 | 状态 | 位置 |
|------|------|------|
| 概率采样 | ✅ | `pkg/sampling/` |
| 速率限制采样 | ✅ | `pkg/sampling/` |
| 自适应采样 | ✅ | `pkg/sampling/` |
| 动态调整 | ✅ | `pkg/sampling/` |

### 可定位 (Traceable/Locatable)

| 能力 | 状态 | 位置 |
|------|------|------|
| 错误定位 | ✅ | `pkg/tracing/` |
| 堆栈跟踪 | ✅ | `pkg/tracing/` |
| 调用位置 | ✅ | `pkg/tracing/` |

### 可分布 (Distributable)

| 能力 | 状态 | 位置 |
|------|------|------|
| 分布式追踪 | ✅ | `pkg/tracing/` |
| 上下文传播 | ✅ | `pkg/tracing/` |

### 可全面控制 (Fully Controllable)

| 能力 | 状态 | 位置 |
|------|------|------|
| 功能开关 | ✅ | `pkg/control/` |
| 配置管理 | ✅ | `pkg/control/` |
| 速率控制 | ✅ | `pkg/control/` |
| 熔断器 | ✅ | `pkg/control/` |

### 可自我解释 (Self-explanatory/Reflective)

| 能力 | 状态 | 位置 |
|------|------|------|
| 类型元数据 | ✅ | `pkg/reflect/` |
| 函数元数据 | ✅ | `pkg/reflect/` |
| 结构体元数据 | ✅ | `pkg/reflect/` |
| 自描述 | ✅ | `pkg/reflect/` |

---

## 📚 相关文档

- [框架核心能力总结](07-框架核心能力总结.md)
- [核心能力使用示例](08-核心能力使用示例.md)
- [框架快速开始指南](05-快速开始指南.md)
- [框架最佳实践指南](06-最佳实践指南.md)

---

**最后更新**: 2025-01-XX
