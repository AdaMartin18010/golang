# æ¶æ„å®è·µ - æ¦‚å¿µå®šä¹‰ä½“ç³»

**æ›´æ–°æ—¥æœŸ**: 2025-10-28

---

## æ ¸å¿ƒæ¦‚å¿µ

### 1. å¾®æœåŠ¡æ¶æ„

**å®šä¹‰**: å°†å•ä½“åº”ç”¨æ‹†åˆ†ä¸ºå°å‹ç‹¬ç«‹æœåŠ¡

**æ ¸å¿ƒåŸåˆ™**:
- å•ä¸€èŒè´£
- ç‹¬ç«‹éƒ¨ç½²
- å»ä¸­å¿ƒåŒ–æ•°æ®ç®¡ç†
- å®¹é”™è®¾è®¡

**Goå®è·µ**:
```go
// æœåŠ¡æ³¨å†Œ
func RegisterService(svc *Service) {
    consul.Register(svc.Name, svc.Addr)
}

// æœåŠ¡å‘ç°
func DiscoverService(name string) []string {
    return consul.Discover(name)
}

// è´Ÿè½½å‡è¡¡
func CallService(name string, req Request) Response {
    addrs := DiscoverService(name)
    addr := loadBalance(addrs)
    return rpc.Call(addr, req)
}
```

---

### 2. äº‹ä»¶é©±åŠ¨æ¶æ„

**å®šä¹‰**: é€šè¿‡äº‹ä»¶è§¦å‘å’Œé€šä¿¡çš„æ¶æ„æ¨¡å¼

**æ ¸å¿ƒç»„ä»¶**:
- äº‹ä»¶ç”Ÿäº§è€…
- äº‹ä»¶æ€»çº¿
- äº‹ä»¶æ¶ˆè´¹è€…
- äº‹ä»¶å­˜å‚¨

**å®ç°æ¨¡å¼**:
```go
// äº‹ä»¶å®šä¹‰
type Event struct {
    ID        string
    Type      string
    Payload   json.RawMessage
    Timestamp time.Time
}

// äº‹ä»¶å‘å¸ƒ
func PublishEvent(e Event) error {
    return eventBus.Publish(e)
}

// äº‹ä»¶è®¢é˜…
func SubscribeEvent(eventType string, handler func(Event)) {
    eventBus.Subscribe(eventType, handler)
}
```

---

### 3. CQRSæ¨¡å¼

**å®šä¹‰**: Command Query Responsibility Segregationï¼ˆå‘½ä»¤æŸ¥è¯¢èŒè´£åˆ†ç¦»ï¼‰

**æ ¸å¿ƒæ€æƒ³**:
- å†™æ“ä½œ: Command
- è¯»æ“ä½œ: Query
- åˆ†ç¦»æ•°æ®æ¨¡å‹

**ä¼˜åŠ¿**:
- è¯»å†™åˆ†ç¦»
- æ€§èƒ½ä¼˜åŒ–
- å¯æ‰©å±•æ€§

---

### 4. äº‘åŸç”Ÿæ¶æ„

**å®šä¹‰**: åŸºäºäº‘å¹³å°è®¾è®¡å’Œæ„å»ºçš„åº”ç”¨æ¶æ„

**12-FactoråŸåˆ™**:
1. ä»£ç åº“: ç‰ˆæœ¬æ§åˆ¶
2. ä¾èµ–: æ˜¾å¼å£°æ˜
3. é…ç½®: ç¯å¢ƒå˜é‡
4. åç«¯æœåŠ¡: é™„åŠ èµ„æº
5. æ„å»º/å‘å¸ƒ/è¿è¡Œ: ä¸¥æ ¼åˆ†ç¦»
6. è¿›ç¨‹: æ— çŠ¶æ€
7. ç«¯å£ç»‘å®š: è‡ªåŒ…å«
8. å¹¶å‘: æ°´å¹³æ‰©å±•
9. æ˜“å¤„ç†: å¿«é€Ÿå¯åŠ¨/ä¼˜é›…å…³é—­
10. å¼€å‘/ç”Ÿäº§ä¸€è‡´
11. æ—¥å¿—: äº‹ä»¶æµ
12. ç®¡ç†è¿›ç¨‹: ä¸€æ¬¡æ€§ä»»åŠ¡

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [çŸ¥è¯†å›¾è°±](./00-çŸ¥è¯†å›¾è°±.md)
- [å¯¹æ¯”çŸ©é˜µ](./00-å¯¹æ¯”çŸ©é˜µ.md)

---

**æœ€åæ›´æ–°**: 2025-10-28
