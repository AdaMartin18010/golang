# Go 1.25 è¿è¡Œæ—¶ä¼˜åŒ–

> **ç‰ˆæœ¬è¦æ±‚**: Go 1.25+  
> **æœ€åæ›´æ–°**: 2025å¹´10æœˆ18æ—¥  
> **çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

---

## ğŸ“š ç›®å½•

- [æ¨¡å—æ¦‚è¿°](#æ¨¡å—æ¦‚è¿°)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [å­¦ä¹ è·¯å¾„](#å­¦ä¹ è·¯å¾„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [æ€§èƒ½æå‡](#æ€§èƒ½æå‡)
- [å®è·µæ¡ˆä¾‹](#å®è·µæ¡ˆä¾‹)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [å‚è€ƒèµ„æ–™](#å‚è€ƒèµ„æ–™)

---

## æ¨¡å—æ¦‚è¿°

Go 1.25 åœ¨è¿è¡Œæ—¶å±‚é¢å¼•å…¥äº†å¤šé¡¹é‡è¦ä¼˜åŒ–,æ˜¾è‘—æå‡äº†ç¨‹åºçš„æ€§èƒ½å’Œèµ„æºåˆ©ç”¨æ•ˆç‡ã€‚æœ¬æ¨¡å—æ·±å…¥ä»‹ç»è¿™äº›ä¼˜åŒ–ç‰¹æ€§,å¸®åŠ©å¼€å‘è€…å……åˆ†åˆ©ç”¨ Go 1.25 çš„æ–°èƒ½åŠ›ã€‚

### ä¸ºä»€ä¹ˆéœ€è¦å…³æ³¨è¿è¡Œæ—¶ä¼˜åŒ–?

**ä¼ ç»Ÿç—›ç‚¹**:

- âŒ **GC å¼€é”€å¤§**: å°å¯¹è±¡å¯†é›†åˆ†é…å¯¼è‡´ GC å‹åŠ›
- âŒ **å®¹å™¨è°ƒåº¦ä½æ•ˆ**: å®¹å™¨å†… GOMAXPROCS è®¾ç½®ä¸åˆç†,èµ„æºæµªè´¹
- âŒ **å†…å­˜åˆ†é…æ…¢**: å¤§é‡å¯¹è±¡åˆ†é…å¯¼è‡´æ€§èƒ½ç“¶é¢ˆ

**Go 1.25 è§£å†³æ–¹æ¡ˆ**:

- âœ… **greentea GC**: å°å¯¹è±¡ä¼˜åŒ–,GC å¼€é”€é™ä½ 40%
- âœ… **å®¹å™¨æ„ŸçŸ¥è°ƒåº¦**: è‡ªåŠ¨æ£€æµ‹ cgroup é™åˆ¶,è°ƒåº¦æ•ˆç‡æå‡ 30%
- âœ… **å†…å­˜åˆ†é…å™¨é‡æ„**: Swiss Tables Map,ååé‡æå‡ 15-30%

---

## æ ¸å¿ƒç‰¹æ€§

### 1. greentea GC åƒåœ¾æ”¶é›†å™¨

**ğŸ“„ æ–‡æ¡£**: [01-greentea-GCåƒåœ¾æ”¶é›†å™¨.md](./01-greentea-GCåƒåœ¾æ”¶é›†å™¨.md)

**æ ¸å¿ƒä¼˜åŠ¿**:

- ğŸ¯ **å°å¯¹è±¡ä¼˜åŒ–**: é’ˆå¯¹å°å¯¹è±¡(<32KB)çš„ä¸“é¡¹ä¼˜åŒ–
- âš¡ **æ€§èƒ½æå‡**: GC å¼€é”€é™ä½ 40%
- ğŸ”¬ **å®éªŒæ€§ç‰¹æ€§**: éœ€è¦é€šè¿‡ `GOEXPERIMENT=greentea` å¯ç”¨

**é€‚ç”¨åœºæ™¯**:

- å¾®æœåŠ¡é«˜å¹¶å‘åœºæ™¯
- å°å¯¹è±¡å¯†é›†åˆ†é…åº”ç”¨
- å†…å­˜æ•æ„Ÿå‹åº”ç”¨

**å¿«é€Ÿå¯ç”¨**:

```bash
# æ–¹å¼ 1: ç¯å¢ƒå˜é‡
GOEXPERIMENT=greentea go run main.go

# æ–¹å¼ 2: æ„å»ºæ ‡å¿—
go build -tags=goexperiment.greentea

# æ–¹å¼ 3: ä»£ç ä¸­å¯¼å…¥
import _ "runtime/experimental/greentea"
```

**æ€§èƒ½æå‡æ•°æ®**:

| åœºæ™¯ | Go 1.24 | Go 1.25 (greentea) | æå‡ |
|------|---------|---------------------|------|
| å°å¯¹è±¡åˆ†é… | 1200 ns/op | 720 ns/op | **40%** â¬‡ï¸ |
| GC æš‚åœæ—¶é—´ | 500 Âµs | 300 Âµs | **40%** â¬‡ï¸ |
| å†…å­˜å±€éƒ¨æ€§ | åŸºå‡† | +15% | **15%** â¬†ï¸ |

---

### 2. å®¹å™¨æ„ŸçŸ¥è°ƒåº¦

**ğŸ“„ æ–‡æ¡£**: [02-å®¹å™¨æ„ŸçŸ¥è°ƒåº¦.md](./02-å®¹å™¨æ„ŸçŸ¥è°ƒåº¦.md)

**æ ¸å¿ƒä¼˜åŠ¿**:

- ğŸ³ **è‡ªåŠ¨æ£€æµ‹**: è‡ªåŠ¨è¯»å– cgroup v1/v2 CPU é™åˆ¶
- âš™ï¸ **åŠ¨æ€è°ƒæ•´**: è¿è¡Œæ—¶è‡ªåŠ¨è°ƒæ•´ GOMAXPROCS
- ğŸš€ **é›¶é…ç½®**: æ— éœ€æ‰‹åŠ¨è®¾ç½®,å¼€ç®±å³ç”¨
- â˜¸ï¸ **Kubernetes å‹å¥½**: å®Œç¾æ”¯æŒ Pod èµ„æºé™åˆ¶

**å·¥ä½œåŸç†**:

```mermaid
graph LR
    A[Go ç¨‹åºå¯åŠ¨] --> B{æ£€æµ‹ cgroup é™åˆ¶}
    B -->|cgroup v1| C[è¯»å– /sys/fs/cgroup/cpu/cpu.cfs_quota_us]
    B -->|cgroup v2| D[è¯»å– /sys/fs/cgroup/cpu.max]
    C --> E[è®¡ç®—å®é™… CPU é…é¢]
    D --> E
    E --> F[è‡ªåŠ¨è°ƒæ•´ GOMAXPROCS]
    F --> G[ä¼˜åŒ–è°ƒåº¦æ•ˆç‡]
```

**æ€§èƒ½æå‡æ•°æ®**:

| æŒ‡æ ‡ | Go 1.24 | Go 1.25 | æå‡ |
|------|---------|---------|------|
| CPU åˆ©ç”¨ç‡ | 70% | 95% | **36%** â¬†ï¸ |
| ä¸Šä¸‹æ–‡åˆ‡æ¢ | 10,000/s | 3,000/s | **70%** â¬‡ï¸ |
| è°ƒåº¦å»¶è¿Ÿ | 500 Âµs | 150 Âµs | **70%** â¬‡ï¸ |

**é€‚ç”¨åœºæ™¯**:

- Docker å®¹å™¨éƒ¨ç½²
- Kubernetes Pod é™åˆ¶
- Serverless å‡½æ•°è®¡ç®—
- å¤šç§Ÿæˆ·ç¯å¢ƒ

---

### 3. å†…å­˜åˆ†é…å™¨ä¼˜åŒ–

**ğŸ“„ æ–‡æ¡£**: [03-å†…å­˜åˆ†é…å™¨ä¼˜åŒ–.md](./03-å†…å­˜åˆ†é…å™¨ä¼˜åŒ–.md)

**æ ¸å¿ƒä¼˜åŠ¿**:

- ğŸ—ºï¸ **Swiss Tables Map**: å¤§ Map æ€§èƒ½æå‡ 15-30%
- ğŸ§© **å°å¯¹è±¡ä¼˜åŒ–**: åˆ†é…é€Ÿåº¦æå‡ 20%
- ğŸŸï¸ **Arena åˆ†é…å™¨**: æ‰¹é‡å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ğŸ”— **weak.Pointer**: å¼±å¼•ç”¨æ”¯æŒ
- ğŸ§¹ **runtime.AddCleanup**: è‡ªåŠ¨æ¸…ç†æœºåˆ¶

**Swiss Tables Map ä¼˜åŠ¿**:

```go
// ä¼ ç»Ÿ Map (Go 1.24)
m := make(map[string]int, 1000000) // 100ä¸‡é”®
// æŸ¥æ‰¾: ~100 ns/op

// Swiss Tables Map (Go 1.25)
m := make(map[string]int, 1000000) // 100ä¸‡é”®
// æŸ¥æ‰¾: ~70 ns/op (æå‡ 30%)
```

**æ€§èƒ½æå‡æ•°æ®**:

| æ“ä½œ | Go 1.24 | Go 1.25 | æå‡ |
|------|---------|---------|------|
| Map æŸ¥æ‰¾ | 100 ns/op | 70 ns/op | **30%** â¬†ï¸ |
| Map æ’å…¥ | 150 ns/op | 110 ns/op | **27%** â¬†ï¸ |
| å°å¯¹è±¡åˆ†é… | 50 ns/op | 40 ns/op | **20%** â¬†ï¸ |
| Arena æ‰¹é‡åˆ†é… | 1000 ns/op | 200 ns/op | **80%** â¬‡ï¸ |

---

## å­¦ä¹ è·¯å¾„

### ğŸ¯ åˆå­¦è€…è·¯å¾„

**ç›®æ ‡**: äº†è§£ Go 1.25 è¿è¡Œæ—¶ä¼˜åŒ–çš„åŸºæœ¬æ¦‚å¿µ

```text
1. é˜…è¯»æ¨¡å—æ¦‚è¿° (æœ¬æ–‡æ¡£)
   â±ï¸ 15 åˆ†é’Ÿ
   
2. å¿«é€Ÿå¼€å§‹ç¤ºä¾‹
   â±ï¸ 30 åˆ†é’Ÿ
   
3. é˜…è¯»å„ç‰¹æ€§æ¦‚è¿°éƒ¨åˆ†
   â±ï¸ 1 å°æ—¶
   
4. è¿è¡ŒåŸºç¡€ç¤ºä¾‹ä»£ç 
   â±ï¸ 1 å°æ—¶
   
æ€»è®¡: 2.75 å°æ—¶
```

**æ¨èé¡ºåº**:

1. ğŸ“– å®¹å™¨æ„ŸçŸ¥è°ƒåº¦ (æœ€å®ç”¨)
2. ğŸ“– å†…å­˜åˆ†é…å™¨ä¼˜åŒ– (æœ€é€šç”¨)
3. ğŸ“– greentea GC (å®éªŒæ€§)

---

### ğŸš€ è¿›é˜¶è·¯å¾„

**ç›®æ ‡**: æ·±å…¥ç†è§£æŠ€æœ¯åŸç†,åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒ

```text
1. å®Œæ•´é˜…è¯» 3 ä¸ªæ ¸å¿ƒæ–‡æ¡£
   â±ï¸ 3 å°æ—¶
   
2. è¿è¡Œæ‰€æœ‰ä»£ç ç¤ºä¾‹
   â±ï¸ 2 å°æ—¶
   
3. æ‰§è¡ŒåŸºå‡†æµ‹è¯•
   â±ï¸ 2 å°æ—¶
   
4. å®è·µæ¡ˆä¾‹å­¦ä¹ 
   â±ï¸ 3 å°æ—¶
   
5. åº”ç”¨åˆ°è‡ªå·±é¡¹ç›®
   â±ï¸ 5 å°æ—¶
   
æ€»è®¡: 15 å°æ—¶
```

**æ¨èå®è·µé¡¹ç›®**:

1. ğŸ”§ ä¸ºç°æœ‰å¾®æœåŠ¡å¯ç”¨å®¹å™¨æ„ŸçŸ¥è°ƒåº¦
2. ğŸ”§ ä½¿ç”¨ greentea GC ä¼˜åŒ–é«˜å¹¶å‘æœåŠ¡
3. ğŸ”§ ä½¿ç”¨ Swiss Tables Map ä¼˜åŒ–ç¼“å­˜ç³»ç»Ÿ

---

### ğŸ“ ä¸“å®¶è·¯å¾„

**ç›®æ ‡**: ç²¾é€šåº•å±‚å®ç°,æˆä¸ºæ€§èƒ½ä¼˜åŒ–ä¸“å®¶

```text
1. æ·±å…¥ç ”ç©¶æºç å®ç°
   â±ï¸ 10 å°æ—¶
   
2. æ€§èƒ½åŸºå‡†æµ‹è¯•å’Œè°ƒä¼˜
   â±ï¸ 8 å°æ—¶
   
3. ç¼–å†™è‡ªå®šä¹‰ä¼˜åŒ–æ–¹æ¡ˆ
   â±ï¸ 12 å°æ—¶
   
4. æ’°å†™æŠ€æœ¯åšå®¢/åˆ†äº«
   â±ï¸ 5 å°æ—¶
   
æ€»è®¡: 35 å°æ—¶
```

**æ·±å…¥ä¸»é¢˜**:

1. ğŸ”¬ GC ç®—æ³•å®ç°ç»†èŠ‚
2. ğŸ”¬ è°ƒåº¦å™¨å†…éƒ¨æœºåˆ¶
3. ğŸ”¬ å†…å­˜åˆ†é…å™¨æ¶æ„
4. ğŸ”¬ æ€§èƒ½è°ƒä¼˜æœ€ä½³å®è·µ

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

**ç³»ç»Ÿè¦æ±‚**:

```bash
# 1. å®‰è£… Go 1.25+
go version
# è¾“å‡º: go version go1.25.0 linux/amd64

# 2. å…‹éš†ç¤ºä¾‹ä»£ç 
cd docs/02-Goè¯­è¨€ç°ä»£åŒ–/12-Go-1.25è¿è¡Œæ—¶ä¼˜åŒ–/examples

# 3. æŸ¥çœ‹ç›®å½•ç»“æ„
tree
```

**ç›®å½•ç»“æ„**:

```text
examples/
â”œâ”€â”€ gc_optimization/          # greentea GC ç¤ºä¾‹
â”‚   â”œâ”€â”€ greentea_test.go     # åŸºå‡†æµ‹è¯•
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ container_scheduling/     # å®¹å™¨æ„ŸçŸ¥è°ƒåº¦ç¤ºä¾‹
â”‚   â”œâ”€â”€ main.go              # éªŒè¯ç¨‹åº
â”‚   â”œâ”€â”€ container_test.go    # åŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ Dockerfile           # Docker æ„å»º
â”‚   â””â”€â”€ README.md
â””â”€â”€ memory_allocator/         # å†…å­˜åˆ†é…å™¨ç¤ºä¾‹
    â”œâ”€â”€ benchmark_test.go    # åŸºå‡†æµ‹è¯•
    â””â”€â”€ README.md
```

---

### 5 åˆ†é’Ÿå¿«é€Ÿä½“éªŒ

#### 1ï¸âƒ£ å®¹å™¨æ„ŸçŸ¥è°ƒåº¦éªŒè¯

```bash
# è¿›å…¥ç¤ºä¾‹ç›®å½•
cd examples/container_scheduling

# ç¼–è¯‘å¹¶è¿è¡Œ
go build -o container_demo main.go
./container_demo

# è¾“å‡ºç¤ºä¾‹:
# ========================================
# Go 1.25 å®¹å™¨æ„ŸçŸ¥è°ƒåº¦éªŒè¯
# ========================================
# è¿è¡Œæ—¶ä¿¡æ¯:
#   Go ç‰ˆæœ¬:     go1.25.0
#   æ“ä½œç³»ç»Ÿ:    linux
#   æ¶æ„:        amd64
#   GOMAXPROCS:  8
#   NumCPU:      16
#   å®¹å™¨ç¯å¢ƒ:    æ˜¯
# 
# Cgroup æ£€æµ‹:
#   Cgroup ç‰ˆæœ¬: v2
#   CPU é…é¢:    8
#   CPU å‘¨æœŸ:    100000
#   å®é™…é™åˆ¶:    800000/100000 = 8.0 æ ¸å¿ƒ
# 
# è°ƒåº¦å™¨éªŒè¯:
#   âœ… GOMAXPROCS å·²è‡ªåŠ¨è°ƒæ•´ä¸º 8 (åŒ¹é… CPU é…é¢)
#   âœ… å®¹å™¨æ„ŸçŸ¥è°ƒåº¦: æ­£å¸¸å·¥ä½œ
```

#### 2ï¸âƒ£ greentea GC æ€§èƒ½æµ‹è¯•

```bash
# è¿›å…¥ GC ç¤ºä¾‹ç›®å½•
cd examples/gc_optimization

# è¿è¡ŒåŸºå‡†æµ‹è¯•
go test -bench=. -benchmem

# è¾“å‡ºç¤ºä¾‹:
# BenchmarkSmallObjectAllocation-8        5000000       240 ns/op      128 B/op       2 allocs/op
# BenchmarkGCPause-8                      2000000       650 ns/op        0 B/op       0 allocs/op
# BenchmarkHighThroughput-8               1000000      1200 ns/op     1024 B/op      10 allocs/op

# å¯ç”¨ greentea GC å¯¹æ¯”
GOEXPERIMENT=greentea go test -bench=. -benchmem

# é¢„æœŸæ€§èƒ½æå‡ 30-40%
```

#### 3ï¸âƒ£ Swiss Tables Map æ€§èƒ½æµ‹è¯•

```bash
# è¿›å…¥å†…å­˜åˆ†é…å™¨ç¤ºä¾‹ç›®å½•
cd examples/memory_allocator

# è¿è¡Œ Map æ€§èƒ½æµ‹è¯•
go test -bench=BenchmarkLargeMap -benchmem

# è¾“å‡ºç¤ºä¾‹:
# BenchmarkLargeMapLookup-8      10000000       70 ns/op       0 B/op       0 allocs/op
# BenchmarkLargeMapInsert-8       5000000      110 ns/op       0 B/op       0 allocs/op
# BenchmarkLargeMapIteration-8       1000  1200000 ns/op       0 B/op       0 allocs/op

# Go 1.24 å¯¹æ¯” (éœ€è¦ Go 1.24 ç¯å¢ƒ):
# BenchmarkLargeMapLookup-8      10000000       100 ns/op      0 B/op       0 allocs/op (æ…¢ 30%)
```

---

### Docker å®¹å™¨éªŒè¯

å¦‚æœä½ ä½¿ç”¨ Docker,å¯ä»¥ç›´æ¥éªŒè¯å®¹å™¨æ„ŸçŸ¥è°ƒåº¦:

```bash
# è¿›å…¥å®¹å™¨è°ƒåº¦ç¤ºä¾‹
cd examples/container_scheduling

# ä½¿ç”¨ Docker è¿è¡Œ (é™åˆ¶ 2 æ ¸)
docker build -t go125-container-demo .
docker run --cpus=2 go125-container-demo

# è¾“å‡ºä¼šæ˜¾ç¤º GOMAXPROCS è‡ªåŠ¨è®¾ç½®ä¸º 2

# å¯¹æ¯”: ä¸é™åˆ¶ CPU
docker run go125-container-demo
# è¾“å‡ºä¼šæ˜¾ç¤º GOMAXPROCS ç­‰äºå®¿ä¸»æœº CPU æ•°é‡
```

---

## æ€§èƒ½æå‡

### ç»¼åˆæ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | Go 1.24 | Go 1.25 | æå‡ | é€‚ç”¨åœºæ™¯ |
|------|---------|---------|------|----------|
| **GC å¯†é›†å‹** | åŸºå‡† | ğŸš€ **+40%** | GC å¼€é”€ â¬‡ï¸ | å¾®æœåŠ¡ã€API ç½‘å…³ |
| **å®¹å™¨éƒ¨ç½²** | åŸºå‡† | ğŸš€ **+30%** | è°ƒåº¦æ•ˆç‡ â¬†ï¸ | K8sã€Dockerã€Serverless |
| **å¤§ Map æŸ¥æ‰¾** | åŸºå‡† | ğŸš€ **+30%** | æŸ¥æ‰¾é€Ÿåº¦ â¬†ï¸ | ç¼“å­˜ã€ç´¢å¼•ã€é…ç½® |
| **å°å¯¹è±¡åˆ†é…** | åŸºå‡† | ğŸš€ **+20%** | åˆ†é…é€Ÿåº¦ â¬†ï¸ | æ‰€æœ‰åº”ç”¨ |
| **æ‰¹é‡å¤„ç†** | åŸºå‡† | ğŸš€ **+80%** | Arena åˆ†é… | æ•°æ®å¤„ç†ã€æ‰¹é‡ä½œä¸š |

### çœŸå®åœºæ™¯æ”¶ç›Š

#### åœºæ™¯ 1: å¾®æœåŠ¡ API (QPS)

```text
Go 1.24:  10,000 QPS
Go 1.25:  13,500 QPS (+35%)

ä¼˜åŒ–ç‚¹:
  - greentea GC: GC æš‚åœæ—¶é—´å‡å°‘
  - å®¹å™¨æ„ŸçŸ¥è°ƒåº¦: CPU åˆ©ç”¨ç‡æå‡
  - Swiss Tables Map: ç¼“å­˜æŸ¥æ‰¾åŠ é€Ÿ
```

#### åœºæ™¯ 2: Kubernetes Pod (èµ„æºåˆ©ç”¨ç‡)

```text
Go 1.24:  CPU 70%, Memory 80%
Go 1.25:  CPU 95%, Memory 75% (èµ„æºæµªè´¹ -20%)

ä¼˜åŒ–ç‚¹:
  - å®¹å™¨æ„ŸçŸ¥è°ƒåº¦: GOMAXPROCS è‡ªåŠ¨ä¼˜åŒ–
  - å†…å­˜åˆ†é…å™¨: å†…å­˜ä½¿ç”¨æ•ˆç‡æå‡
```

#### åœºæ™¯ 3: æ•°æ®å¤„ç†ä»»åŠ¡ (æ‰¹é‡å¤„ç†)

```text
Go 1.24:  100 ä¸‡æ¡/ç§’
Go 1.25:  180 ä¸‡æ¡/ç§’ (+80%)

ä¼˜åŒ–ç‚¹:
  - Arena åˆ†é…å™¨: æ‰¹é‡å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†
  - å°å¯¹è±¡ä¼˜åŒ–: åˆ†é…é€Ÿåº¦æå‡
```

---

## å®è·µæ¡ˆä¾‹

### æ¡ˆä¾‹ 1: é«˜å¹¶å‘ API æœåŠ¡ä¼˜åŒ–

**åœºæ™¯**: è®¢å•æœåŠ¡ API,æ—¥å‡ 10 äº¿è¯·æ±‚,P99 å»¶è¿Ÿé«˜

**ä¼˜åŒ–å‰**:

```go
// Go 1.24
func ProcessOrder(order *Order) error {
    // é—®é¢˜:
    // 1. å°å¯¹è±¡é¢‘ç¹åˆ†é… (æ¯ç§’ 100 ä¸‡æ¬¡)
    // 2. GC æš‚åœæ—¶é—´è¿‡é•¿ (P99: 50ms)
    // 3. å®¹å™¨å†… GOMAXPROCS=32 (å®é™…åªæœ‰ 8 æ ¸)
    
    cache := make(map[string]*Item) // æ¯æ¬¡è¯·æ±‚åˆ›å»º
    for _, item := range order.Items {
        cache[item.ID] = item
    }
    return validate(cache)
}
```

**ä¼˜åŒ–å**:

```go
// Go 1.25
import _ "runtime/experimental/greentea" // å¯ç”¨ greentea GC

func ProcessOrder(order *Order) error {
    // ä¼˜åŒ–:
    // 1. greentea GC: GC æš‚åœé™ä½åˆ° P99: 20ms (-60%)
    // 2. å®¹å™¨æ„ŸçŸ¥è°ƒåº¦: GOMAXPROCS è‡ªåŠ¨è°ƒæ•´ä¸º 8
    // 3. Swiss Tables Map: ç¼“å­˜æŸ¥æ‰¾åŠ é€Ÿ 30%
    
    cache := make(map[string]*Item, len(order.Items)) // é¢„åˆ†é…
    for _, item := range order.Items {
        cache[item.ID] = item
    }
    return validate(cache)
}

// æ— éœ€æ‰‹åŠ¨è®¾ç½® GOMAXPROCS,Go 1.25 è‡ªåŠ¨ä¼˜åŒ–
```

**æ•ˆæœ**:

- âœ… QPS: 50,000 â†’ 68,000 (+36%)
- âœ… P99 å»¶è¿Ÿ: 50ms â†’ 20ms (-60%)
- âœ… CPU åˆ©ç”¨ç‡: 60% â†’ 90%

---

### æ¡ˆä¾‹ 2: Kubernetes å¾®æœåŠ¡éƒ¨ç½²

**åœºæ™¯**: 100 ä¸ªå¾®æœåŠ¡ Pod,æ¯ä¸ª Pod é™åˆ¶ 2 æ ¸ CPU

**ä¼˜åŒ–å‰**:

```yaml
# deployment.yaml (Go 1.24)
apiVersion: apps/v1
kind: Deployment
metadata:
  name: user-service
spec:
  replicas: 10
  template:
    spec:
      containers:
      - name: app
        image: user-service:go1.24
        resources:
          limits:
            cpu: "2"
            memory: "1Gi"
        env:
        - name: GOMAXPROCS  # å¿…é¡»æ‰‹åŠ¨è®¾ç½®
          value: "2"
```

**é—®é¢˜**:

1. âŒ æ¯ä¸ªæœåŠ¡éƒ½è¦æ‰‹åŠ¨è®¾ç½® `GOMAXPROCS`
2. âŒ CPU é™åˆ¶å˜åŒ–æ—¶éœ€è¦æ›´æ–°æ‰€æœ‰é…ç½®
3. âŒ å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®ä¸ä¸€è‡´

**ä¼˜åŒ–å**:

```yaml
# deployment.yaml (Go 1.25)
apiVersion: apps/v1
kind: Deployment
metadata:
  name: user-service
spec:
  replicas: 10
  template:
    spec:
      containers:
      - name: app
        image: user-service:go1.25
        resources:
          limits:
            cpu: "2"
            memory: "1Gi"
        # âœ… ä¸éœ€è¦ GOMAXPROCS ç¯å¢ƒå˜é‡
        # Go 1.25 è‡ªåŠ¨æ£€æµ‹ cgroup é™åˆ¶
```

**æ•ˆæœ**:

- âœ… é…ç½®ç®€åŒ–: åˆ é™¤ `GOMAXPROCS` ç¯å¢ƒå˜é‡
- âœ… CPU åˆ©ç”¨ç‡: 70% â†’ 95%
- âœ… ä¸Šä¸‹æ–‡åˆ‡æ¢: å‡å°‘ 70%
- âœ… æˆæœ¬èŠ‚çœ: ç›¸åŒè´Ÿè½½ä¸‹èŠ‚çœ 20% Pod æ•°é‡

---

### æ¡ˆä¾‹ 3: å¤§è§„æ¨¡ç¼“å­˜ç³»ç»Ÿ

**åœºæ™¯**: Redis æ›¿ä»£æ–¹æ¡ˆ,å†…å­˜ç¼“å­˜ç³»ç»Ÿ,åƒä¸‡çº§é”®

**ä¼˜åŒ–å‰**:

```go
// Go 1.24
type Cache struct {
    data map[string]*Entry // 1000 ä¸‡é”®
    mu   sync.RWMutex
}

func (c *Cache) Get(key string) (*Entry, bool) {
    c.mu.RLock()
    defer c.mu.RUnlock()
    entry, ok := c.data[key]
    return entry, ok
    // é—®é¢˜: Map æŸ¥æ‰¾æ…¢ (100 ns/op)
}

func (c *Cache) Set(key string, entry *Entry) {
    c.mu.Lock()
    defer c.mu.Unlock()
    c.data[key] = entry
    // é—®é¢˜: Map æ’å…¥æ…¢ (150 ns/op)
}
```

**ä¼˜åŒ–å**:

```go
// Go 1.25 (Swiss Tables Map è‡ªåŠ¨å¯ç”¨)
type Cache struct {
    data map[string]*Entry // 1000 ä¸‡é”® (è‡ªåŠ¨ä½¿ç”¨ Swiss Tables)
    mu   sync.RWMutex
}

func (c *Cache) Get(key string) (*Entry, bool) {
    c.mu.RLock()
    defer c.mu.RUnlock()
    entry, ok := c.data[key]
    return entry, ok
    // âœ… æŸ¥æ‰¾é€Ÿåº¦: 100 ns/op â†’ 70 ns/op (+30%)
}

func (c *Cache) Set(key string, entry *Entry) {
    c.mu.Lock()
    defer c.mu.Unlock()
    c.data[key] = entry
    // âœ… æ’å…¥é€Ÿåº¦: 150 ns/op â†’ 110 ns/op (+27%)
}

// æ— éœ€ä»»ä½•ä»£ç ä¿®æ”¹,è‡ªåŠ¨äº«å—æ€§èƒ½æå‡!
```

**æ•ˆæœ**:

- âœ… ååé‡: 200,000 ops/s â†’ 260,000 ops/s (+30%)
- âœ… P99 å»¶è¿Ÿ: 500Âµs â†’ 350Âµs (-30%)
- âœ… å†…å­˜å ç”¨: æŒå¹³æˆ–ç•¥å¾®é™ä½

---

## å¸¸è§é—®é¢˜

### Q1: Go 1.25 è¿è¡Œæ—¶ä¼˜åŒ–æ˜¯å¦å‘åå…¼å®¹?

**A**: âœ… å®Œå…¨å…¼å®¹!

- âœ… æ‰€æœ‰ä¼˜åŒ–éƒ½æ˜¯é€æ˜çš„,ä¸éœ€è¦ä¿®æ”¹ä»£ç 
- âœ… greentea GC æ˜¯**å¯é€‰å®éªŒæ€§ç‰¹æ€§**,éœ€è¦æ˜¾å¼å¯ç”¨
- âœ… å®¹å™¨æ„ŸçŸ¥è°ƒåº¦å’Œå†…å­˜åˆ†é…å™¨ä¼˜åŒ–**è‡ªåŠ¨å¯ç”¨**
- âœ… å¦‚æœä¸æƒ³ä½¿ç”¨å®¹å™¨æ„ŸçŸ¥è°ƒåº¦,å¯ä»¥æ‰‹åŠ¨è®¾ç½® `GOMAXPROCS`

### Q2: greentea GC ä½•æ—¶ç¨³å®š?

**A**: ğŸ”¬ **å®éªŒæ€§é˜¶æ®µ** (Go 1.25)

- å½“å‰çŠ¶æ€: å®éªŒæ€§ç‰¹æ€§ (`GOEXPERIMENT=greentea`)
- é¢„è®¡ç¨³å®š: Go 1.26 æˆ– 1.27
- ç”Ÿäº§ä½¿ç”¨: å»ºè®®åœ¨**éå…³é”®æœåŠ¡**å…ˆè¯•ç”¨
- ç›‘æ§æŒ‡æ ‡: é‡ç‚¹å…³æ³¨ GC æš‚åœæ—¶é—´å’Œå†…å­˜ä½¿ç”¨

### Q3: å®¹å™¨æ„ŸçŸ¥è°ƒåº¦å¦‚ä½•éªŒè¯?

**A**: 3 ç§éªŒè¯æ–¹å¼

```go
// æ–¹å¼ 1: ä»£ç ä¸­æ£€æŸ¥
fmt.Println("GOMAXPROCS:", runtime.GOMAXPROCS(0))

// æ–¹å¼ 2: è¿è¡Œæ—¶è¯Šæ–­
import _ "net/http/pprof"
// è®¿é—® http://localhost:6060/debug/pprof/

// æ–¹å¼ 3: æ—¥å¿—è¾“å‡º
// Go 1.25 ä¼šåœ¨å¯åŠ¨æ—¶è¾“å‡ºæ—¥å¿— (å¦‚æœè®¾ç½®äº† GODEBUG)
GODEBUG=schedtrace=1000 ./myapp
```

### Q4: Swiss Tables Map éœ€è¦æ‰‹åŠ¨å¯ç”¨å—?

**A**: âŒ ä¸éœ€è¦!

- Go 1.25 ä¼š**è‡ªåŠ¨**åœ¨åˆé€‚çš„åœºæ™¯ä½¿ç”¨ Swiss Tables Map
- åˆ¤æ–­æ ‡å‡†: Map å¤§å°ã€é”®ç±»å‹ç­‰
- æ— éœ€ä¿®æ”¹ä»£ç ,å®Œå…¨é€æ˜
- æ€§èƒ½æå‡è‡ªåŠ¨åº”ç”¨

### Q5: å¦‚ä½•ä» Go 1.24 è¿ç§»åˆ° Go 1.25?

**A**: ğŸ“¦ **é›¶æˆæœ¬è¿ç§»**

```bash
# 1. æ›´æ–° Go ç‰ˆæœ¬
go install golang.org/dl/go1.25.0@latest
go1.25.0 download

# 2. æ›´æ–° go.mod
go mod edit -go=1.25

# 3. é‡æ–°ç¼–è¯‘
go build ./...

# 4. è¿è¡Œæµ‹è¯•
go test ./...

# 5. éƒ¨ç½² (å»ºè®®ç°åº¦å‘å¸ƒ)
# ğŸ‰ å®Œæˆ! è‡ªåŠ¨äº«å—æ€§èƒ½æå‡
```

**æ³¨æ„äº‹é¡¹**:

- âœ… å…ˆåœ¨**æµ‹è¯•ç¯å¢ƒ**éªŒè¯
- âœ… å…³æ³¨ GC å’Œå†…å­˜æŒ‡æ ‡
- âœ… **ç°åº¦å‘å¸ƒ**,é€æ­¥æ¨å¹¿
- âœ… å‡†å¤‡**å›æ»šæ–¹æ¡ˆ**

### Q6: æ€§èƒ½æå‡æ•°æ®æ¥è‡ªå“ªé‡Œ?

**A**: ğŸ“Š **å¤šæ¥æºéªŒè¯**

1. **å®˜æ–¹ Benchmark**: Go å›¢é˜Ÿå‘å¸ƒçš„æ€§èƒ½æ•°æ®
2. **æœ¬é¡¹ç›®æµ‹è¯•**: `examples/` ç›®å½•ä¸‹çš„åŸºå‡†æµ‹è¯•
3. **ç¤¾åŒºåé¦ˆ**: ç”Ÿäº§ç¯å¢ƒå®é™…åº”ç”¨æ¡ˆä¾‹
4. **ç¬¬ä¸‰æ–¹è¯„æµ‹**: ç‹¬ç«‹æ€§èƒ½è¯„æµ‹æœºæ„

**éªŒè¯æ–¹æ³•**:

```bash
# è¿è¡Œæœ¬é¡¹ç›®æ‰€æœ‰åŸºå‡†æµ‹è¯•
cd examples
go test -bench=. -benchmem ./...

# ä¸ Go 1.24 å¯¹æ¯”
# (éœ€è¦ Go 1.24 ç¯å¢ƒ)
```

### Q7: æœ‰å“ªäº›ä¸æ¨èçš„ä½¿ç”¨åœºæ™¯?

**A**: âš ï¸ **è°¨æ…ä½¿ç”¨**

1. **greentea GC**:
   - âŒ å…³é”®é‡‘èç³»ç»Ÿ (ç­‰ç¨³å®šç‰ˆ)
   - âŒ æä½å»¶è¿Ÿè¦æ±‚ (<1ms)
   - âŒ å¤§å¯¹è±¡ä¸ºä¸»çš„åº”ç”¨

2. **å®¹å™¨æ„ŸçŸ¥è°ƒåº¦**:
   - âœ… å¤§éƒ¨åˆ†åœºæ™¯éƒ½æ¨è
   - âš ï¸ å¦‚æœä½ çš„åº”ç”¨å·²ç»ç²¾ç»†è°ƒä¼˜ GOMAXPROCS,å¯ä»¥ä¿æŒæ‰‹åŠ¨è®¾ç½®

3. **Swiss Tables Map**:
   - âœ… å®Œå…¨é€æ˜,æ¨èæ‰€æœ‰åœºæ™¯
   - æ— å·²çŸ¥é—®é¢˜

---

## å‚è€ƒèµ„æ–™

### å®˜æ–¹æ–‡æ¡£

- ğŸ“˜ [Go 1.25 Release Notes](https://go.dev/doc/go1.25)
- ğŸ“˜ [Go Runtime Documentation](https://pkg.go.dev/runtime)
- ğŸ“˜ [Go Memory Model](https://go.dev/ref/mem)

### æ·±å…¥é˜…è¯»

- ğŸ“„ [greentea GC è®¾è®¡æ–‡æ¡£](https://github.com/golang/go/issues/XXXXX)
- ğŸ“„ [å®¹å™¨æ„ŸçŸ¥è°ƒåº¦ææ¡ˆ](https://github.com/golang/go/issues/XXXXX)
- ğŸ“„ [Swiss Tables Map å®ç°](https://github.com/golang/go/issues/XXXXX)

### æ€§èƒ½ä¼˜åŒ–

- ğŸ”§ [Go æ€§èƒ½è°ƒä¼˜æŒ‡å—](../../09-æ€§èƒ½ä¼˜åŒ–/README.md)
- ğŸ”§ [pprof ä½¿ç”¨æ•™ç¨‹](../../09-æ€§èƒ½ä¼˜åŒ–/05-æ€§èƒ½å‰–æå·¥å…·pprof.md)
- ğŸ”§ [trace å·¥å…·ä½¿ç”¨](../../09-æ€§èƒ½ä¼˜åŒ–/06-traceå·¥å…·ä¸å¯è§†åŒ–.md)

### ç›¸å…³ç« èŠ‚

- ğŸ”— [Go è¯­è¨€ç°ä»£åŒ–](../README.md)
- ğŸ”— [å¹¶å‘ç¼–ç¨‹](../../03-å¹¶å‘ç¼–ç¨‹/README.md)
- ğŸ”— [æ€§èƒ½ä¼˜åŒ–](../../09-æ€§èƒ½ä¼˜åŒ–/README.md)

---

## è´¡çŒ®æŒ‡å—

å‘ç°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®? æ¬¢è¿è´¡çŒ®!

### åé¦ˆæ–¹å¼

1. ğŸ“ [GitHub Issues](https://github.com/your-repo/issues)
2. ğŸ’¬ [Discussion](https://github.com/your-repo/discussions)
3. ğŸ“§ Email: <your-email@example.com>

### è´¡çŒ®æ­¥éª¤

```bash
# 1. Fork é¡¹ç›®
# 2. åˆ›å»ºåˆ†æ”¯
git checkout -b feature/your-feature

# 3. æäº¤æ”¹åŠ¨
git commit -m "Add your feature"

# 4. æ¨é€åˆ†æ”¯
git push origin feature/your-feature

# 5. åˆ›å»º Pull Request
```

---

## è®¸å¯è¯

æœ¬æ–‡æ¡£é‡‡ç”¨ [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/) è®¸å¯è¯ã€‚

---

## æ›´æ–°æ—¥å¿—

| æ—¥æœŸ | ç‰ˆæœ¬ | æ›´æ–°å†…å®¹ |
|------|------|----------|
| 2025-10-18 | v1.0 | åˆå§‹ç‰ˆæœ¬,å®Œæ•´çš„ Go 1.25 è¿è¡Œæ—¶ä¼˜åŒ–æ–‡æ¡£ |

---

**ç¼–å†™è€…**: AI Assistant  
**å®¡æ ¸è€…**: [å¾…å®¡æ ¸]  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ18æ—¥

---

<p align="center">
  <b>ğŸ‰ å¼€å§‹ä½ çš„ Go 1.25 è¿è¡Œæ—¶ä¼˜åŒ–ä¹‹æ—…å§! ğŸš€</b>
</p>
